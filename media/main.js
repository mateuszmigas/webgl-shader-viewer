!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r,o="SHADERS",a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,u=a.length;i<u;i++,o++)r[o]=a[i];return r},u={emptyItem:!0},c=function(e,t,n){var r=a(a({},u),n),o=document.createElement("select");o.className="dropdown-base "+t;var c=null,l=[],s=function(t){e(c=t)};o.onchange=function(){var e=l.find((function(e){return e.item.id===o.value}));e.item.id?s(e.item):s(null)};return[o,{setItems:function(e){o.innerHTML="",l.length=0,e.find((function(e){return e.id===(null==c?void 0:c.id)}))||s(null),(r.emptyItem?i([{id:"",display:""}],e):i(e)).forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.display,t.selected=e.id===(null==c?void 0:c.id),o.appendChild(t),l.push({element:t,item:e})}))},getItems:function(){return l.map((function(e){return e.item}))},setSelectedItemById:function(e){s(null),l.forEach((function(t){t.item.id===e?(t.element.selected=!0,s(t.item)):t.element.selected=!1}))},getSelectedItem:function(){return c},clearSelection:function(){l.forEach((function(e){return e.element.selected=!1})),s(null)}}]},l=function(e,t){return e.substring(0,e.length-t)},s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},d=function(e,t){return e.hasOwnProperty(t)},f=acquireVsCodeApi(),p=function(){function e(){var e=this;this.eventListeners=[],window.addEventListener("message",(function(t){e.eventListeners.forEach((function(e){return e(t.data)}))}))}return e.prototype.getShaderDocuments=function(){var e=this,t=s();return f.postMessage({type:"getShaderDocuments",id:t}),new Promise((function(n){var r=function(o){"getShaderDocuments"===o.type&&o.id===t&&(n(o.payload.files),e.removeListener(r))};e.eventListeners.push(r)}))},e.prototype.getDocumentText=function(e){var t=this,n=s();return f.postMessage({type:"getDocumentText",id:n,payload:{fileName:e}}),new Promise((function(e){var r=function(o){"getDocumentText"===o.type&&o.id===n&&(e(o.payload.text),t.removeListener(r))};t.eventListeners.push(r)}))},e.prototype.subscribeToDocumentSave=function(e,t){var n=this;f.postMessage({type:"subscribeToDocumentTextChange",payload:{fileName:e}});var r=function(n){"onDocumentTextChange"===n.type&&n.payload.filePath===e&&t(n.payload.text)};return this.eventListeners.push(r),function(){n.removeListener(r),f.postMessage({type:"unsubscribeToDocumentTextChange",payload:{fileName:e}})}},e.prototype.removeListener=function(e){var t,n,r;t=this.eventListeners,n=e,(r=t.indexOf(n))>-1&&t.splice(r,1)},e}(),m=function(e,t,n){var r=document.createElement("button");return r.onclick=n,r.className=t,r.textContent=e,{element:r}},v=function(e,t,n){var r=document.createElement("div");r.className=t+" options-wrapper";var o=document.createElement("label");return o.className="options-label",o.textContent=n,e.className=e.className+" options-content",r.appendChild(o),r.appendChild(e),r},h=function(e,t,n,r,o){var a=document.createElement("div");a.className="edit-input-grid";for(var i=[],u=function(){return i.map((function(e){return e.value}))},c=0;c<n;c++){var l=document.createElement("div");l.className="edit-input-row";for(var s=function(n){var a=c*r+n,s=e[a],d=document.createElement("input"),f={element:d,value:s};Object.assign(d,o),d.className="edit-input",d.type="number",d.value=null==s?void 0:s.toString(),d.oninput=function(){i[a].value=Number(d.value),null==t||t(u())},i.push(f),l.appendChild(d)},d=0;d<r;d++)s(d);a.appendChild(l)}return[a,{setValues:function(e){return i.forEach((function(t,n){t.value=e[n],t.element.value=t.value.toString()}))},getValues:u,setReadonly:function(e){return i.forEach((function(t){return t.element.readOnly=e}))}}]},y=function(e,t){var n=document.createElement("div");return n.className=e,null==t||t.forEach((function(e){return n.appendChild(e)})),n},g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b={min:"0",max:"1",step:"0.1"};!function(e){e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4"}(r||(r={}));var x=function(){var e=document.createElement("div");return e.className="unsupported-error",e.innerText="Not supported uniform",e},w=function(e){var t=c((function(t){t&&(Object.values(e).forEach((function(e){return e.element.classList.add("hidden")})),e[t.id].element.classList.remove("hidden"))}),"",{emptyItem:!1}),n=t[0],r=t[1];return r.setItems(Object.entries(e).map((function(e){return{id:e[0],display:e[1].display}}))),r.setSelectedItemById("custom"),n},E=function(e){var t=h([0,0],e,1,2),n=t[0];return t[1].setValues([0,0]),n},S=function(e){var t=h([0,0,0],e,1,3),n=t[0];t[1].setValues([0,0,0]);var r=function(e){var t=[.5,.5,.5],n=document.createElement("div");n.className="edit-input-color";var r=function(e){n.style.background="rgb("+255*e[0]+","+255*e[1]+","+255*e[2]+",1)"};r(t);var o=y("row-with-gap"),a=h(t,(function(t){r(t),null==e||e(t)}),1,3,b),i=a[0],u=a[1];return o.appendChild(i),o.appendChild(n),[o,g(g({},u),{setValues:function(e){u.setValues(e),r(e)}})]}(e),o=r[0];r[1].setValues([1,0,0]);var a=w({custom:{display:"Custom",element:n},color:{display:"Color",element:o}});return y("column-with-gap",[a,n,o])},C=function(e){var t=h([0,0,0,0],e,1,4),n=t[0];t[1].setValues([0,0,0,0]);var r=function(e){var t=[.5,.5,.5,1],n=document.createElement("div");n.className="edit-input-color";var r=function(e){n.style.background="rgb("+255*e[0]+","+255*e[1]+","+255*e[2]+","+e[3]+")"};r(t);var o=y("row-with-gap"),a=h(t,(function(t){r(t),null==e||e(t)}),1,4,b),i=a[0],u=a[1];return o.appendChild(i),o.appendChild(n),[o,g(g({},u),{setValues:function(e){u.setValues(e),r(e)}})]}(e),o=r[0];r[1].setValues([1,0,0,1]);var a=w({custom:{display:"Custom",element:n},color:{display:"Color",element:o}});return y("column-with-gap",[a,n,o])},T=function(){function e(e){this.keySelector=e,this.map=new Map}return e.prototype.get=function(e){return this.map.get(this.keySelector(e))},e.prototype.set=function(e,t){this.map.set(this.keySelector(e),t)},e.prototype.clear=function(){this.map.clear()},e}(),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},L=new T((function(e){return e.name+";"+e.type})),N=function(e,t){console.log("updating shader options"),t.uniforms.map((function(e){var n=L.get(O({},e));if(n)return console.log("component found",e),n;console.log("crating new comp");var o=v(function(e,t){switch(e.type){case r.FLOAT_VEC2:return E((function(n){e.update(n),t()}));case r.FLOAT_VEC3:return S((function(n){e.update(n),t()}));case r.FLOAT_VEC4:return C((function(n){e.update(n),t()}));default:return x()}}(e,t.render),"",e.name);return L.set(O({},e),o),o})).forEach((function(t){return e.appendChild(t)}))},V=function(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;var o=e.getShaderInfoLog(r);return e.deleteShader(r),{error:o}},A=function(e){var t=document.createElement("canvas");t.className=e;var n=t.getContext("webgl");if(!n)throw new Error("Unable to create webgl context");return[t,{compileShaders:function(e,t){var r=V(n,n.VERTEX_SHADER,e),o=V(n,n.FRAGMENT_SHADER,t),a=void 0;d(r,"error")&&(a=l(r.error,1));var i=void 0;if(d(o,"error")&&(i=l(o.error,1)),a||i)return[a,i];var u=function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;throw console.log("cos nie halo"),e.deleteProgram(r),new Error("Creating program failed: "+e.getProgramInfoLog(r))}(n,r,o);return{render:function(){console.log("rendering")},uniforms:function(e,t){var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[];console.log("getting uniforms",n);for(var o=0;o<n;++o){var a=e.getActiveUniform(t,o);a.name;r.push({name:a.name,type:a.type,update:function(){return console.log("i dupa")}})}return r}(n,u)}}}]},P=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},D=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};P(void 0,void 0,void 0,(function(){var e,t,n,r,a,i,u,l,s,d,f,h,g,b,x,w,E,S,C,T;return D(this,(function(O){var L,V,I;return e=new p,t=document.getElementById("viewer"),n=y("viewer-options"),r=y("viewer-shader-options"),a=y("viewer-content shader-errors"),i=A("viewer-content"),u=i[0],l=i[1],t.appendChild(u),t.appendChild(a),t.appendChild(n),s=function(e){u.style.visibility="canvas"===e?"visible":"collapse",a.style.visibility="errors"===e?"visible":"collapse"},b=function(){if(r.innerHTML="",g&&h){var e=l.compileShaders(h,g);if(Array.isArray(e)){s("errors");var t=e,n=t[0],o=t[1],i=[];n&&i.push("VERTEX SHADER:",n),o&&i.push("FRAGMENT SHADER:",o),a.innerText=i.join("\r\n")}else s("canvas"),N(r,e)}else s("none")},n.appendChild(y("viewer-shaders-title",[(L=o,V="",I=document.createElement("h3"),I.textContent=L,I.className=V+" section-title",{element:I}).element,m("Sync","viewer-refresh-button",(function(){e.getShaderDocuments().then((function(e){var t=e.map((function(e){return{id:e.filePath,display:e.fileName}}));E.setItems(t),T.setItems(t)}))})).element])),x=c((function(t){return P(void 0,void 0,void 0,(function(){var n;return D(this,(function(r){switch(r.label){case 0:return null==d||d(),t&&(d=e.subscribeToDocumentSave(t.id,(function(e){h=e,b()}))),t?[4,e.getDocumentText(t.id)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return h=n,b(),[2]}}))}))})),w=x[0],E=x[1],n.appendChild(v(w,"viewer-vertex-shader-selector","Vertex Shader")),S=c((function(t){return P(void 0,void 0,void 0,(function(){var n;return D(this,(function(r){switch(r.label){case 0:return null==f||f(),t&&(f=e.subscribeToDocumentSave(t.id,(function(e){g=e,b()}))),t?[4,e.getDocumentText(t.id)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return g=n,b(),[2]}}))}))})),C=S[0],T=S[1],n.appendChild(v(C,"viewer-fragment-shader-selector","Fragment Shader")),n.appendChild(r),[2]}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyYW5zbGF0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL3VuaWZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL2Ryb3Bkb3duLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbW11bmljYXRpb25Qcm94eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvY3JlYXRlRkFCdXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL3dyYXBwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9uZW50cy9lZGl0VmVjdG9yMy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvY29tbW9uLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9uZW50cy9lZGl0Q29sb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci91bmlmb3JtQ29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9zaXRlS2V5TWFwLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvc2hhZGVyT3B0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL3dlYmdsX3V0aWxzL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY3JlYXRlV2ViR0xDYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvY3JlYXRlU2VjdGlvblRpdGxlLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVW5pZm9ybVR5cGUiLCJ0cmFuc2xhdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsImVtcHR5SXRlbSIsImNyZWF0ZURyb3Bkb3duIiwib25DaGFuZ2UiLCJjbGFzc05hbWUiLCJvcHRpb25zIiwiY29tYmluZWRPcHRpb25zIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNlbGVjdGVkSXRlbSIsIml0ZW1FbGVtZW50cyIsInNldFNlbGVjdGVkSXRlbSIsIml0ZW0iLCJvbmNoYW5nZSIsImZvdW5kRWxlbWVudCIsImZpbmQiLCJlIiwiaWQiLCJzZXRJdGVtcyIsIml0ZW1zIiwiaW5uZXJIVE1MIiwibGVuZ3RoIiwiZGlzcGxheSIsImZvckVhY2giLCJvcHRpb24iLCJ0ZXh0Q29udGVudCIsInNlbGVjdGVkIiwiYXBwZW5kQ2hpbGQiLCJwdXNoIiwiZ2V0SXRlbXMiLCJtYXAiLCJpZSIsInNldFNlbGVjdGVkSXRlbUJ5SWQiLCJnZXRTZWxlY3RlZEl0ZW0iLCJjbGVhclNlbGVjdGlvbiIsInJlbW92ZUxhc3QiLCJ0ZXh0IiwiY291bnQiLCJzdWJzdHJpbmciLCJ1dWlkdjQiLCJyZXBsYWNlIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiaGFzUHJvcGVydHkiLCJvYmoiLCJwcm9wIiwiYWNxdWlyZVZzQ29kZUFwaSIsImV2ZW50TGlzdGVuZXJzIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwibGlzdGVuZXIiLCJkYXRhIiwiZ2V0U2hhZGVyRG9jdW1lbnRzIiwibWVzc2FnZUlkIiwicG9zdE1lc3NhZ2UiLCJ0eXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJtZXNzYWdlIiwicGF5bG9hZCIsImZpbGVzIiwicmVtb3ZlTGlzdGVuZXIiLCJnZXREb2N1bWVudFRleHQiLCJmaWxlTmFtZSIsInN1YnNjcmliZVRvRG9jdW1lbnRTYXZlIiwiZmlsZVBhdGgiLCJjYWxsYmFjayIsInRoaXMiLCJhcnJheSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZUZBQnV0dG9uIiwib25DbGljayIsImJ1dHRvbiIsIm9uY2xpY2siLCJ3aXRoTGFiZWwiLCJ3cmFwcGVyIiwibGFiZWwiLCJjcmVhdGVNdWx0aU51bWJlcklucHV0IiwiaW5pdGlhbFZhbHVlIiwicm93cyIsImNvbHVtbnMiLCJpbnB1dE9wdGlvbnMiLCJpbnB1dEdyaWQiLCJnZXRWYWx1ZXMiLCJyb3ciLCJpbnB1dFJvdyIsImNvbHVtbiIsImlucHV0IiwiaXRlbUVsZW1lbnQiLCJhc3NpZ24iLCJvbmlucHV0IiwiTnVtYmVyIiwic2V0VmFsdWVzIiwibmV3VmFsdWVzIiwic2V0UmVhZG9ubHkiLCJyZWFkb25seSIsInJlYWRPbmx5IiwiY3JlYXRlRGl2IiwiY2hpbGRyZW4iLCJkaXYiLCJjb2xvcklucHV0UHJvcHMiLCJtaW4iLCJtYXgiLCJzdGVwIiwiY3JlYXRlVW5pZm9ybU5vdFN1cHBvcnRlZCIsImlubmVyVGV4dCIsImNyZWF0ZVVuaWZvcm1TZWxlY3Rpb24iLCJlbGVtZW50cyIsInZhbHVlcyIsIm9lIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwib3B0aW9uc0VsZW1lbnQiLCJvcHRpb25zQ29udHJvbGxlciIsImVudHJpZXMiLCJjcmVhdGVVbmlmb3JtRm9yVmVjMiIsInVwZGF0ZSIsImN1c3RvbUVsZW1lbnQiLCJjcmVhdGVVbmlmb3JtRm9yVmVjMyIsImNvbG9yRGl2Iiwic2V0Q29sb3IiLCJjb2xvciIsInN0eWxlIiwiYmFja2dyb3VuZCIsImNvbnRhaW5lciIsImNvbnRyb2xsZXIiLCJjcmVhdGVDb2xvcjMiLCJjb2xvckVsZW1lbnQiLCJjdXN0b20iLCJjcmVhdGVVbmlmb3JtRm9yVmVjNCIsImNyZWF0ZUNvbG9yNCIsImtleVNlbGVjdG9yIiwiTWFwIiwic2V0IiwiY2xlYXIiLCJ1bmlmb3Jtc0NhY2hlIiwiQ29tcG9zaXRlS2V5TWFwIiwiYXBwZW5kV2l0aFNoYWRlck9wdGlvbnMiLCJzaGFkZXJDb250cm9sbGVyIiwiY29uc29sZSIsImxvZyIsInVuaWZvcm1zIiwidW5pZm9ybSIsImNvbXBvbmVudEZyb21DYWNoZSIsImNvbXBvbmVudCIsInVuaWZvcm1JbmZvIiwicmVuZGVyIiwiRkxPQVRfVkVDMiIsIkZMT0FUX1ZFQzMiLCJGTE9BVF9WRUM0IiwiY3JlYXRlVW5pZm9ybUNvbXBvbmVudCIsImNvbXBpbGVTaGFkZXIiLCJyZW5kZXJpbmdDb250ZXh0Iiwic291cmNlIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwic2hhZGVyU291cmNlIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJlcnJvciIsImdldFNoYWRlckluZm9Mb2ciLCJkZWxldGVTaGFkZXIiLCJjcmVhdGVXZWJHTENhbnZhcyIsImNhbnZhcyIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiRXJyb3IiLCJjb21waWxlU2hhZGVycyIsInZlcnRleFNoYWRlckNvbnRlbnQiLCJmcmFnbWVudFNoYWRlckNvbnRlbnQiLCJ2ZXJ0ZXhTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiZnJhZ21lbnRTaGFkZXIiLCJGUkFHTUVOVF9TSEFERVIiLCJ2ZXJ0ZXhFcnJvciIsInVuZGVmaW5lZCIsImZyYWdtZW50RXJyb3IiLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZGVsZXRlUHJvZ3JhbSIsImdldFByb2dyYW1JbmZvTG9nIiwibnVtVW5pZm9ybXMiLCJBQ1RJVkVfVU5JRk9STVMiLCJyZXN1bHQiLCJpaSIsImdldEFjdGl2ZVVuaWZvcm0iLCJnZW5lcmF0ZVVuaWZvcm1JbmZvcyIsInZzY29kZUFwaSIsInZpZXdlciIsImdldEVsZW1lbnRCeUlkIiwidmlld2VyT3B0aW9ucyIsInNoYWRlck9wdGlvbnMiLCJzaGFkZXJDb21waWxhdGlvbkVycm9ycyIsIndlYkdMQ2FudmFzIiwid2ViR0xDb250cm9sbGVyIiwic2hvd0NvbnRlbnQiLCJjb250ZW50IiwidmlzaWJpbGl0eSIsIm9uU2hhZGVyQ29udGVudENoYW5nZWQiLCJzZWxlY3RlZEZyYWdtZW50Q29udGVudCIsInNlbGVjdGVkVmVydGV4Q29udGVudCIsIkFycmF5IiwiaXNBcnJheSIsInZlcnRleFNoYWRlckVycm9ycyIsImZyYWdtZW50U2hhZGVyRXJyb3JzIiwiZXJyb3JzIiwiam9pbiIsInRoZW4iLCJzZCIsImYiLCJ2ZXJ0ZXhEcm9wZG93bkNvbnRyb2xsZXIiLCJmcmFnbWVudERyb3Bkb3duQ29udHJvbGxlciIsIm5ld1ZlcnRleCIsInNlbGVjdGVkVmVydGV4RmlsZVdhdGNoZXJVbnN1YnNjcmliZSIsIm5ld0NvbnRlbnQiLCJ2ZXJ0ZXhEcm9wZG93bkVsZW1lbnQiLCJuZXdGcmFnbWVudCIsInNlbGVjdGVkRnJhZ21lbnRGaWxlV2F0Y2hlclVuc3Vic2NyaWJlIiwiZnJhZ21lbnREcm9wZG93bkVsZW1lbnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxR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RkpnTSxFQUF3QixFQUd4QkYsSSxjQWpCR2lCLEVBQXFCLEtBQUVMLEVBQXdCLEtBb0J0RHBCLEVBQWM1SyxZQUNabUQsRUFDRWtKLEVBQ0EsZ0NBQ0Esa0JBSUUsRUFBd0QvTixHQUM1RCxTQUFPZ08sR0FBVywwQywrREFDaEJDLGFBRUlELElBQ0ZDLEVBQXlDOUIsRUFBVWxJLHdCQUNqRCtKLEVBQVloTixJQUNaLFNBQUM4TSxHQUNDZixFQUEwQmUsRUFDMUJoQixRQUtvQmtCLEVBQ3RCLEdBQU03QixFQUFVcEksZ0JBQWdCaUssRUFBWWhOLEtBRHRCLE0sY0FDdEIsVyxhQUNBLEssd0JBRkorTCxFQUEwQixFQUcxQkQsSSxjQWpCR29CLEVBQXVCLEtBQUVQLEVBQTBCLEtBb0IxRHJCLEVBQWM1SyxZQUNabUQsRUFDRXFKLEVBQ0Esa0NBQ0Esb0JBSUo1QixFQUFjNUssWUFBWTZLLEciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBjb25zdCB0cmFuc2xhdGlvbnMgPSB7XHJcbiAgICBzaGFkZXJzOiBcIlNIQURFUlNcIlxyXG59IiwiaW1wb3J0IHsgVmVjdG9yMiwgVmVjdG9yMywgVmVjdG9yNCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZWRpdFZlY3RvcjNcIjtcclxuaW1wb3J0IHsgQ29sb3IzLCBDb2xvcjQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2VkaXRDb2xvclwiO1xyXG5leHBvcnQgZW51bSBVbmlmb3JtVHlwZSB7XHJcbiAgRkxPQVRfVkVDMiA9IDM1NjY0LFxyXG4gIEZMT0FUX1ZFQzMgPSAzNTY2NSxcclxuICBGTE9BVF9WRUM0ID0gMzU2NjYsXHJcbn1cclxuXHJcbi8vNTEyMCAoQllURSksIDUxMjEgKFVOU0lHTkVEX0JZVEUpLCA1MTIyIChTSE9SVCksIDUxMjMgKFVOU0lHTkVEX1NIT1JUKSwgNTEyNCAoSU5UKSxcclxuLy8gNTEyNSAoVU5TSUdORURfSU5UKSwgNTEyNiAoRkxPQVQpLCAzNTY2NCAoRkxPQVRfVkVDMiksXHJcbi8vICwgMzU2NjcgKElOVF9WRUMyKSwgMzU2NjggKElOVF9WRUMzKSwgMzU2NjkgKElOVF9WRUM0KSwgMzU2NzAgKEJPT0wpLCAzNTY3MSAoQk9PTF9WRUMyKSwgMzU2NzIgKEJPT0xfVkVDMyksIDM1NjczIChCT09MX1ZFQzQpLCAzNTY3NCAoRkxPQVRfTUFUMiksIDM1Njc1IChGTE9BVF9NQVQzKSwgMzU2NzYgKEZMT0FUX01BVDQpLCBhbmQgMzU2NzggKFNBTVBMRVJfMkQpLlxyXG5cclxuZXhwb3J0IHR5cGUgVW5pZm9ybUluZm8gPVxyXG4gIHwge1xyXG4gICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgIHR5cGU6IFVuaWZvcm1UeXBlLkZMT0FUX1ZFQzI7XHJcbiAgICAgIHVwZGF0ZTogKHZhbHVlOiBWZWN0b3IyKSA9PiB2b2lkO1xyXG4gICAgfVxyXG4gIHwge1xyXG4gICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgIHR5cGU6IFVuaWZvcm1UeXBlLkZMT0FUX1ZFQzM7XHJcbiAgICAgIHVwZGF0ZTogKHZhbHVlOiBWZWN0b3IzIHwgQ29sb3IzKSA9PiB2b2lkO1xyXG4gICAgfVxyXG4gIHwge1xyXG4gICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgIHR5cGU6IFVuaWZvcm1UeXBlLkZMT0FUX1ZFQzQ7XHJcbiAgICAgIHVwZGF0ZTogKHZhbHVlOiBWZWN0b3I0IHwgQ29sb3I0KSA9PiB2b2lkO1xyXG4gICAgfTtcclxuIiwiZXhwb3J0IHR5cGUgRHJvcGRvd25JdGVtID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZGlzcGxheTogc3RyaW5nO1xyXG59O1xyXG5cclxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgZW1wdHlJdGVtOiB0cnVlXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVEcm9wZG93biA9IChcclxuICAvL2luaXRpYWxWYWx1ZTogRHJvcGRvd25JdGVtIHwgbnVsbCxcclxuICBvbkNoYW5nZTogKGl0ZW06IERyb3Bkb3duSXRlbSB8IG51bGwpID0+IHZvaWQsXHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nLFxyXG4gIG9wdGlvbnM/OiB7IGVtcHR5SXRlbTogYm9vbGVhbiB9IC8vcGxhY2Vob2xkZXJcclxuKTogW1xyXG4gICAgSFRNTFNlbGVjdEVsZW1lbnQsXHJcbiAgICB7XHJcbiAgICAgIHNldEl0ZW1zOiAoaXRlbXM6IERyb3Bkb3duSXRlbVtdKSA9PiB2b2lkO1xyXG4gICAgICBnZXRJdGVtczogKCkgPT4gRHJvcGRvd25JdGVtW107XHJcbiAgICAgIHNldFNlbGVjdGVkSXRlbUJ5SWQ6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgICBnZXRTZWxlY3RlZEl0ZW06ICgpID0+IERyb3Bkb3duSXRlbSB8IG51bGw7XHJcbiAgICAgIGNsZWFyU2VsZWN0aW9uOiAoKSA9PiB2b2lkO1xyXG4gICAgfVxyXG4gIF0gPT4ge1xyXG4gIGNvbnN0IGNvbWJpbmVkT3B0aW9ucyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICBlbGVtZW50LmNsYXNzTmFtZSA9IGBkcm9wZG93bi1iYXNlICR7Y2xhc3NOYW1lfWA7XHJcblxyXG4gIGxldCBzZWxlY3RlZEl0ZW06IERyb3Bkb3duSXRlbSB8IG51bGwgPSBudWxsO1xyXG4gIGxldCBpdGVtRWxlbWVudHM6IHsgZWxlbWVudDogSFRNTE9wdGlvbkVsZW1lbnQ7IGl0ZW06IERyb3Bkb3duSXRlbSB9W10gPSBbXTtcclxuICBjb25zdCBzZXRTZWxlY3RlZEl0ZW0gPSAoaXRlbTogRHJvcGRvd25JdGVtIHwgbnVsbCkgPT4ge1xyXG4gICAgc2VsZWN0ZWRJdGVtID0gaXRlbTtcclxuICAgIG9uQ2hhbmdlKHNlbGVjdGVkSXRlbSk7XHJcbiAgfTtcclxuXHJcbiAgZWxlbWVudC5vbmNoYW5nZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGZvdW5kRWxlbWVudCA9IGl0ZW1FbGVtZW50cy5maW5kKChlKSA9PiBlLml0ZW0uaWQgPT09IGVsZW1lbnQudmFsdWUpO1xyXG5cclxuICAgIGlmIChmb3VuZEVsZW1lbnQuaXRlbS5pZCkgc2V0U2VsZWN0ZWRJdGVtKGZvdW5kRWxlbWVudC5pdGVtKTtcclxuICAgIGVsc2Ugc2V0U2VsZWN0ZWRJdGVtKG51bGwpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNldEl0ZW1zID0gKGl0ZW1zOiBEcm9wZG93bkl0ZW1bXSkgPT4ge1xyXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgaXRlbUVsZW1lbnRzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgaWYgKCFpdGVtcy5maW5kKChpKSA9PiBpLmlkID09PSBzZWxlY3RlZEl0ZW0/LmlkKSkge1xyXG4gICAgICBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3SXRlbXMgPSBjb21iaW5lZE9wdGlvbnMuZW1wdHlJdGVtID8gW3sgaWQ6IFwiXCIsIGRpc3BsYXk6IFwiXCIgfSwgLi4uaXRlbXNdIDogWy4uLml0ZW1zXTtcclxuICAgIG5ld0l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgb3B0aW9uLnZhbHVlID0gaXRlbS5pZDtcclxuICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gaXRlbS5kaXNwbGF5O1xyXG4gICAgICBvcHRpb24uc2VsZWN0ZWQgPSBpdGVtLmlkID09PSBzZWxlY3RlZEl0ZW0/LmlkO1xyXG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgIGl0ZW1FbGVtZW50cy5wdXNoKHsgZWxlbWVudDogb3B0aW9uLCBpdGVtIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0SXRlbXMgPSAoKSA9PiBpdGVtRWxlbWVudHMubWFwKChpZSkgPT4gaWUuaXRlbSk7XHJcbiAgY29uc3Qgc2V0U2VsZWN0ZWRJdGVtQnlJZCA9IChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XHJcbiAgICBpdGVtRWxlbWVudHMuZm9yRWFjaCgoaWUpID0+IHtcclxuICAgICAgaWYgKGllLml0ZW0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgaWUuZWxlbWVudC5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgc2V0U2VsZWN0ZWRJdGVtKGllLml0ZW0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGllLmVsZW1lbnQuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0U2VsZWN0ZWRJdGVtID0gKCkgPT4gc2VsZWN0ZWRJdGVtO1xyXG4gIGNvbnN0IGNsZWFyU2VsZWN0aW9uID0gKCkgPT4ge1xyXG4gICAgaXRlbUVsZW1lbnRzLmZvckVhY2goKGllKSA9PiAoaWUuZWxlbWVudC5zZWxlY3RlZCA9IGZhbHNlKSk7XHJcbiAgICBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIFtcclxuICAgIGVsZW1lbnQsXHJcbiAgICB7XHJcbiAgICAgIHNldEl0ZW1zLFxyXG4gICAgICBnZXRJdGVtcyxcclxuICAgICAgc2V0U2VsZWN0ZWRJdGVtQnlJZCxcclxuICAgICAgZ2V0U2VsZWN0ZWRJdGVtLFxyXG4gICAgICBjbGVhclNlbGVjdGlvbixcclxuICAgIH0sXHJcbiAgXTtcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IHJlbW92ZSA9IDxUPihhcnJheTogVFtdLCBpdGVtOiBUKSA9PiB7XHJcbiAgY29uc3QgaW5kZXggPSBhcnJheS5pbmRleE9mKGl0ZW0pO1xyXG5cclxuICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcmVtb3ZlTGFzdCA9ICh0ZXh0OiBzdHJpbmcsIGNvdW50OiBudW1iZXIpID0+IHtcclxuICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgdGV4dC5sZW5ndGggLSBjb3VudCk7XHJcbn07XHJcblxyXG4vL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbmV4cG9ydCBjb25zdCB1dWlkdjQgPSAoKSA9PiB7XHJcbiAgcmV0dXJuIFwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgdmFyIHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDAsXHJcbiAgICAgIHYgPSBjID09IFwieFwiID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYXNQcm9wZXJ0eSA9IDxUIGV4dGVuZHMge30sIFAgZXh0ZW5kcyBQcm9wZXJ0eUtleT4oXHJcbiAgb2JqOiBULFxyXG4gIHByb3A6IFBcclxuKTogb2JqIGlzIFQgJiBSZWNvcmQ8UCwgdW5rbm93bj4gPT4ge1xyXG4gIHJldHVybiBvYmouaGFzT3duUHJvcGVydHkocHJvcCk7XHJcbn07XHJcbiIsImltcG9ydCB7IHJlbW92ZSwgdXVpZHY0IH0gZnJvbSAnLi8uLi91dGlscyc7XHJcbmRlY2xhcmUgY29uc3QgYWNxdWlyZVZzQ29kZUFwaTogKCkgPT4ge1xyXG4gIC8vZ2V0U3RhdGU6ICgpID0+IGFueTtcclxuICAvL3NldFN0YXRlOiAoc3RhdGU6IGFueSkgPT4gdm9pZDtcclxuICBwb3N0TWVzc2FnZTogKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlcXVlc3QpID0+IHZvaWQ7XHJcbn07XHJcbmV4cG9ydCBjb25zdCB2c2NvZGVBcGkgPSBhY3F1aXJlVnNDb2RlQXBpKCk7XHJcblxyXG5leHBvcnQgdHlwZSBWc0NvZGVBcGlQcm94eU1lc3NhZ2VSZXF1ZXN0ID1cclxuICB8IHsgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIiwgaWQ6IHN0cmluZywgfVxyXG4gIHwgeyB0eXBlOiBcImdldERvY3VtZW50VGV4dFwiLCBpZDogc3RyaW5nLCBwYXlsb2FkOiB7IGZpbGVOYW1lOiBzdHJpbmcgfSB9XHJcbiAgfCB7IHR5cGU6IFwic3Vic2NyaWJlVG9Eb2N1bWVudFRleHRDaGFuZ2VcIiwgcGF5bG9hZDogeyBmaWxlTmFtZTogc3RyaW5nIH0gfVxyXG4gIHwgeyB0eXBlOiBcInVuc3Vic2NyaWJlVG9Eb2N1bWVudFRleHRDaGFuZ2VcIiwgcGF5bG9hZDogeyBmaWxlTmFtZTogc3RyaW5nIH0gfTtcclxuXHJcbmV4cG9ydCB0eXBlIFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlID0ge1xyXG4gIHR5cGU6IFwiZ2V0U2hhZGVyRG9jdW1lbnRzXCI7XHJcbiAgaWQ6IHN0cmluZyxcclxuICBwYXlsb2FkOiB7IGZpbGVzOiB7IGZpbGVQYXRoOiBzdHJpbmc7IGZpbGVOYW1lOiBzdHJpbmcgfVtdIH07XHJcbn0gfFxyXG57IHR5cGU6IFwiZ2V0RG9jdW1lbnRUZXh0XCIsIGlkOiBzdHJpbmcsIHBheWxvYWQ6IHsgZmlsZU5hbWU6IHN0cmluZywgdGV4dDogc3RyaW5nIH0gfSB8XHJcbnsgdHlwZTogXCJvbkRvY3VtZW50VGV4dENoYW5nZVwiLCBwYXlsb2FkOiB7IGZpbGVQYXRoOiBzdHJpbmcsIHRleHQ6IHN0cmluZyB9IH1cclxuXHJcbmV4cG9ydCB0eXBlIFVuc3Vic2NyaWJlID0gKCkgPT4gdm9pZDtcclxuXHJcbnR5cGUgUHJveHlSZXNwb25zZUxpc3RlbmVyID0gKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZzQ29kZUFwaVByb3h5IHtcclxuICBldmVudExpc3RlbmVyczogUHJveHlSZXNwb25zZUxpc3RlbmVyW10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKGV2ZW50LmRhdGEpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2hhZGVyRG9jdW1lbnRzKCkge1xyXG4gICAgY29uc3QgbWVzc2FnZUlkID0gdXVpZHY0KCk7XHJcblxyXG4gICAgdnNjb2RlQXBpLnBvc3RNZXNzYWdlKHtcclxuICAgICAgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIixcclxuICAgICAgaWQ6IG1lc3NhZ2VJZFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHsgZmlsZVBhdGg6IHN0cmluZzsgZmlsZU5hbWU6IHN0cmluZyB9W10+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJnZXRTaGFkZXJEb2N1bWVudHNcIiAmJiBtZXNzYWdlLmlkID09PSBtZXNzYWdlSWQpIHtcclxuICAgICAgICAgIHJlc29sdmUobWVzc2FnZS5wYXlsb2FkLmZpbGVzKTtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldERvY3VtZW50VGV4dChmaWxlTmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlSWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgICB2c2NvZGVBcGkucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiBcImdldERvY3VtZW50VGV4dFwiLFxyXG4gICAgICBpZDogbWVzc2FnZUlkLFxyXG4gICAgICBwYXlsb2FkOiB7IGZpbGVOYW1lIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJnZXREb2N1bWVudFRleHRcIiAmJiBtZXNzYWdlLmlkID09PSBtZXNzYWdlSWQpIHtcclxuICAgICAgICAgIHJlc29sdmUobWVzc2FnZS5wYXlsb2FkLnRleHQpO1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlVG9Eb2N1bWVudFNhdmUoZmlsZVBhdGg6IHN0cmluZywgY2FsbGJhY2s6IChuZXdDb250ZW50OiBzdHJpbmcpID0+IHZvaWQpOiBVbnN1YnNjcmliZSB7XHJcbiAgICB2c2NvZGVBcGkucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiBcInN1YnNjcmliZVRvRG9jdW1lbnRUZXh0Q2hhbmdlXCIsXHJcbiAgICAgIHBheWxvYWQ6IHsgZmlsZU5hbWU6IGZpbGVQYXRoIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGxpc3RlbmVyID0gKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwib25Eb2N1bWVudFRleHRDaGFuZ2VcIiAmJiBtZXNzYWdlLnBheWxvYWQuZmlsZVBhdGggPT09IGZpbGVQYXRoKSB7XHJcbiAgICAgICAgY2FsbGJhY2sobWVzc2FnZS5wYXlsb2FkLnRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xyXG4gICAgICB2c2NvZGVBcGkucG9zdE1lc3NhZ2UoeyB0eXBlOiBcInVuc3Vic2NyaWJlVG9Eb2N1bWVudFRleHRDaGFuZ2VcIiwgcGF5bG9hZDogeyBmaWxlTmFtZTogZmlsZVBhdGggfSB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcjogUHJveHlSZXNwb25zZUxpc3RlbmVyKSB7XHJcbiAgICByZW1vdmUodGhpcy5ldmVudExpc3RlbmVycywgbGlzdGVuZXIpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBjcmVhdGVGQUJ1dHRvbiA9IChcclxuICB0ZXh0OiBzdHJpbmcsXHJcbiAgY2xhc3NOYW1lOiBzdHJpbmcsXHJcbiAgb25DbGljazogKCkgPT4gdm9pZFxyXG4pID0+IHtcclxuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJ1dHRvbi5vbmNsaWNrID0gb25DbGljaztcclxuICBidXR0b24uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIGJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgcmV0dXJuIHsgZWxlbWVudDogYnV0dG9uIH07XHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCB3aXRoTGFiZWwgPSAoXHJcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXHJcbiAgY2xhc3NOYW1lOiBzdHJpbmcsXHJcbiAgdGV4dDogc3RyaW5nXHJcbikgPT4ge1xyXG4gIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHdyYXBwZXIuY2xhc3NOYW1lID0gYCR7Y2xhc3NOYW1lfSBvcHRpb25zLXdyYXBwZXJgO1xyXG4gIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xyXG4gIGxhYmVsLmNsYXNzTmFtZSA9IFwib3B0aW9ucy1sYWJlbFwiO1xyXG4gIGxhYmVsLnRleHRDb250ZW50ID0gdGV4dDtcclxuICBlbGVtZW50LmNsYXNzTmFtZSA9IGAke2VsZW1lbnQuY2xhc3NOYW1lfSBvcHRpb25zLWNvbnRlbnRgO1xyXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgcmV0dXJuIHdyYXBwZXI7XHJcbn07XHJcbiIsImltcG9ydCB7IGNyZWF0ZURpdiB9IGZyb20gXCIuL2NvbW1vblwiO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dCA9IDxUIGV4dGVuZHMgbnVtYmVyW10+KFxyXG4gIGluaXRpYWxWYWx1ZTogVCxcclxuICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBUKSA9PiB2b2lkLFxyXG4gIHJvd3M6IG51bWJlcixcclxuICBjb2x1bW5zOiBudW1iZXIsXHJcbiAgaW5wdXRPcHRpb25zPzogUGFydGlhbDxIVE1MSW5wdXRFbGVtZW50PlxyXG4pOiBbXHJcbiAgSFRNTERpdkVsZW1lbnQsXHJcbiAge1xyXG4gICAgc2V0VmFsdWVzOiAodmFsdWU6IFQpID0+IHZvaWQ7XHJcbiAgICBzZXRSZWFkb25seTogKHJlYWRvbmx5OiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgZ2V0VmFsdWVzOiAoKSA9PiBUO1xyXG4gIH1cclxuXSA9PiB7XHJcbiAgY29uc3QgaW5wdXRHcmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBpbnB1dEdyaWQuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0LWdyaWRcIjtcclxuXHJcbiAgY29uc3QgaXRlbUVsZW1lbnRzOiB7IGVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7IHZhbHVlOiBudW1iZXIgfVtdID0gW107XHJcbiAgY29uc3Qgc2V0VmFsdWVzID0gKG5ld1ZhbHVlczogVCkgPT5cclxuICAgIGl0ZW1FbGVtZW50cy5mb3JFYWNoKChpZSwgaW5kZXgpID0+IHtcclxuICAgICAgaWUudmFsdWUgPSBuZXdWYWx1ZXNbaW5kZXhdO1xyXG4gICAgICBpZS5lbGVtZW50LnZhbHVlID0gaWUudmFsdWUudG9TdHJpbmcoKTtcclxuICAgIH0pO1xyXG4gIGNvbnN0IGdldFZhbHVlcyA9ICgpID0+IGl0ZW1FbGVtZW50cy5tYXAoKGllKSA9PiBpZS52YWx1ZSkgYXMgVDtcclxuICBjb25zdCBzZXRSZWFkb25seSA9IChyZWFkb25seTogYm9vbGVhbikgPT5cclxuICAgIGl0ZW1FbGVtZW50cy5mb3JFYWNoKChpZSkgPT4gKGllLmVsZW1lbnQucmVhZE9ubHkgPSByZWFkb25seSkpO1xyXG5cclxuICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCByb3dzOyByb3crKykge1xyXG4gICAgY29uc3QgaW5wdXRSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgaW5wdXRSb3cuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0LXJvd1wiO1xyXG5cclxuICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IGNvbHVtbnM7IGNvbHVtbisrKSB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gcm93ICogY29sdW1ucyArIGNvbHVtbjtcclxuICAgICAgY29uc3QgdmFsdWUgPSBpbml0aWFsVmFsdWVbaW5kZXhdO1xyXG4gICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgY29uc3QgaXRlbUVsZW1lbnQgPSB7IGVsZW1lbnQ6IGlucHV0LCB2YWx1ZSB9O1xyXG4gICAgICBPYmplY3QuYXNzaWduKGlucHV0LCBpbnB1dE9wdGlvbnMpO1xyXG4gICAgICBpbnB1dC5jbGFzc05hbWUgPSBcImVkaXQtaW5wdXRcIjtcclxuICAgICAgaW5wdXQudHlwZSA9IFwibnVtYmVyXCI7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU/LnRvU3RyaW5nKCk7XHJcbiAgICAgIGlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgaXRlbUVsZW1lbnRzW2luZGV4XS52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgb25DaGFuZ2U/LihnZXRWYWx1ZXMoKSk7XHJcbiAgICAgIH07XHJcbiAgICAgIGl0ZW1FbGVtZW50cy5wdXNoKGl0ZW1FbGVtZW50KTtcclxuICAgICAgaW5wdXRSb3cuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlucHV0R3JpZC5hcHBlbmRDaGlsZChpbnB1dFJvdyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gW1xyXG4gICAgaW5wdXRHcmlkLFxyXG4gICAge1xyXG4gICAgICBzZXRWYWx1ZXMsXHJcbiAgICAgIGdldFZhbHVlcyxcclxuICAgICAgc2V0UmVhZG9ubHksXHJcbiAgICB9LFxyXG4gIF07XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBNYXRyaXgzID0gW1xyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyXHJcbl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVNYXRyaXgzID0gKG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBNYXRyaXgzKSA9PiB2b2lkKSA9PlxyXG4gIGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8TWF0cml4Mz4oWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLCBvbkNoYW5nZSwgMywgMyk7XHJcblxyXG5leHBvcnQgdHlwZSBWZWN0b3IyID0gW251bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVZlY3RvcjIgPSAob25DaGFuZ2U/OiAobmV3VmFsdWU6IFZlY3RvcjIpID0+IHZvaWQpID0+XHJcbiAgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxWZWN0b3IyPihbMCwgMF0sIG9uQ2hhbmdlLCAxLCAyKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZlY3RvcjMgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVWZWN0b3IzID0gKG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBWZWN0b3IzKSA9PiB2b2lkKSA9PlxyXG4gIGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8VmVjdG9yMz4oWzAsIDAsIDBdLCBvbkNoYW5nZSwgMSwgMyk7XHJcblxyXG5leHBvcnQgdHlwZSBWZWN0b3I0ID0gW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVWZWN0b3I0ID0gKG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBWZWN0b3I0KSA9PiB2b2lkKSA9PlxyXG4gIGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8VmVjdG9yND4oWzAsIDAsIDAsIDBdLCBvbkNoYW5nZSwgMSwgNCk7XHJcbiIsImV4cG9ydCBjb25zdCBjcmVhdGVEaXYgPSAoY2xhc3NOYW1lOiBzdHJpbmcsIGNoaWxkcmVuPzogSFRNTEVsZW1lbnRbXSkgPT4ge1xyXG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICBjaGlsZHJlbj8uZm9yRWFjaCgoYykgPT4gZGl2LmFwcGVuZENoaWxkKGMpKTtcclxuICByZXR1cm4gZGl2O1xyXG59O1xyXG4iLCJpbXBvcnQgeyBjcmVhdGVEaXYgfSBmcm9tIFwiLi9jb21tb25cIjtcclxuaW1wb3J0IHsgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dCB9IGZyb20gXCIuL2VkaXRWZWN0b3IzXCI7XHJcblxyXG5jb25zdCBjb2xvcklucHV0UHJvcHMgPSB7XHJcbiAgbWluOiBcIjBcIixcclxuICBtYXg6IFwiMVwiLFxyXG4gIHN0ZXA6IFwiMC4xXCIsXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBDb2xvcjQgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbG9yNCA9IChcclxuICBvbkNoYW5nZT86IChuZXdWYWx1ZTogQ29sb3I0KSA9PiB2b2lkXHJcbik6IFtcclxuICBIVE1MRGl2RWxlbWVudCxcclxuICB7XHJcbiAgICBzZXRWYWx1ZXM6ICh2YWx1ZTogQ29sb3I0KSA9PiB2b2lkO1xyXG4gICAgc2V0UmVhZG9ubHk6IChyZWFkb25seTogYm9vbGVhbikgPT4gdm9pZDtcclxuICAgIGdldFZhbHVlczogKCkgPT4gQ29sb3I0O1xyXG4gIH1cclxuXSA9PiB7XHJcbiAgY29uc3QgaW5pdGlhbFZhbHVlID0gWzAuNSwgMC41LCAwLjUsIDFdIGFzIENvbG9yNDtcclxuICBjb25zdCBjb2xvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgY29sb3JEaXYuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0LWNvbG9yXCI7XHJcbiAgY29uc3Qgc2V0Q29sb3IgPSAoY29sb3I6IENvbG9yNCkgPT4ge1xyXG4gICAgY29sb3JEaXYuc3R5bGUuYmFja2dyb3VuZCA9IGByZ2IoJHtjb2xvclswXSAqIDI1NX0sJHtjb2xvclsxXSAqIDI1NX0sJHtcclxuICAgICAgY29sb3JbMl0gKiAyNTVcclxuICAgIH0sJHtjb2xvclszXX0pYDtcclxuICB9O1xyXG5cclxuICBzZXRDb2xvcihpbml0aWFsVmFsdWUpO1xyXG5cclxuICBjb25zdCBvbkNoYW5nZUludGVybmFsID0gKGNvbG9yOiBDb2xvcjQpID0+IHtcclxuICAgIHNldENvbG9yKGNvbG9yKTtcclxuICAgIG9uQ2hhbmdlPy4oY29sb3IpO1xyXG4gIH07XHJcbiAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlRGl2KFwicm93LXdpdGgtZ2FwXCIpO1xyXG4gIGNvbnN0IFtlbGVtZW50LCBjb250cm9sbGVyXSA9IGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8Q29sb3I0PihcclxuICAgIGluaXRpYWxWYWx1ZSxcclxuICAgIG9uQ2hhbmdlSW50ZXJuYWwsXHJcbiAgICAxLFxyXG4gICAgNCxcclxuICAgIGNvbG9ySW5wdXRQcm9wc1xyXG4gICk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjb2xvckRpdik7XHJcbiAgcmV0dXJuIFtcclxuICAgIGNvbnRhaW5lcixcclxuICAgIHtcclxuICAgICAgLi4uY29udHJvbGxlcixcclxuICAgICAgc2V0VmFsdWVzOiAodmFsdWU6IENvbG9yNCkgPT4ge1xyXG4gICAgICAgIGNvbnRyb2xsZXIuc2V0VmFsdWVzKHZhbHVlKTtcclxuICAgICAgICBzZXRDb2xvcih2YWx1ZSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIF07XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBDb2xvcjMgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVDb2xvcjMgPSAoXHJcbiAgb25DaGFuZ2U/OiAobmV3VmFsdWU6IENvbG9yMykgPT4gdm9pZFxyXG4pOiBbXHJcbiAgSFRNTERpdkVsZW1lbnQsXHJcbiAge1xyXG4gICAgc2V0VmFsdWVzOiAodmFsdWU6IENvbG9yMykgPT4gdm9pZDtcclxuICAgIHNldFJlYWRvbmx5OiAocmVhZG9ubHk6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBnZXRWYWx1ZXM6ICgpID0+IENvbG9yMztcclxuICB9XHJcbl0gPT4ge1xyXG4gIGNvbnN0IGluaXRpYWxWYWx1ZSA9IFswLjUsIDAuNSwgMC41XSBhcyBDb2xvcjM7XHJcbiAgY29uc3QgY29sb3JEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGNvbG9yRGl2LmNsYXNzTmFtZSA9IFwiZWRpdC1pbnB1dC1jb2xvclwiO1xyXG4gIGNvbnN0IHNldENvbG9yID0gKGNvbG9yOiBDb2xvcjMpID0+IHtcclxuICAgIGNvbG9yRGl2LnN0eWxlLmJhY2tncm91bmQgPSBgcmdiKCR7Y29sb3JbMF0gKiAyNTV9LCR7Y29sb3JbMV0gKiAyNTV9LCR7XHJcbiAgICAgIGNvbG9yWzJdICogMjU1XHJcbiAgICB9LDEpYDtcclxuICB9O1xyXG5cclxuICBzZXRDb2xvcihpbml0aWFsVmFsdWUpO1xyXG5cclxuICBjb25zdCBvbkNoYW5nZUludGVybmFsID0gKGNvbG9yOiBDb2xvcjMpID0+IHtcclxuICAgIHNldENvbG9yKGNvbG9yKTtcclxuICAgIG9uQ2hhbmdlPy4oY29sb3IpO1xyXG4gIH07XHJcbiAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlRGl2KFwicm93LXdpdGgtZ2FwXCIpO1xyXG4gIGNvbnN0IFtlbGVtZW50LCBjb250cm9sbGVyXSA9IGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8Q29sb3IzPihcclxuICAgIGluaXRpYWxWYWx1ZSxcclxuICAgIG9uQ2hhbmdlSW50ZXJuYWwsXHJcbiAgICAxLFxyXG4gICAgMyxcclxuICAgIGNvbG9ySW5wdXRQcm9wc1xyXG4gICk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjb2xvckRpdik7XHJcbiAgcmV0dXJuIFtcclxuICAgIGNvbnRhaW5lcixcclxuICAgIHtcclxuICAgICAgLi4uY29udHJvbGxlcixcclxuICAgICAgc2V0VmFsdWVzOiAodmFsdWU6IENvbG9yMykgPT4ge1xyXG4gICAgICAgIGNvbnRyb2xsZXIuc2V0VmFsdWVzKHZhbHVlKTtcclxuICAgICAgICBzZXRDb2xvcih2YWx1ZSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIF07XHJcbn07XHJcbiIsImltcG9ydCB7XHJcbiAgY3JlYXRlVmVjdG9yMixcclxuICBjcmVhdGVWZWN0b3IzLFxyXG4gIGNyZWF0ZVZlY3RvcjQsXHJcbiAgVmVjdG9yMixcclxuICBWZWN0b3IzLFxyXG4gIFZlY3RvcjQsXHJcbn0gZnJvbSBcIi4vY29tcG9uZW50cy9lZGl0VmVjdG9yM1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVEaXYgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbW1vblwiO1xyXG5pbXBvcnQgeyBjcmVhdGVEcm9wZG93biB9IGZyb20gXCIuL2NvbXBvbmVudHMvZHJvcGRvd25cIjtcclxuaW1wb3J0IHsgY3JlYXRlQ29sb3IzLCBjcmVhdGVDb2xvcjQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2VkaXRDb2xvclwiO1xyXG5pbXBvcnQgeyBVbmlmb3JtSW5mbywgVW5pZm9ybVR5cGUgfSBmcm9tIFwiLi91bmlmb3JtXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlVW5pZm9ybUNvbXBvbmVudCA9IChcclxuICB1bmlmb3JtSW5mbzogVW5pZm9ybUluZm8sXHJcbiAgcmVuZGVyOiAoKSA9PiB2b2lkXHJcbikgPT4ge1xyXG4gIHN3aXRjaCAodW5pZm9ybUluZm8udHlwZSkge1xyXG4gICAgY2FzZSBVbmlmb3JtVHlwZS5GTE9BVF9WRUMyOlxyXG4gICAgICByZXR1cm4gY3JlYXRlVW5pZm9ybUZvclZlYzIoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgdW5pZm9ybUluZm8udXBkYXRlKHZhbHVlKTtcclxuICAgICAgICByZW5kZXIoKTtcclxuICAgICAgfSk7XHJcbiAgICBjYXNlIFVuaWZvcm1UeXBlLkZMT0FUX1ZFQzM6XHJcbiAgICAgIHJldHVybiBjcmVhdGVVbmlmb3JtRm9yVmVjMygodmFsdWUpID0+IHtcclxuICAgICAgICB1bmlmb3JtSW5mby51cGRhdGUodmFsdWUpO1xyXG4gICAgICAgIHJlbmRlcigpO1xyXG4gICAgICB9KTtcclxuICAgIGNhc2UgVW5pZm9ybVR5cGUuRkxPQVRfVkVDNDpcclxuICAgICAgcmV0dXJuIGNyZWF0ZVVuaWZvcm1Gb3JWZWM0KCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgIHVuaWZvcm1JbmZvLnVwZGF0ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIGNyZWF0ZVVuaWZvcm1Ob3RTdXBwb3J0ZWQoKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlVW5pZm9ybU5vdFN1cHBvcnRlZCA9ICgpID0+IHtcclxuICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdi5jbGFzc05hbWUgPSBcInVuc3VwcG9ydGVkLWVycm9yXCI7XHJcbiAgZGl2LmlubmVyVGV4dCA9IFwiTm90IHN1cHBvcnRlZCB1bmlmb3JtXCI7XHJcbiAgcmV0dXJuIGRpdjtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVVbmlmb3JtU2VsZWN0aW9uID0gKGVsZW1lbnRzOiB7XHJcbiAgW2tleTogc3RyaW5nXTogeyBkaXNwbGF5OiBzdHJpbmc7IGVsZW1lbnQ6IEhUTUxFbGVtZW50IH07XHJcbn0pID0+IHtcclxuICBjb25zdCBbb3B0aW9uc0VsZW1lbnQsIG9wdGlvbnNDb250cm9sbGVyXSA9IGNyZWF0ZURyb3Bkb3duKFxyXG4gICAgKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKCFpdGVtKSByZXR1cm47XHJcblxyXG4gICAgICBPYmplY3QudmFsdWVzKGVsZW1lbnRzKS5mb3JFYWNoKChvZSkgPT5cclxuICAgICAgICBvZS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGVsZW1lbnRzW2l0ZW0uaWRdLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICAgIH0sXHJcbiAgICBcIlwiLFxyXG4gICAgeyBlbXB0eUl0ZW06IGZhbHNlIH1cclxuICApO1xyXG4gIG9wdGlvbnNDb250cm9sbGVyLnNldEl0ZW1zKFxyXG4gICAgT2JqZWN0LmVudHJpZXMoZWxlbWVudHMpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xyXG4gICAgICBpZDoga2V5LFxyXG4gICAgICBkaXNwbGF5OiB2YWx1ZS5kaXNwbGF5LFxyXG4gICAgfSkpXHJcbiAgKTtcclxuICBvcHRpb25zQ29udHJvbGxlci5zZXRTZWxlY3RlZEl0ZW1CeUlkKFwiY3VzdG9tXCIpO1xyXG4gIHJldHVybiBvcHRpb25zRWxlbWVudDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVVbmlmb3JtRm9yVmVjMiA9ICh1cGRhdGU6ICh2YWx1ZTogVmVjdG9yMikgPT4gdm9pZCkgPT4ge1xyXG4gIGNvbnN0IFtjdXN0b21FbGVtZW50LCBjdXN0b21Db250cm9sbGVyXSA9IGNyZWF0ZVZlY3RvcjIodXBkYXRlKTtcclxuICBjdXN0b21Db250cm9sbGVyLnNldFZhbHVlcyhbMCwgMF0pO1xyXG4gIHJldHVybiBjdXN0b21FbGVtZW50O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVuaWZvcm1Gb3JWZWMzID0gKHVwZGF0ZTogKHZhbHVlOiBWZWN0b3IzKSA9PiB2b2lkKSA9PiB7XHJcbiAgY29uc3QgW2N1c3RvbUVsZW1lbnQsIGN1c3RvbUNvbnRyb2xsZXJdID0gY3JlYXRlVmVjdG9yMyh1cGRhdGUpO1xyXG4gIGN1c3RvbUNvbnRyb2xsZXIuc2V0VmFsdWVzKFswLCAwLCAwXSk7XHJcblxyXG4gIGNvbnN0IFtjb2xvckVsZW1lbnQsIGNvbG9yQ29udHJvbGxlcl0gPSBjcmVhdGVDb2xvcjModXBkYXRlKTtcclxuICBjb2xvckNvbnRyb2xsZXIuc2V0VmFsdWVzKFsxLCAwLCAwXSk7XHJcblxyXG4gIGNvbnN0IG9wdGlvbnNFbGVtZW50ID0gY3JlYXRlVW5pZm9ybVNlbGVjdGlvbih7XHJcbiAgICBjdXN0b206IHtcclxuICAgICAgZGlzcGxheTogXCJDdXN0b21cIixcclxuICAgICAgZWxlbWVudDogY3VzdG9tRWxlbWVudCxcclxuICAgIH0sXHJcbiAgICBjb2xvcjoge1xyXG4gICAgICBkaXNwbGF5OiBcIkNvbG9yXCIsXHJcbiAgICAgIGVsZW1lbnQ6IGNvbG9yRWxlbWVudCxcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBjcmVhdGVEaXYoXCJjb2x1bW4td2l0aC1nYXBcIiwgW1xyXG4gICAgb3B0aW9uc0VsZW1lbnQsXHJcbiAgICBjdXN0b21FbGVtZW50LFxyXG4gICAgY29sb3JFbGVtZW50LFxyXG4gIF0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVuaWZvcm1Gb3JWZWM0ID0gKHVwZGF0ZTogKHZhbHVlOiBWZWN0b3I0KSA9PiB2b2lkKSA9PiB7XHJcbiAgY29uc3QgW2N1c3RvbUVsZW1lbnQsIGN1c3RvbUNvbnRyb2xsZXJdID0gY3JlYXRlVmVjdG9yNCh1cGRhdGUpO1xyXG4gIGN1c3RvbUNvbnRyb2xsZXIuc2V0VmFsdWVzKFswLCAwLCAwLCAwXSk7XHJcblxyXG4gIGNvbnN0IFtjb2xvckVsZW1lbnQsIGNvbG9yQ29udHJvbGxlcl0gPSBjcmVhdGVDb2xvcjQodXBkYXRlKTtcclxuICBjb2xvckNvbnRyb2xsZXIuc2V0VmFsdWVzKFsxLCAwLCAwLCAxXSk7XHJcblxyXG4gIGNvbnN0IG9wdGlvbnNFbGVtZW50ID0gY3JlYXRlVW5pZm9ybVNlbGVjdGlvbih7XHJcbiAgICBjdXN0b206IHtcclxuICAgICAgZGlzcGxheTogXCJDdXN0b21cIixcclxuICAgICAgZWxlbWVudDogY3VzdG9tRWxlbWVudCxcclxuICAgIH0sXHJcbiAgICBjb2xvcjoge1xyXG4gICAgICBkaXNwbGF5OiBcIkNvbG9yXCIsXHJcbiAgICAgIGVsZW1lbnQ6IGNvbG9yRWxlbWVudCxcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBjcmVhdGVEaXYoXCJjb2x1bW4td2l0aC1nYXBcIiwgW1xyXG4gICAgb3B0aW9uc0VsZW1lbnQsXHJcbiAgICBjdXN0b21FbGVtZW50LFxyXG4gICAgY29sb3JFbGVtZW50LFxyXG4gIF0pO1xyXG59O1xyXG4iLCJleHBvcnQgY2xhc3MgQ29tcG9zaXRlS2V5TWFwPFRLZXksIFRWYWx1ZT4ge1xyXG4gIHByaXZhdGUgbWFwID0gbmV3IE1hcDxzdHJpbmcsIFRWYWx1ZT4oKTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBrZXlTZWxlY3RvcjogKGNvbXBvc2l0ZUtleTogVEtleSkgPT4gc3RyaW5nKSB7fVxyXG5cclxuICBnZXQoa2V5OiBUS2V5KSB7XHJcbiAgICByZXR1cm4gdGhpcy5tYXAuZ2V0KHRoaXMua2V5U2VsZWN0b3Ioa2V5KSk7XHJcbiAgfVxyXG5cclxuICBzZXQoa2V5OiBUS2V5LCB2YWx1ZTogVFZhbHVlKSB7XHJcbiAgICB0aGlzLm1hcC5zZXQodGhpcy5rZXlTZWxlY3RvcihrZXkpLCB2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMubWFwLmNsZWFyKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IHdpdGhMYWJlbCB9IGZyb20gXCIuL2NvbXBvbmVudHMvd3JhcHBlcnNcIjtcclxuaW1wb3J0IHsgY3JlYXRlVW5pZm9ybUNvbXBvbmVudCB9IGZyb20gXCIuL3VuaWZvcm1Db21wb25lbnRcIjtcclxuaW1wb3J0IHsgQ29tcG9zaXRlS2V5TWFwIH0gZnJvbSBcIi4vY29tcG9zaXRlS2V5TWFwXCI7XHJcbmltcG9ydCB7IFNoYWRlckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jcmVhdGVXZWJHTENhbnZhc1wiO1xyXG5pbXBvcnQgeyBVbmlmb3JtVHlwZSB9IGZyb20gXCIuL3VuaWZvcm1cIjtcclxuXHJcbmNvbnN0IHVuaWZvcm1zQ2FjaGUgPSBuZXcgQ29tcG9zaXRlS2V5TWFwPFxyXG4gIHsgbmFtZTogc3RyaW5nOyB0eXBlOiBVbmlmb3JtVHlwZSB9LFxyXG4gIEhUTUxFbGVtZW50XHJcbj4oKGtleSkgPT4gYCR7a2V5Lm5hbWV9OyR7a2V5LnR5cGV9YCk7XHJcblxyXG5leHBvcnQgY29uc3QgYXBwZW5kV2l0aFNoYWRlck9wdGlvbnMgPSAoXHJcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXHJcbiAgc2hhZGVyQ29udHJvbGxlcjogU2hhZGVyQ29udHJvbGxlclxyXG4pID0+IHtcclxuICBjb25zb2xlLmxvZyhcInVwZGF0aW5nIHNoYWRlciBvcHRpb25zXCIpO1xyXG5cclxuICBjb25zdCB1bmlmb3JtRWxlbWVudHMgPSBzaGFkZXJDb250cm9sbGVyLnVuaWZvcm1zLm1hcCgodW5pZm9ybSkgPT4ge1xyXG4gICAgY29uc3QgY29tcG9uZW50RnJvbUNhY2hlID0gdW5pZm9ybXNDYWNoZS5nZXQoe1xyXG4gICAgICAuLi51bmlmb3JtLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGNvbXBvbmVudEZyb21DYWNoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImNvbXBvbmVudCBmb3VuZFwiLCB1bmlmb3JtKTtcclxuXHJcbiAgICAgIHJldHVybiBjb21wb25lbnRGcm9tQ2FjaGU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImNyYXRpbmcgbmV3IGNvbXBcIik7XHJcblxyXG4gICAgICBjb25zdCBjb21wb25lbnQgPSB3aXRoTGFiZWwoXHJcbiAgICAgICAgY3JlYXRlVW5pZm9ybUNvbXBvbmVudCh1bmlmb3JtLCBzaGFkZXJDb250cm9sbGVyLnJlbmRlciksXHJcbiAgICAgICAgXCJcIixcclxuICAgICAgICB1bmlmb3JtLm5hbWVcclxuICAgICAgKTtcclxuICAgICAgdW5pZm9ybXNDYWNoZS5zZXQoeyAuLi51bmlmb3JtIH0sIGNvbXBvbmVudCk7XHJcbiAgICAgIHJldHVybiBjb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHVuaWZvcm1FbGVtZW50cy5mb3JFYWNoKChlKSA9PiBlbGVtZW50LmFwcGVuZENoaWxkKGUpKTtcclxuXHJcbiAgLy8gZWxlbWVudC5hcHBlbmRDaGlsZCh3aXRoTGFiZWwoY3JlYXRlQ29sb3I0KClbMF0sIFwiXCIsIFwidV9jb2xvclwiKSk7XHJcbiAgLy8gZWxlbWVudC5hcHBlbmRDaGlsZCh3aXRoTGFiZWwoY3JlYXRlVmVjdG9yNCgpWzBdLCBcIlwiLCBcInVfZGlmZnVzZVwiKSk7XHJcbiAgLy8gY29uc3QgW21hdDNlbCwgbWF0M2Nvbl0gPSBjcmVhdGVNYXRyaXgzKChuZXd2YWwpID0+IGNvbnNvbGUubG9nKG5ld3ZhbCkpO1xyXG4gIC8vIGNvbnN0IFtlZGlmZiwgY2RpZmZdID0gY3JlYXRlRHJvcGRvd24oXHJcbiAgLy8gICAoc2VsKSA9PiB7XHJcbiAgLy8gICAgIGlmICghc2VsKSByZXR1cm47XHJcbiAgLy8gICAgIGlmIChzZWwuaWQgPT09IFwiMFwiKSB7XHJcbiAgLy8gICAgICAgbWF0M2Nvbi5zZXRSZWFkb25seShmYWxzZSk7XHJcbiAgLy8gICAgIH1cclxuICAvLyAgICAgaWYgKHNlbC5pZCA9PT0gXCIxXCIpIHtcclxuICAvLyAgICAgICBtYXQzY29uLnNldFJlYWRvbmx5KHRydWUpO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICB9LFxyXG4gIC8vICAgXCJcIixcclxuICAvLyAgIHsgZW1wdHlJdGVtOiBmYWxzZSB9XHJcbiAgLy8gKTtcclxuICAvLyBjZGlmZi5zZXRJdGVtcyhbXHJcbiAgLy8gICB7IGlkOiBcIjBcIiwgZGlzcGxheTogXCJDb2xvciBwaWNrZXJcIiB9LFxyXG4gIC8vICAgeyBpZDogXCIxXCIsIGRpc3BsYXk6IFwiQ3VzdG9tMlwiIH0sXHJcbiAgLy8gXSk7XHJcbiAgLy8gY2RpZmYuc2V0U2VsZWN0ZWRJdGVtQnlJZChcIjBcIik7XHJcbiAgLy8gZWxlbWVudC5hcHBlbmRDaGlsZChcclxuICAvLyAgIHdpdGhMYWJlbChcclxuICAvLyAgICAgY3JlYXRlRGl2KFwiY29sdW1uLXdpdGgtZ2FwXCIsIFtlZGlmZiwgbWF0M2VsXSksXHJcbiAgLy8gICAgIFwiXCIsXHJcbiAgLy8gICAgIFwiZG9icmUgZGlmZnVzZVwiXHJcbiAgLy8gICApXHJcbiAgLy8gKTtcclxuICAvLyBlbGVtZW50LmFwcGVuZENoaWxkKFxyXG4gIC8vICAgd2l0aExhYmVsKFxyXG4gIC8vICAgICBjcmVhdGVEaXYoXCJjb2x1bW4td2l0aC1nYXBcIiwgW1xyXG4gIC8vICAgICAgIGNyZWF0ZURyb3Bkb3duKChuZXdGcmFnbWVudCkgPT4ge30pWzBdLFxyXG4gIC8vICAgICAgIGNyZWF0ZU1hdHJpeDMoKG5ld3ZhbCkgPT4gY29uc29sZS5sb2cobmV3dmFsKSlbMF0sXHJcbiAgLy8gICAgIF0pLFxyXG4gIC8vICAgICBcIlwiLFxyXG4gIC8vICAgICBcInVfZGlmZnVzZTJcIlxyXG4gIC8vICAgKVxyXG4gIC8vICk7XHJcbiAgLy8gZWxlbWVudC5hcHBlbmRDaGlsZChcclxuICAvLyAgIHdpdGhMYWJlbChcclxuICAvLyAgICAgY3JlYXRlRGl2KFwiY29sdW1uLXdpdGgtZ2FwXCIsIFtcclxuICAvLyAgICAgICBjcmVhdGVEcm9wZG93bigobmV3RnJhZ21lbnQpID0+IHt9KVswXSxcclxuICAvLyAgICAgICBjcmVhdGVNYXRyaXgzKChuZXd2YWwpID0+IGNvbnNvbGUubG9nKG5ld3ZhbCkpWzBdLFxyXG4gIC8vICAgICBdKSxcclxuICAvLyAgICAgXCJcIixcclxuICAvLyAgICAgXCJ1X2RpZmZ1c2UyXCJcclxuICAvLyAgIClcclxuICAvLyApO1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3QgY29tcGlsZVNoYWRlciA9IChcclxuICByZW5kZXJpbmdDb250ZXh0OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXHJcbiAgdHlwZTogR0xlbnVtLFxyXG4gIHNvdXJjZTogc3RyaW5nXHJcbik6IFdlYkdMU2hhZGVyIHwgeyBlcnJvcjogc3RyaW5nIH0gPT4ge1xyXG4gIGNvbnN0IHNoYWRlciA9IHJlbmRlcmluZ0NvbnRleHQuY3JlYXRlU2hhZGVyKHR5cGUpO1xyXG4gIHJlbmRlcmluZ0NvbnRleHQuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcclxuICByZW5kZXJpbmdDb250ZXh0LmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gcmVuZGVyaW5nQ29udGV4dC5nZXRTaGFkZXJQYXJhbWV0ZXIoXHJcbiAgICBzaGFkZXIsXHJcbiAgICByZW5kZXJpbmdDb250ZXh0LkNPTVBJTEVfU1RBVFVTXHJcbiAgKTtcclxuXHJcbiAgaWYgKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIHNoYWRlcjtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgZXJyb3IgPSByZW5kZXJpbmdDb250ZXh0LmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcclxuICAgIHJlbmRlcmluZ0NvbnRleHQuZGVsZXRlU2hhZGVyKHNoYWRlcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBlcnJvcixcclxuICAgIH07XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVByb2dyYW0gPSAoXHJcbiAgcmVuZGVyaW5nQ29udGV4dDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LFxyXG4gIHZlcnRleFNoYWRlcjogV2ViR0xTaGFkZXIsXHJcbiAgZnJhZ21lbnRTaGFkZXI6IFdlYkdMU2hhZGVyXHJcbikgPT4ge1xyXG4gIGNvbnN0IHByb2dyYW0gPSByZW5kZXJpbmdDb250ZXh0LmNyZWF0ZVByb2dyYW0oKTtcclxuICByZW5kZXJpbmdDb250ZXh0LmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xyXG4gIHJlbmRlcmluZ0NvbnRleHQuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcclxuICByZW5kZXJpbmdDb250ZXh0LmxpbmtQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSByZW5kZXJpbmdDb250ZXh0LmdldFByb2dyYW1QYXJhbWV0ZXIoXHJcbiAgICBwcm9ncmFtLFxyXG4gICAgcmVuZGVyaW5nQ29udGV4dC5MSU5LX1NUQVRVU1xyXG4gICk7XHJcblxyXG4gIGlmIChyZXN1bHQpIHtcclxuICAgIHJldHVybiBwcm9ncmFtO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImNvcyBuaWUgaGFsb1wiKTtcclxuXHJcbiAgICByZW5kZXJpbmdDb250ZXh0LmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICBgQ3JlYXRpbmcgcHJvZ3JhbSBmYWlsZWQ6ICR7cmVuZGVyaW5nQ29udGV4dC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKX1gXHJcbiAgICApO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBFYXN5R0xBdHRyaWJ1dGVCdWZmZXIge31cclxuXHJcbmV4cG9ydCBjbGFzcyBFYXN5R0xVbmlmb3JtIHt9XHJcblxyXG5leHBvcnQgY2xhc3MgRWFzeUdMUHJvZ3JhbSB7fVxyXG4iLCJpbXBvcnQgeyBoYXNQcm9wZXJ0eSwgcmVtb3ZlTGFzdCB9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBVbmlmb3JtSW5mbyB9IGZyb20gXCIuL3VuaWZvcm1cIjtcclxuaW1wb3J0IHsgY29tcGlsZVNoYWRlciwgY3JlYXRlUHJvZ3JhbSB9IGZyb20gXCIuL3dlYmdsX3V0aWxzL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBBdHRyaWJ1dGVCdWZmZXJJbmZvID0ge307XHJcblxyXG5leHBvcnQgdHlwZSBDb21waWxlRXJyb3JzID0gW1xyXG4gIHZlcnRleFNoYWRlckVycm9yczogc3RyaW5nLFxyXG4gIGZyYWdtZW50U2hhZGVyRXJyb3JzOiBzdHJpbmdcclxuXTtcclxuXHJcbmV4cG9ydCB0eXBlIFNoYWRlckNvbnRyb2xsZXIgPSB7XHJcbiAgdW5pZm9ybXM6IFVuaWZvcm1JbmZvW107XHJcbiAgcmVuZGVyOiAoKSA9PiB2b2lkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlVW5pZm9ybUluZm9zID0gKFxyXG4gIGNvbnRleHQ6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCxcclxuICBwcm9ncmFtOiBXZWJHTFByb2dyYW1cclxuKTogVW5pZm9ybUluZm9bXSA9PiB7XHJcbiAgY29uc3QgbnVtVW5pZm9ybXMgPSBjb250ZXh0LmdldFByb2dyYW1QYXJhbWV0ZXIoXHJcbiAgICBwcm9ncmFtLFxyXG4gICAgY29udGV4dC5BQ1RJVkVfVU5JRk9STVNcclxuICApO1xyXG4gIGNvbnN0IHJlc3VsdDogVW5pZm9ybUluZm9bXSA9IFtdO1xyXG4gIGNvbnNvbGUubG9nKFwiZ2V0dGluZyB1bmlmb3Jtc1wiLCBudW1Vbmlmb3Jtcyk7XHJcbiAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1zOyArK2lpKSB7XHJcbiAgICAvL2NvbnN0IHVuaWZyb20xID0gY29udGV4dC5nZXRVbmlmb3JtKHByb2dyYW0sIGlpKTtcclxuICAgIGNvbnN0IHVuaWZvcm1JbmZvID0gY29udGV4dC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0sIGlpKTtcclxuICAgIC8vIGlmIChpc0J1aWx0SW4odW5pZm9ybUluZm8pKSB7XHJcbiAgICAvLyAgICAgY29udGludWU7XHJcbiAgICAvLyB9XHJcbiAgICBsZXQgbmFtZSA9IHVuaWZvcm1JbmZvLm5hbWU7XHJcbiAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgIG5hbWU6IHVuaWZvcm1JbmZvLm5hbWUsXHJcbiAgICAgIHR5cGU6IHVuaWZvcm1JbmZvLnR5cGUsXHJcbiAgICAgIHVwZGF0ZTogKCkgPT4gY29uc29sZS5sb2coXCJpIGR1cGFcIiksXHJcbiAgICB9KTtcclxuICB9XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVXZWJHTENhbnZhcyA9IChcclxuICBjbGFzc05hbWU6IHN0cmluZ1xyXG4pOiBbXHJcbiAgSFRNTENhbnZhc0VsZW1lbnQsXHJcbiAge1xyXG4gICAgY29tcGlsZVNoYWRlcnM6IChcclxuICAgICAgdmVydGV4U2hhZGVyQ29udGVudDogc3RyaW5nLFxyXG4gICAgICBmcmFnbWVudFNoYWRlckNvbnRlbnQ6IHN0cmluZ1xyXG4gICAgKSA9PiBDb21waWxlRXJyb3JzIHwgU2hhZGVyQ29udHJvbGxlcjtcclxuICB9XHJcbl0gPT4ge1xyXG4gIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgY2FudmFzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbFwiKTtcclxuICBpZiAoIWNvbnRleHQpIHtcclxuICAgIC8vdG9kbyBtb3ZlIHRvIGVycm9yc1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSB3ZWJnbCBjb250ZXh0XCIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY29tcGlsZVNoYWRlcnMgPSAoXHJcbiAgICB2ZXJ0ZXhTaGFkZXJDb250ZW50OiBzdHJpbmcsXHJcbiAgICBmcmFnbWVudFNoYWRlckNvbnRlbnQ6IHN0cmluZ1xyXG4gICkgPT4ge1xyXG4gICAgY29uc3QgdmVydGV4U2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICAgICAgY29udGV4dCxcclxuICAgICAgY29udGV4dC5WRVJURVhfU0hBREVSLFxyXG4gICAgICB2ZXJ0ZXhTaGFkZXJDb250ZW50XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICAgICAgY29udGV4dCxcclxuICAgICAgY29udGV4dC5GUkFHTUVOVF9TSEFERVIsXHJcbiAgICAgIGZyYWdtZW50U2hhZGVyQ29udGVudFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgdmVydGV4RXJyb3I6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIGlmIChoYXNQcm9wZXJ0eSh2ZXJ0ZXhTaGFkZXIsIFwiZXJyb3JcIikpIHtcclxuICAgICAgdmVydGV4RXJyb3IgPSByZW1vdmVMYXN0KHZlcnRleFNoYWRlci5lcnJvciwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGZyYWdtZW50RXJyb3I6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIGlmIChoYXNQcm9wZXJ0eShmcmFnbWVudFNoYWRlciwgXCJlcnJvclwiKSkge1xyXG4gICAgICBmcmFnbWVudEVycm9yID0gcmVtb3ZlTGFzdChmcmFnbWVudFNoYWRlci5lcnJvciwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZlcnRleEVycm9yIHx8IGZyYWdtZW50RXJyb3IpIHtcclxuICAgICAgLy90b2RvIGNsZWFudXBcclxuICAgICAgcmV0dXJuIFt2ZXJ0ZXhFcnJvciwgZnJhZ21lbnRFcnJvcl0gYXMgQ29tcGlsZUVycm9ycztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbShjb250ZXh0LCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKTtcclxuXHJcbiAgICAvL2NyZWF0ZUNvbnRyb2xsZXI5MFxyXG5cclxuICAgIC8vIGNvbnN0IG51bVVuaWZvcm1zID0gY29udGV4dC5nZXRQcm9ncmFtUGFyYW1ldGVyKFxyXG4gICAgLy8gICBwcm9ncmFtLFxyXG4gICAgLy8gICBjb250ZXh0LkFDVElWRV9VTklGT1JNU1xyXG4gICAgLy8gKTtcclxuICAgIC8vIGNvbnN0IHVuaWZvcm1TZXR0ZXJzID0ge307XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcImdldHRpbmcgdW5pZm9ybXNcIiwgbnVtVW5pZm9ybXMpO1xyXG5cclxuICAgIC8vIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1Vbmlmb3JtczsgKytpaSkge1xyXG4gICAgLy8gICBjb25zdCB1bmlmb3JtSW5mbyA9IGNvbnRleHQuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBpaSk7XHJcbiAgICAvLyAgIC8vIGlmIChpc0J1aWx0SW4odW5pZm9ybUluZm8pKSB7XHJcbiAgICAvLyAgIC8vICAgICBjb250aW51ZTtcclxuICAgIC8vICAgLy8gfVxyXG4gICAgLy8gICBsZXQgbmFtZSA9IHVuaWZvcm1JbmZvLm5hbWU7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKFwidW5pZm9ybTpcIiwgdW5pZm9ybUluZm8pO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vcHJvZ3JhbS5cclxuICAgIC8vZ2VuZXJhdGUgcHJvZ3JhbSBpbmZvXHJcblxyXG4gICAgY29uc3QgdW5pZm9ybXMgPSBnZW5lcmF0ZVVuaWZvcm1JbmZvcyhjb250ZXh0LCBwcm9ncmFtKTtcclxuICAgIC8vIHVuaWZvcm1zLnB1c2goe1xyXG4gICAgLy8gICBuYW1lOiBcInVuaWZvcm0xXCIsXHJcbiAgICAvLyAgIHR5cGU6IFwidmVjM1wiLFxyXG4gICAgLy8gICB1cGRhdGU6ICgpID0+IHt9LFxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLy8gdW5pZm9ybXMucHVzaCh7XHJcbiAgICAvLyAgIG5hbWU6IFwidW5pZm9ybTJcIixcclxuICAgIC8vICAgdHlwZTogXCJ2ZWMyXCIsXHJcbiAgICAvLyAgIHVwZGF0ZTogKCkgPT4ge30sXHJcbiAgICAvLyB9KTtcclxuICAgIC8vZnJhZ21lbnQ6IHsgZXJyb3JzOiB9XHJcbiAgICAvL2ZyYWdtZW50OiB7IGVycm9yczogfVxyXG5cclxuICAgIC8vZGVsZXRlIHNoYWRlcnNcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZW5kZXI6ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInJlbmRlcmluZ1wiKTtcclxuICAgICAgfSxcclxuICAgICAgdW5pZm9ybXMsXHJcbiAgICB9IGFzIFNoYWRlckNvbnRyb2xsZXI7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIFtcclxuICAgIGNhbnZhcyxcclxuICAgIHtcclxuICAgICAgY29tcGlsZVNoYWRlcnMsXHJcbiAgICB9LFxyXG4gIF07XHJcbn07XHJcbiIsImltcG9ydCB7IHRyYW5zbGF0aW9ucyB9IGZyb20gXCIuLy4uL3RyYW5zbGF0aW9uc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVEcm9wZG93biB9IGZyb20gXCIuL2NvbXBvbmVudHMvZHJvcGRvd25cIjtcclxuaW1wb3J0IHsgVW5zdWJzY3JpYmUsIFZzQ29kZUFwaVByb3h5IH0gZnJvbSBcIi4vY29tbXVuaWNhdGlvblByb3h5XCI7XHJcbmltcG9ydCB7IGNyZWF0ZVNlY3Rpb25UaXRsZSB9IGZyb20gXCIuL2NvbXBvbmVudHMvY3JlYXRlU2VjdGlvblRpdGxlXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUZBQnV0dG9uIGFzIGNyZWF0ZUJ1dHRvbiB9IGZyb20gXCIuL2NvbXBvbmVudHMvY3JlYXRlRkFCdXR0b25cIjtcclxuaW1wb3J0IHsgd2l0aExhYmVsIH0gZnJvbSBcIi4vY29tcG9uZW50cy93cmFwcGVyc1wiO1xyXG5pbXBvcnQgeyBhcHBlbmRXaXRoU2hhZGVyT3B0aW9ucyBhcyB1cGRhdGVTaGFkZXJPcHRpb25zIH0gZnJvbSBcIi4vc2hhZGVyT3B0aW9uc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVEaXYgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbW1vblwiO1xyXG5pbXBvcnQge1xyXG4gIENvbXBpbGVFcnJvcnMsXHJcbiAgY3JlYXRlV2ViR0xDYW52YXMsXHJcbiAgU2hhZGVyQ29udHJvbGxlcixcclxufSBmcm9tIFwiLi9jcmVhdGVXZWJHTENhbnZhc1wiO1xyXG5cclxuY29uc3QgY3JlYXRlVmlld2VyID0gYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IHZzY29kZUFwaSA9IG5ldyBWc0NvZGVBcGlQcm94eSgpO1xyXG4gIGNvbnN0IHZpZXdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlld2VyXCIpO1xyXG4gIGNvbnN0IHZpZXdlck9wdGlvbnMgPSBjcmVhdGVEaXYoXCJ2aWV3ZXItb3B0aW9uc1wiKTtcclxuICBjb25zdCBzaGFkZXJPcHRpb25zID0gY3JlYXRlRGl2KFwidmlld2VyLXNoYWRlci1vcHRpb25zXCIpO1xyXG4gIGNvbnN0IHNoYWRlckNvbXBpbGF0aW9uRXJyb3JzID0gY3JlYXRlRGl2KFwidmlld2VyLWNvbnRlbnQgc2hhZGVyLWVycm9yc1wiKTtcclxuICBjb25zdCBbd2ViR0xDYW52YXMsIHdlYkdMQ29udHJvbGxlcl0gPSBjcmVhdGVXZWJHTENhbnZhcyhcInZpZXdlci1jb250ZW50XCIpO1xyXG5cclxuICB2aWV3ZXIuYXBwZW5kQ2hpbGQod2ViR0xDYW52YXMpO1xyXG4gIHZpZXdlci5hcHBlbmRDaGlsZChzaGFkZXJDb21waWxhdGlvbkVycm9ycyk7XHJcbiAgdmlld2VyLmFwcGVuZENoaWxkKHZpZXdlck9wdGlvbnMpO1xyXG5cclxuICBjb25zdCBzaG93Q29udGVudCA9IChjb250ZW50OiBcImNhbnZhc1wiIHwgXCJlcnJvcnNcIiB8IFwibm9uZVwiKSA9PiB7XHJcbiAgICB3ZWJHTENhbnZhcy5zdHlsZS52aXNpYmlsaXR5ID1cclxuICAgICAgY29udGVudCA9PT0gXCJjYW52YXNcIiA/IFwidmlzaWJsZVwiIDogXCJjb2xsYXBzZVwiO1xyXG4gICAgc2hhZGVyQ29tcGlsYXRpb25FcnJvcnMuc3R5bGUudmlzaWJpbGl0eSA9XHJcbiAgICAgIGNvbnRlbnQgPT09IFwiZXJyb3JzXCIgPyBcInZpc2libGVcIiA6IFwiY29sbGFwc2VcIjtcclxuICB9O1xyXG5cclxuICBsZXQgc2VsZWN0ZWRWZXJ0ZXhGaWxlV2F0Y2hlclVuc3Vic2NyaWJlOiBVbnN1YnNjcmliZSB8IHVuZGVmaW5lZDtcclxuICBsZXQgc2VsZWN0ZWRGcmFnbWVudEZpbGVXYXRjaGVyVW5zdWJzY3JpYmU6IFVuc3Vic2NyaWJlIHwgdW5kZWZpbmVkO1xyXG4gIGxldCBzZWxlY3RlZFZlcnRleENvbnRlbnQ6IHN0cmluZyB8IG51bGw7XHJcbiAgbGV0IHNlbGVjdGVkRnJhZ21lbnRDb250ZW50OiBzdHJpbmcgfCBudWxsO1xyXG5cclxuICBjb25zdCBvblNoYWRlckNvbnRlbnRDaGFuZ2VkID0gKCkgPT4ge1xyXG4gICAgc2hhZGVyT3B0aW9ucy5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgIGlmIChzZWxlY3RlZEZyYWdtZW50Q29udGVudCAmJiBzZWxlY3RlZFZlcnRleENvbnRlbnQpIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gd2ViR0xDb250cm9sbGVyLmNvbXBpbGVTaGFkZXJzKFxyXG4gICAgICAgIHNlbGVjdGVkVmVydGV4Q29udGVudCxcclxuICAgICAgICBzZWxlY3RlZEZyYWdtZW50Q29udGVudFxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0KSkge1xyXG4gICAgICAgIHNob3dDb250ZW50KFwiZXJyb3JzXCIpO1xyXG4gICAgICAgIGNvbnN0IFtcclxuICAgICAgICAgIHZlcnRleFNoYWRlckVycm9ycyxcclxuICAgICAgICAgIGZyYWdtZW50U2hhZGVyRXJyb3JzLFxyXG4gICAgICAgIF0gPSByZXN1bHQgYXMgQ29tcGlsZUVycm9ycztcclxuXHJcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodmVydGV4U2hhZGVyRXJyb3JzKSB7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChcIlZFUlRFWCBTSEFERVI6XCIsIHZlcnRleFNoYWRlckVycm9ycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZnJhZ21lbnRTaGFkZXJFcnJvcnMpIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKFwiRlJBR01FTlQgU0hBREVSOlwiLCBmcmFnbWVudFNoYWRlckVycm9ycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzaGFkZXJDb21waWxhdGlvbkVycm9ycy5pbm5lclRleHQgPSBlcnJvcnMuam9pbihcIlxcclxcblwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzaG93Q29udGVudChcImNhbnZhc1wiKTtcclxuICAgICAgICB1cGRhdGVTaGFkZXJPcHRpb25zKHNoYWRlck9wdGlvbnMsIHJlc3VsdCBhcyBTaGFkZXJDb250cm9sbGVyKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0NvbnRlbnQoXCJub25lXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZpZXdlck9wdGlvbnMuYXBwZW5kQ2hpbGQoXHJcbiAgICBjcmVhdGVEaXYoXCJ2aWV3ZXItc2hhZGVycy10aXRsZVwiLCBbXHJcbiAgICAgIGNyZWF0ZVNlY3Rpb25UaXRsZSh0cmFuc2xhdGlvbnMuc2hhZGVycywgXCJcIikuZWxlbWVudCxcclxuICAgICAgY3JlYXRlQnV0dG9uKFwiU3luY1wiLCBcInZpZXdlci1yZWZyZXNoLWJ1dHRvblwiLCAoKSA9PiB7XHJcbiAgICAgICAgdnNjb2RlQXBpLmdldFNoYWRlckRvY3VtZW50cygpLnRoZW4oKHNkKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBmaWxlcyA9IHNkLm1hcCgoZikgPT4gKHtcclxuICAgICAgICAgICAgaWQ6IGYuZmlsZVBhdGgsXHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGYuZmlsZU5hbWUsXHJcbiAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgdmVydGV4RHJvcGRvd25Db250cm9sbGVyLnNldEl0ZW1zKGZpbGVzKTtcclxuICAgICAgICAgIGZyYWdtZW50RHJvcGRvd25Db250cm9sbGVyLnNldEl0ZW1zKGZpbGVzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSkuZWxlbWVudCxcclxuICAgIF0pXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgW3ZlcnRleERyb3Bkb3duRWxlbWVudCwgdmVydGV4RHJvcGRvd25Db250cm9sbGVyXSA9IGNyZWF0ZURyb3Bkb3duKFxyXG4gICAgYXN5bmMgKG5ld1ZlcnRleCkgPT4ge1xyXG4gICAgICBzZWxlY3RlZFZlcnRleEZpbGVXYXRjaGVyVW5zdWJzY3JpYmU/LigpO1xyXG5cclxuICAgICAgaWYgKG5ld1ZlcnRleCkge1xyXG4gICAgICAgIHNlbGVjdGVkVmVydGV4RmlsZVdhdGNoZXJVbnN1YnNjcmliZSA9IHZzY29kZUFwaS5zdWJzY3JpYmVUb0RvY3VtZW50U2F2ZShcclxuICAgICAgICAgIG5ld1ZlcnRleC5pZCxcclxuICAgICAgICAgIChuZXdDb250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkVmVydGV4Q29udGVudCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgICAgIG9uU2hhZGVyQ29udGVudENoYW5nZWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZWxlY3RlZFZlcnRleENvbnRlbnQgPSBuZXdWZXJ0ZXhcclxuICAgICAgICA/IGF3YWl0IHZzY29kZUFwaS5nZXREb2N1bWVudFRleHQobmV3VmVydGV4LmlkKVxyXG4gICAgICAgIDogXCJcIjtcclxuICAgICAgb25TaGFkZXJDb250ZW50Q2hhbmdlZCgpO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIHdpdGhMYWJlbChcclxuICAgICAgdmVydGV4RHJvcGRvd25FbGVtZW50LFxyXG4gICAgICBcInZpZXdlci12ZXJ0ZXgtc2hhZGVyLXNlbGVjdG9yXCIsXHJcbiAgICAgIFwiVmVydGV4IFNoYWRlclwiXHJcbiAgICApXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgW2ZyYWdtZW50RHJvcGRvd25FbGVtZW50LCBmcmFnbWVudERyb3Bkb3duQ29udHJvbGxlcl0gPSBjcmVhdGVEcm9wZG93bihcclxuICAgIGFzeW5jIChuZXdGcmFnbWVudCkgPT4ge1xyXG4gICAgICBzZWxlY3RlZEZyYWdtZW50RmlsZVdhdGNoZXJVbnN1YnNjcmliZT8uKCk7XHJcblxyXG4gICAgICBpZiAobmV3RnJhZ21lbnQpIHtcclxuICAgICAgICBzZWxlY3RlZEZyYWdtZW50RmlsZVdhdGNoZXJVbnN1YnNjcmliZSA9IHZzY29kZUFwaS5zdWJzY3JpYmVUb0RvY3VtZW50U2F2ZShcclxuICAgICAgICAgIG5ld0ZyYWdtZW50LmlkLFxyXG4gICAgICAgICAgKG5ld0NvbnRlbnQpID0+IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGcmFnbWVudENvbnRlbnQgPSBuZXdDb250ZW50O1xyXG4gICAgICAgICAgICBvblNoYWRlckNvbnRlbnRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2VsZWN0ZWRGcmFnbWVudENvbnRlbnQgPSBuZXdGcmFnbWVudFxyXG4gICAgICAgID8gYXdhaXQgdnNjb2RlQXBpLmdldERvY3VtZW50VGV4dChuZXdGcmFnbWVudC5pZClcclxuICAgICAgICA6IFwiXCI7XHJcbiAgICAgIG9uU2hhZGVyQ29udGVudENoYW5nZWQoKTtcclxuICAgIH1cclxuICApO1xyXG4gIHZpZXdlck9wdGlvbnMuYXBwZW5kQ2hpbGQoXHJcbiAgICB3aXRoTGFiZWwoXHJcbiAgICAgIGZyYWdtZW50RHJvcGRvd25FbGVtZW50LFxyXG4gICAgICBcInZpZXdlci1mcmFnbWVudC1zaGFkZXItc2VsZWN0b3JcIixcclxuICAgICAgXCJGcmFnbWVudCBTaGFkZXJcIlxyXG4gICAgKVxyXG4gICk7XHJcblxyXG4gIHZpZXdlck9wdGlvbnMuYXBwZW5kQ2hpbGQoc2hhZGVyT3B0aW9ucyk7XHJcbn07XHJcblxyXG5jcmVhdGVWaWV3ZXIoKTtcclxuIiwiZXhwb3J0IGNvbnN0IGNyZWF0ZVNlY3Rpb25UaXRsZSA9ICh0ZXh0OiBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcclxuICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcclxuICBlbGVtZW50LmNsYXNzTmFtZSA9IGAke2NsYXNzTmFtZX0gc2VjdGlvbi10aXRsZWA7XHJcbiAgcmV0dXJuIHsgZWxlbWVudCB9O1xyXG59O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9