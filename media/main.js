!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r="SHADERS",o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r},u={emptyItem:!0},a=function(e,t,n){var r=o(o({},u),n),a=document.createElement("select");a.className="dropdown-base "+t;var l=null,c=[],d=function(t){e(l=t)};a.onchange=function(){var e=c.find((function(e){return e.item.id===a.value}));e.item.id?d(e.item):d(null)};return[a,{setItems:function(e){a.innerHTML="",c.length=0,e.find((function(e){return e.id===(null==l?void 0:l.id)}))||d(null),(r.emptyItem?i([{id:"",display:""}],e):i(e)).forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.display,t.selected=e.id===(null==l?void 0:l.id),a.appendChild(t),c.push({element:t,item:e})}))},getItems:function(){return c.map((function(e){return e.item}))},setSelectedItemById:function(e){d(null),c.forEach((function(t){t.item.id===e?(t.element.selected=!0,d(t.item)):t.element.selected=!1}))},getSelectedItem:function(){return l},clearSelection:function(){c.forEach((function(e){return e.element.selected=!1})),d(null)}}]},l=acquireVsCodeApi(),c=function(){function e(){var e=this;this.eventListeners=[],window.addEventListener("message",(function(t){e.eventListeners=e.eventListeners.filter((function(e){return e(t.data)}))}))}return e.prototype.getShaderDocuments=function(){var e=this;return l.postMessage({type:"getShaderDocuments"}),new Promise((function(t){e.eventListeners.push((function(e){return"getShaderDocuments"===e.type&&(t(e.payload.files),!0)}))}))},e}(),d=function(e,t,n){var r=document.createElement("button");return r.onclick=n,r.className=t,r.textContent=e,{element:r}},s=function(e,t,n){var r=document.createElement("div");r.className=t+" options-wrapper";var o=document.createElement("label");return o.className="options-label",o.textContent=n,e.className=e.className+" options-content",r.appendChild(o),r.appendChild(e),r},f=function(e,t,n,r,o){var i=document.createElement("div");i.className="edit-input-grid";for(var u=[],a=function(){return u.map((function(e){return e.value}))},l=0;l<n;l++){var c=document.createElement("div");c.className="edit-input-row";for(var d=function(n){var o=l*r+n,i=e[o],d=document.createElement("input"),s={element:d,value:i};d.className="edit-input",d.type="number",d.value=null==i?void 0:i.toString(),d.oninput=function(){u[o].value=Number(d.value),null==t||t(a())},u.push(s),c.appendChild(d)},s=0;s<r;s++)d(s);i.appendChild(c)}return[i,{setValues:function(e){return u.forEach((function(t,n){return t.value=e[n]}))},getValues:a,setReadonly:function(e){return u.forEach((function(t){return t.element.readOnly=e}))}}]},p=function(e){return f([0,0,0,0,0,0,0,0,0],e,3,3)},m=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},v=function(e,t){var n=document.createElement("div");return n.className=e,null==t||t.forEach((function(e){return n.appendChild(e)})),n};m(void 0,void 0,void 0,(function(){var e,t,n,o,i,u,l,m,y,g,b,w,C,S,E,x;return h(this,(function(h){var I,N,O,_,j,P,k;return e=new c,t=document.getElementById("viewer"),n=v("viewer-options"),o=v("viewer-shader-options"),t.appendChild(n),n.appendChild(v("viewer-shaders-title",[(I=r,N="",O=document.createElement("h3"),O.textContent=I,O.className=N+" section-title",{element:O}).element,d("Sync","viewer-refresh-button",(function(){e.getShaderDocuments().then((function(e){var t=e.map((function(e){return{id:e.filePath,display:e.fileName}}));l.setItems(t),g.setItems(t)}))})).element])),i=a((function(e){})),u=i[0],l=i[1],n.appendChild(s(u,"viewer-vertex-shader-selector","Vertex Shader")),m=a((function(e){})),y=m[0],g=m[1],n.appendChild(s(y,"viewer-fragment-shader-selector","Fragment Shader")),n.appendChild(o),o.appendChild(s(f([0,0,0],_,1,3)[0],"","u_color")),o.appendChild(s(function(e){return f([0,0,0,0],e,1,4)}()[0],"","u_diffuse")),b=p((function(e){return console.log(e)})),w=b[0],C=b[1],S=a((function(e){e&&("0"===e.id&&C.setReadonly(!1),"1"===e.id&&C.setReadonly(!0))}),"",{emptyItem:!1}),E=S[0],(x=S[1]).setItems([{id:"0",display:"Color picker"},{id:"1",display:"Custom"}]),x.setSelectedItemById("0"),o.appendChild(s(v("column-with-gap",[E,w]),"","dobre diffuse")),o.appendChild(s(v("column-with-gap",[a((function(e){}))[0],p((function(e){return console.log(e)}))[0]]),"","u_diffuse2")),o.appendChild(s(v("column-with-gap",[a((function(e){}))[0],p((function(e){return console.log(e)}))[0]]),"","u_diffuse2")),j=t,P=document.createElement("canvas"),k=P.getContext("2d"),j.appendChild(P),P.className="viewer-content",P.width=500,P.height=500,k.fillStyle="green",k.fillRect(150,150,200,450),[2]}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyYW5zbGF0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvZHJvcGRvd24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21tdW5pY2F0aW9uUHJveHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL2NyZWF0ZUZBQnV0dG9uLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9uZW50cy93cmFwcGVycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvZWRpdFZlY3RvcjMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvY3JlYXRlU2VjdGlvblRpdGxlLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidHJhbnNsYXRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJlbXB0eUl0ZW0iLCJjcmVhdGVEcm9wZG93biIsIm9uQ2hhbmdlIiwiY2xhc3NOYW1lIiwib3B0aW9ucyIsImNvbWJpbmVkT3B0aW9ucyIsImVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZWxlY3RlZEl0ZW0iLCJpdGVtRWxlbWVudHMiLCJzZXRTZWxlY3RlZEl0ZW0iLCJpdGVtIiwib25jaGFuZ2UiLCJmb3VuZEVsZW1lbnQiLCJmaW5kIiwiZSIsImlkIiwic2V0SXRlbXMiLCJpdGVtcyIsImlubmVySFRNTCIsImxlbmd0aCIsImRpc3BsYXkiLCJmb3JFYWNoIiwib3B0aW9uIiwidGV4dENvbnRlbnQiLCJzZWxlY3RlZCIsImFwcGVuZENoaWxkIiwicHVzaCIsImdldEl0ZW1zIiwibWFwIiwiaWUiLCJzZXRTZWxlY3RlZEl0ZW1CeUlkIiwiZ2V0U2VsZWN0ZWRJdGVtIiwiY2xlYXJTZWxlY3Rpb24iLCJhY3F1aXJlVnNDb2RlQXBpIiwiZXZlbnRMaXN0ZW5lcnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmaWx0ZXIiLCJsaXN0ZW5lciIsImRhdGEiLCJnZXRTaGFkZXJEb2N1bWVudHMiLCJwb3N0TWVzc2FnZSIsInR5cGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm1lc3NhZ2UiLCJwYXlsb2FkIiwiZmlsZXMiLCJjcmVhdGVGQUJ1dHRvbiIsInRleHQiLCJvbkNsaWNrIiwiYnV0dG9uIiwib25jbGljayIsIndpdGhMYWJlbCIsIndyYXBwZXIiLCJsYWJlbCIsImNyZWF0ZU11bHRpTnVtYmVySW5wdXQiLCJpbml0aWFsVmFsdWUiLCJyb3dzIiwiY29sdW1ucyIsImluaXRpYWxSZWFkb25seSIsImlucHV0R3JpZCIsImdldFZhbHVlcyIsInJvdyIsImlucHV0Um93IiwiY29sdW1uIiwiaW5kZXgiLCJpbnB1dCIsIml0ZW1FbGVtZW50IiwidG9TdHJpbmciLCJvbmlucHV0IiwiTnVtYmVyIiwic2V0VmFsdWVzIiwibmV3VmFsdWVzIiwic2V0UmVhZG9ubHkiLCJyZWFkb25seSIsInJlYWRPbmx5IiwiY3JlYXRlTWF0cml4MyIsImNyZWF0ZURpdlNlY3Rpb24iLCJjaGlsZHJlbiIsImRpdiIsImhvc3QiLCJjYW52YXMiLCJjb250ZXh0IiwidnNjb2RlQXBpIiwiVnNDb2RlQXBpUHJveHkiLCJ2aWV3ZXIiLCJnZXRFbGVtZW50QnlJZCIsInZpZXdlck9wdGlvbnMiLCJzaGFkZXJPcHRpb25zIiwidGhlbiIsInNkIiwiZiIsImZpbGVQYXRoIiwiZmlsZU5hbWUiLCJ2ZXJ0ZXhEcm9wZG93bkNvbnRyb2xsZXIiLCJmcmFnbWVudERyb3Bkb3duQ29udHJvbGxlciIsIm5ld1ZlcnRleCIsInZlcnRleERyb3Bkb3duRWxlbWVudCIsIm5ld0ZyYWdtZW50IiwiZnJhZ21lbnREcm9wZG93bkVsZW1lbnQiLCJjcmVhdGVWZWN0b3I0IiwibmV3dmFsIiwiY29uc29sZSIsImxvZyIsIm1hdDNlbCIsIm1hdDNjb24iLCJzZWwiLCJlZGlmZiIsImNkaWZmIiwiZ2V0Q29udGV4dCIsIndpZHRoIiwiaGVpZ2h0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FF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K0IsU0FBUyxJQUFLLElBQUssSUFBSyxLIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY29uc3QgdHJhbnNsYXRpb25zID0ge1xyXG4gICAgc2hhZGVyczogXCJTSEFERVJTXCJcclxufSIsImV4cG9ydCB0eXBlIERyb3Bkb3duSXRlbSA9IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGRpc3BsYXk6IHN0cmluZztcclxufTtcclxuXHJcbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gIGVtcHR5SXRlbTogdHJ1ZVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlRHJvcGRvd24gPSAoXHJcbiAgLy9pbml0aWFsVmFsdWU6IERyb3Bkb3duSXRlbSB8IG51bGwsXHJcbiAgb25DaGFuZ2U6IChpdGVtOiBEcm9wZG93bkl0ZW0gfCBudWxsKSA9PiB2b2lkLFxyXG4gIGNsYXNzTmFtZT86IHN0cmluZyxcclxuICBvcHRpb25zPzogeyBlbXB0eUl0ZW06IGJvb2xlYW4gfSAvL3BsYWNlaG9sZGVyXHJcbik6IFtcclxuICAgIEhUTUxTZWxlY3RFbGVtZW50LFxyXG4gICAge1xyXG4gICAgICBzZXRJdGVtczogKGl0ZW1zOiBEcm9wZG93bkl0ZW1bXSkgPT4gdm9pZDtcclxuICAgICAgZ2V0SXRlbXM6ICgpID0+IERyb3Bkb3duSXRlbVtdO1xyXG4gICAgICBzZXRTZWxlY3RlZEl0ZW1CeUlkOiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcclxuICAgICAgZ2V0U2VsZWN0ZWRJdGVtOiAoKSA9PiBEcm9wZG93bkl0ZW0gfCBudWxsO1xyXG4gICAgICBjbGVhclNlbGVjdGlvbjogKCkgPT4gdm9pZDtcclxuICAgIH1cclxuICBdID0+IHtcclxuICBjb25zdCBjb21iaW5lZE9wdGlvbnMgPSB7IC4uLmRlZmF1bHRPcHRpb25zLCAuLi5vcHRpb25zIH07XHJcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XHJcbiAgZWxlbWVudC5jbGFzc05hbWUgPSBgZHJvcGRvd24tYmFzZSAke2NsYXNzTmFtZX1gO1xyXG5cclxuICBsZXQgc2VsZWN0ZWRJdGVtOiBEcm9wZG93bkl0ZW0gfCBudWxsID0gbnVsbDtcclxuICBsZXQgaXRlbUVsZW1lbnRzOiB7IGVsZW1lbnQ6IEhUTUxPcHRpb25FbGVtZW50OyBpdGVtOiBEcm9wZG93bkl0ZW0gfVtdID0gW107XHJcbiAgY29uc3Qgc2V0U2VsZWN0ZWRJdGVtID0gKGl0ZW06IERyb3Bkb3duSXRlbSB8IG51bGwpID0+IHtcclxuICAgIHNlbGVjdGVkSXRlbSA9IGl0ZW07XHJcbiAgICBvbkNoYW5nZShzZWxlY3RlZEl0ZW0pO1xyXG4gIH07XHJcblxyXG4gIGVsZW1lbnQub25jaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBmb3VuZEVsZW1lbnQgPSBpdGVtRWxlbWVudHMuZmluZCgoZSkgPT4gZS5pdGVtLmlkID09PSBlbGVtZW50LnZhbHVlKTtcclxuXHJcbiAgICBpZiAoZm91bmRFbGVtZW50Lml0ZW0uaWQpIHNldFNlbGVjdGVkSXRlbShmb3VuZEVsZW1lbnQuaXRlbSk7XHJcbiAgICBlbHNlIHNldFNlbGVjdGVkSXRlbShudWxsKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBzZXRJdGVtcyA9IChpdGVtczogRHJvcGRvd25JdGVtW10pID0+IHtcclxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGl0ZW1FbGVtZW50cy5sZW5ndGggPSAwO1xyXG5cclxuICAgIGlmICghaXRlbXMuZmluZCgoaSkgPT4gaS5pZCA9PT0gc2VsZWN0ZWRJdGVtPy5pZCkpIHtcclxuICAgICAgc2V0U2VsZWN0ZWRJdGVtKG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5ld0l0ZW1zID0gY29tYmluZWRPcHRpb25zLmVtcHR5SXRlbSA/IFt7IGlkOiBcIlwiLCBkaXNwbGF5OiBcIlwiIH0sIC4uLml0ZW1zXSA6IFsuLi5pdGVtc107XHJcbiAgICBuZXdJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgIG9wdGlvbi52YWx1ZSA9IGl0ZW0uaWQ7XHJcbiAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGl0ZW0uZGlzcGxheTtcclxuICAgICAgb3B0aW9uLnNlbGVjdGVkID0gaXRlbS5pZCA9PT0gc2VsZWN0ZWRJdGVtPy5pZDtcclxuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICBpdGVtRWxlbWVudHMucHVzaCh7IGVsZW1lbnQ6IG9wdGlvbiwgaXRlbSB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldEl0ZW1zID0gKCkgPT4gaXRlbUVsZW1lbnRzLm1hcCgoaWUpID0+IGllLml0ZW0pO1xyXG4gIGNvbnN0IHNldFNlbGVjdGVkSXRlbUJ5SWQgPSAoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0U2VsZWN0ZWRJdGVtKG51bGwpO1xyXG4gICAgaXRlbUVsZW1lbnRzLmZvckVhY2goKGllKSA9PiB7XHJcbiAgICAgIGlmIChpZS5pdGVtLmlkID09PSBpZCkge1xyXG4gICAgICAgIGllLmVsZW1lbnQuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHNldFNlbGVjdGVkSXRlbShpZS5pdGVtKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZS5lbGVtZW50LnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldFNlbGVjdGVkSXRlbSA9ICgpID0+IHNlbGVjdGVkSXRlbTtcclxuICBjb25zdCBjbGVhclNlbGVjdGlvbiA9ICgpID0+IHtcclxuICAgIGl0ZW1FbGVtZW50cy5mb3JFYWNoKChpZSkgPT4gKGllLmVsZW1lbnQuc2VsZWN0ZWQgPSBmYWxzZSkpO1xyXG4gICAgc2V0U2VsZWN0ZWRJdGVtKG51bGwpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBbXHJcbiAgICBlbGVtZW50LFxyXG4gICAge1xyXG4gICAgICBzZXRJdGVtcyxcclxuICAgICAgZ2V0SXRlbXMsXHJcbiAgICAgIHNldFNlbGVjdGVkSXRlbUJ5SWQsXHJcbiAgICAgIGdldFNlbGVjdGVkSXRlbSxcclxuICAgICAgY2xlYXJTZWxlY3Rpb24sXHJcbiAgICB9LFxyXG4gIF07XHJcbn07XHJcbiIsImRlY2xhcmUgY29uc3QgYWNxdWlyZVZzQ29kZUFwaTogKCkgPT4ge1xyXG4gIC8vZ2V0U3RhdGU6ICgpID0+IGFueTtcclxuICAvL3NldFN0YXRlOiAoc3RhdGU6IGFueSkgPT4gdm9pZDtcclxuICBwb3N0TWVzc2FnZTogKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlcXVlc3QpID0+IHZvaWQ7XHJcbn07XHJcbmV4cG9ydCBjb25zdCB2c2NvZGVBcGkgPSBhY3F1aXJlVnNDb2RlQXBpKCk7XHJcblxyXG5leHBvcnQgdHlwZSBWc0NvZGVBcGlQcm94eU1lc3NhZ2VSZXF1ZXN0ID1cclxuICB8IHsgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIiB9XHJcbiAgfCB7IHR5cGU6IFwib25EaWRTaGFkZXJEb2N1bWVudHNDaGFuZ2VcIiB9O1xyXG5cclxuZXhwb3J0IHR5cGUgVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UgPSB7XHJcbiAgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIjtcclxuICBwYXlsb2FkOiB7IGZpbGVzOiB7IGZpbGVQYXRoOiBzdHJpbmc7IGZpbGVOYW1lOiBzdHJpbmcgfVtdIH07XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgVnNDb2RlQXBpUHJveHkge1xyXG4gIGV2ZW50TGlzdGVuZXJzOiAoKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiBib29sZWFuKVtdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAvL2NsZWFyIGV2ZW50IGxpc3RlbmVyIHRoYXQgYXJlIG5vIGxvbmdlciBpbnRlcmVzdGVkXHJcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmZpbHRlcigobGlzdGVuZXIpID0+XHJcbiAgICAgICAgbGlzdGVuZXIoZXZlbnQuZGF0YSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2hhZGVyRG9jdW1lbnRzKCkge1xyXG4gICAgdnNjb2RlQXBpLnBvc3RNZXNzYWdlKHtcclxuICAgICAgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIixcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTx7IGZpbGVQYXRoOiBzdHJpbmc7IGZpbGVOYW1lOiBzdHJpbmcgfVtdPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2goKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcImdldFNoYWRlckRvY3VtZW50c1wiKSB7XHJcbiAgICAgICAgICByZXNvbHZlKG1lc3NhZ2UucGF5bG9hZC5maWxlcyk7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgY3JlYXRlRkFCdXR0b24gPSAoXHJcbiAgdGV4dDogc3RyaW5nLFxyXG4gIGNsYXNzTmFtZTogc3RyaW5nLFxyXG4gIG9uQ2xpY2s6ICgpID0+IHZvaWRcclxuKSA9PiB7XHJcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b24ub25jbGljayA9IG9uQ2xpY2s7XHJcbiAgYnV0dG9uLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICBidXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIHJldHVybiB7IGVsZW1lbnQ6IGJ1dHRvbiB9O1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3Qgd2l0aExhYmVsID0gKFxyXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxyXG4gIGNsYXNzTmFtZTogc3RyaW5nLFxyXG4gIHRleHQ6IHN0cmluZ1xyXG4pID0+IHtcclxuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICB3cmFwcGVyLmNsYXNzTmFtZSA9IGAke2NsYXNzTmFtZX0gb3B0aW9ucy13cmFwcGVyYDtcclxuICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICBsYWJlbC5jbGFzc05hbWUgPSBcIm9wdGlvbnMtbGFiZWxcIjtcclxuICBsYWJlbC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgZWxlbWVudC5jbGFzc05hbWUgPSBgJHtlbGVtZW50LmNsYXNzTmFtZX0gb3B0aW9ucy1jb250ZW50YDtcclxuICB3cmFwcGVyLmFwcGVuZENoaWxkKGxhYmVsKTtcclxuICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gIHJldHVybiB3cmFwcGVyO1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3QgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dCA9IDxUIGV4dGVuZHMgbnVtYmVyW10+KGluaXRpYWxWYWx1ZTogVCwgb25DaGFuZ2U6IChuZXdWYWx1ZTogVCkgPT4gdm9pZCwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsIGluaXRpYWxSZWFkb25seTogYm9vbGVhbik6IFtcclxuICAgIEhUTUxEaXZFbGVtZW50LFxyXG4gICAge1xyXG4gICAgICAgIHNldFZhbHVlczogKHZhbHVlOiBUKSA9PiB2b2lkO1xyXG4gICAgICAgIHNldFJlYWRvbmx5OiAocmVhZG9ubHk6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICAgICAgZ2V0VmFsdWVzOiAoKSA9PiBUO1xyXG4gICAgfVxyXG5dID0+IHtcclxuICAgIGNvbnN0IGlucHV0R3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBpbnB1dEdyaWQuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0LWdyaWRcIjtcclxuXHJcbiAgICBjb25zdCBpdGVtRWxlbWVudHM6IHsgZWxlbWVudDogSFRNTElucHV0RWxlbWVudDsgdmFsdWU6IG51bWJlciB9W10gPSBbXTtcclxuICAgIGNvbnN0IHNldFZhbHVlcyA9IChuZXdWYWx1ZXM6IFQpID0+IGl0ZW1FbGVtZW50cy5mb3JFYWNoKChpZSwgaW5kZXgpID0+IGllLnZhbHVlID0gbmV3VmFsdWVzW2luZGV4XSk7XHJcbiAgICBjb25zdCBnZXRWYWx1ZXMgPSAoKSA9PiBpdGVtRWxlbWVudHMubWFwKGllID0+IGllLnZhbHVlKSBhcyBUO1xyXG4gICAgY29uc3Qgc2V0UmVhZG9ubHkgPSAocmVhZG9ubHk6IGJvb2xlYW4pID0+IGl0ZW1FbGVtZW50cy5mb3JFYWNoKGllID0+IGllLmVsZW1lbnQucmVhZE9ubHkgPSByZWFkb25seSk7XHJcblxyXG4gICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgcm93czsgcm93KyspIHtcclxuICAgICAgICBjb25zdCBpbnB1dFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaW5wdXRSb3cuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0LXJvd1wiO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCBjb2x1bW5zOyBjb2x1bW4rKykge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHJvdyAqIGNvbHVtbnMgKyBjb2x1bW47XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaW5pdGlhbFZhbHVlW2luZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0geyBlbGVtZW50OiBpbnB1dCwgdmFsdWUgfTtcclxuICAgICAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0XCI7XHJcbiAgICAgICAgICAgIGlucHV0LnR5cGUgPSBcIm51bWJlclwiO1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlPy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBpbnB1dC5vbmlucHV0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbUVsZW1lbnRzW2luZGV4XS52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT8uKGdldFZhbHVlcygpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaXRlbUVsZW1lbnRzLnB1c2goaXRlbUVsZW1lbnQpO1xyXG4gICAgICAgICAgICBpbnB1dFJvdy5hcHBlbmRDaGlsZChpbnB1dClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlucHV0R3JpZC5hcHBlbmRDaGlsZChpbnB1dFJvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBpbnB1dEdyaWQsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZXRWYWx1ZXMsXHJcbiAgICAgICAgICAgIGdldFZhbHVlcyxcclxuICAgICAgICAgICAgc2V0UmVhZG9ubHlcclxuICAgICAgICB9XHJcbiAgICBdXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1hdHJpeDMgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVNYXRyaXgzID0gKG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBNYXRyaXgzKSA9PiB2b2lkKSA9PiBjcmVhdGVNdWx0aU51bWJlcklucHV0PE1hdHJpeDM+KFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSwgb25DaGFuZ2UsIDMsIDMsIGZhbHNlKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZlY3RvcjMgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVWZWN0b3IzID0gKG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBWZWN0b3IzKSA9PiB2b2lkKSA9PiBjcmVhdGVNdWx0aU51bWJlcklucHV0PFZlY3RvcjM+KFswLCAwLCAwXSwgb25DaGFuZ2UsIDEsIDMsIGZhbHNlKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZlY3RvcjQgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVZlY3RvcjQgPSAob25DaGFuZ2U/OiAobmV3VmFsdWU6IFZlY3RvcjQpID0+IHZvaWQpID0+IGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8VmVjdG9yND4oWzAsIDAsIDAsIDBdLCBvbkNoYW5nZSwgMSwgNCwgZmFsc2UpO1xyXG5cclxuLy9jb25zdCBjdXN0b21Db250cm9sbGVyID0gKCk7IHNldFZhbHVlLCBcclxuLy9leHBvcnQgY29uc3QgY3JlYXRlVmVjdG9yMiA9IDxUPihvbkNoYW5nZTogKHZhbHVlOiBUKSA9PiB2b2lkLCBjbGFzc05hbWU/OiBzdHJpbmcpXHJcblxyXG4iLCJpbXBvcnQgeyB0cmFuc2xhdGlvbnMgfSBmcm9tICcuLy4uL3RyYW5zbGF0aW9ucyc7XHJcbmltcG9ydCB7IGNyZWF0ZURyb3Bkb3duLCBEcm9wZG93bkl0ZW0gfSBmcm9tIFwiLi9jb21wb25lbnRzL2Ryb3Bkb3duXCI7XHJcbmltcG9ydCB7IFZzQ29kZUFwaVByb3h5IH0gZnJvbSBcIi4vY29tbXVuaWNhdGlvblByb3h5XCI7XHJcbmltcG9ydCB7IGNyZWF0ZVNlY3Rpb25UaXRsZSB9IGZyb20gXCIuL2NvbXBvbmVudHMvY3JlYXRlU2VjdGlvblRpdGxlXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUZBQnV0dG9uIGFzIGNyZWF0ZUJ1dHRvbiB9IGZyb20gXCIuL2NvbXBvbmVudHMvY3JlYXRlRkFCdXR0b25cIjtcclxuaW1wb3J0IHsgd2l0aExhYmVsIH0gZnJvbSBcIi4vY29tcG9uZW50cy93cmFwcGVyc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVNYXRyaXgzLCBjcmVhdGVWZWN0b3IzLCBjcmVhdGVWZWN0b3I0IH0gZnJvbSBcIi4vY29tcG9uZW50cy9lZGl0VmVjdG9yM1wiO1xyXG5cclxuY29uc3QgY3JlYXRlRGl2U2VjdGlvbiA9IChjbGFzc05hbWU6IHN0cmluZywgY2hpbGRyZW4/OiBIVE1MRWxlbWVudFtdKSA9PiB7XHJcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXYuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIGNoaWxkcmVuPy5mb3JFYWNoKGMgPT4gZGl2LmFwcGVuZENoaWxkKGMpKTtcclxuICByZXR1cm4gZGl2O1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlQ2FudmFzID0gKGhvc3Q6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICBob3N0LmFwcGVuZENoaWxkKGNhbnZhcyk7XHJcbiAgY2FudmFzLmNsYXNzTmFtZSA9IFwidmlld2VyLWNvbnRlbnRcIjtcclxuICBjYW52YXMud2lkdGggPSA1MDA7XHJcbiAgY2FudmFzLmhlaWdodCA9IDUwMDtcclxuICBjb250ZXh0LmZpbGxTdHlsZSA9IFwiZ3JlZW5cIjtcclxuICBjb250ZXh0LmZpbGxSZWN0KDE1MCwgMTUwLCAyMDAsIDQ1MCk7XHJcbn1cclxuXHJcbmNvbnN0IGNvbXBpbGVBbmRHZW5lcmF0ZSA9IGFzeW5jICgpID0+IHtcclxuICAvL2dldCBzaGFkZXJzIHRleHRcclxuICAvL2NvbXBpbGUgc2hhZGVyXHJcbiAgLy9nZW5lcmF0ZSBzaGFkZXIgb3B0aW9uc1xyXG5cclxuICAvL29sZCBzaGFkZXIgb3B0aW9uc1xyXG4gIC8vbmV3IHNoYWRlciBvcHRpb25zXHJcbiAgLy9hcHBseSBjaGFuZ2UgaWY6XHJcbiAgLy9uYW1lICsgdHlwZSBjaGFuZ2VkXHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZVZpZXdlciA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCB2c2NvZGVBcGkgPSBuZXcgVnNDb2RlQXBpUHJveHkoKTtcclxuICBjb25zdCB2aWV3ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZXdlclwiKTtcclxuICBjb25zdCB2aWV3ZXJPcHRpb25zID0gY3JlYXRlRGl2U2VjdGlvbihcInZpZXdlci1vcHRpb25zXCIpO1xyXG4gIGNvbnN0IHNoYWRlck9wdGlvbnMgPSBjcmVhdGVEaXZTZWN0aW9uKFwidmlld2VyLXNoYWRlci1vcHRpb25zXCIpO1xyXG5cclxuICB2aWV3ZXIuYXBwZW5kQ2hpbGQodmlld2VyT3B0aW9ucyk7XHJcblxyXG4gIGxldCBzZWxlY3RlZFZlcnRleDogRHJvcGRvd25JdGVtIHwgbnVsbCA9IG51bGw7XHJcbiAgbGV0IHNlbGVjdGVkRnJhZ21lbnQ6IERyb3Bkb3duSXRlbSB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdCBvblNoYWRlcnNDaGFuZ2VkID0gKCkgPT4ge1xyXG4gICAgLy8gL2lmIChzZWxlY3RlZEZyYWdtZW50KVxyXG4gICAgLy9lbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAvL2NyZWF0ZVNoYWRlck9wdGlvbnMoc2hhZGVyT3B0aW9ucyk7XHJcbiAgfTtcclxuXHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIGNyZWF0ZURpdlNlY3Rpb24oXCJ2aWV3ZXItc2hhZGVycy10aXRsZVwiLCBbXHJcbiAgICAgIGNyZWF0ZVNlY3Rpb25UaXRsZSh0cmFuc2xhdGlvbnMuc2hhZGVycywgXCJcIikuZWxlbWVudCxcclxuICAgICAgY3JlYXRlQnV0dG9uKFwiU3luY1wiLCBcInZpZXdlci1yZWZyZXNoLWJ1dHRvblwiLCAoKSA9PiB7XHJcbiAgICAgICAgdnNjb2RlQXBpLmdldFNoYWRlckRvY3VtZW50cygpLnRoZW4oKHNkKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBmaWxlcyA9IHNkLm1hcCgoZikgPT4gKHtcclxuICAgICAgICAgICAgaWQ6IGYuZmlsZVBhdGgsXHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGYuZmlsZU5hbWUsXHJcbiAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgdmVydGV4RHJvcGRvd25Db250cm9sbGVyLnNldEl0ZW1zKGZpbGVzKTtcclxuICAgICAgICAgIGZyYWdtZW50RHJvcGRvd25Db250cm9sbGVyLnNldEl0ZW1zKGZpbGVzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSkuZWxlbWVudFxyXG4gICAgXSlcclxuXHJcbiAgKTtcclxuXHJcbiAgLy92ZXJ0ZXggc2hhZGVyXHJcbiAgY29uc3QgW3ZlcnRleERyb3Bkb3duRWxlbWVudCwgdmVydGV4RHJvcGRvd25Db250cm9sbGVyXSA9IGNyZWF0ZURyb3Bkb3duKFxyXG4gICAgKG5ld1ZlcnRleCkgPT4ge1xyXG4gICAgICBzZWxlY3RlZEZyYWdtZW50ID0gbmV3VmVydGV4O1xyXG4gICAgICBvblNoYWRlcnNDaGFuZ2VkKCk7XHJcbiAgICB9XHJcbiAgKTtcclxuICB2aWV3ZXJPcHRpb25zLmFwcGVuZENoaWxkKFxyXG4gICAgd2l0aExhYmVsKFxyXG4gICAgICB2ZXJ0ZXhEcm9wZG93bkVsZW1lbnQsXHJcbiAgICAgIFwidmlld2VyLXZlcnRleC1zaGFkZXItc2VsZWN0b3JcIixcclxuICAgICAgXCJWZXJ0ZXggU2hhZGVyXCJcclxuICAgIClcclxuICApO1xyXG5cclxuICAvL2ZyYWdtZW50IHNoYWRlclxyXG4gIGNvbnN0IFtmcmFnbWVudERyb3Bkb3duRWxlbWVudCwgZnJhZ21lbnREcm9wZG93bkNvbnRyb2xsZXJdID0gY3JlYXRlRHJvcGRvd24oXHJcbiAgICAobmV3RnJhZ21lbnQpID0+IHtcclxuICAgICAgc2VsZWN0ZWRGcmFnbWVudCA9IG5ld0ZyYWdtZW50O1xyXG4gICAgICBvblNoYWRlcnNDaGFuZ2VkKCk7XHJcbiAgICB9XHJcbiAgKTtcclxuICB2aWV3ZXJPcHRpb25zLmFwcGVuZENoaWxkKFxyXG4gICAgd2l0aExhYmVsKFxyXG4gICAgICBmcmFnbWVudERyb3Bkb3duRWxlbWVudCxcclxuICAgICAgXCJ2aWV3ZXItZnJhZ21lbnQtc2hhZGVyLXNlbGVjdG9yXCIsXHJcbiAgICAgIFwiRnJhZ21lbnQgU2hhZGVyXCJcclxuICAgIClcclxuICApO1xyXG5cclxuICB2aWV3ZXJPcHRpb25zLmFwcGVuZENoaWxkKHNoYWRlck9wdGlvbnMpO1xyXG5cclxuICBzaGFkZXJPcHRpb25zLmFwcGVuZENoaWxkKHdpdGhMYWJlbChjcmVhdGVWZWN0b3IzKClbMF0sIFwiXCIsIFwidV9jb2xvclwiKSk7XHJcbiAgc2hhZGVyT3B0aW9ucy5hcHBlbmRDaGlsZCh3aXRoTGFiZWwoY3JlYXRlVmVjdG9yNCgpWzBdLCBcIlwiLCBcInVfZGlmZnVzZVwiKSk7XHJcblxyXG4gIGNvbnN0IFttYXQzZWwsIG1hdDNjb25dID0gY3JlYXRlTWF0cml4MyhuZXd2YWwgPT4gY29uc29sZS5sb2cobmV3dmFsKSk7XHJcbiAgY29uc3QgW2VkaWZmLCBjZGlmZl0gPVxyXG4gICAgY3JlYXRlRHJvcGRvd24oXHJcbiAgICAgIChzZWwpID0+IHtcclxuICAgICAgICBpZiAoIXNlbClcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoc2VsLmlkID09PSBcIjBcIikge1xyXG4gICAgICAgICAgbWF0M2Nvbi5zZXRSZWFkb25seShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWwuaWQgPT09IFwiMVwiKSB7XHJcbiAgICAgICAgICBtYXQzY29uLnNldFJlYWRvbmx5KHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgXCJcIixcclxuICAgICAgeyBlbXB0eUl0ZW06IGZhbHNlIH1cclxuICAgICk7XHJcblxyXG4gIGNkaWZmLnNldEl0ZW1zKFt7IGlkOiBcIjBcIiwgZGlzcGxheTogXCJDb2xvciBwaWNrZXJcIiB9LCB7IGlkOiBcIjFcIiwgZGlzcGxheTogXCJDdXN0b21cIiB9XSk7XHJcbiAgY2RpZmYuc2V0U2VsZWN0ZWRJdGVtQnlJZChcIjBcIik7XHJcblxyXG5cclxuICBzaGFkZXJPcHRpb25zLmFwcGVuZENoaWxkKFxyXG4gICAgd2l0aExhYmVsKFxyXG4gICAgICBjcmVhdGVEaXZTZWN0aW9uKFwiY29sdW1uLXdpdGgtZ2FwXCIsXHJcbiAgICAgICAgW2VkaWZmLCBtYXQzZWxdKSwgXCJcIiwgXCJkb2JyZSBkaWZmdXNlXCIpKTtcclxuXHJcbiAgc2hhZGVyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIHdpdGhMYWJlbChcclxuICAgICAgY3JlYXRlRGl2U2VjdGlvbihcImNvbHVtbi13aXRoLWdhcFwiLFxyXG4gICAgICAgIFtjcmVhdGVEcm9wZG93bihcclxuICAgICAgICAgIChuZXdGcmFnbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZyYWdtZW50ID0gbmV3RnJhZ21lbnQ7XHJcbiAgICAgICAgICAgIG9uU2hhZGVyc0NoYW5nZWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApWzBdLCBjcmVhdGVNYXRyaXgzKG5ld3ZhbCA9PiBjb25zb2xlLmxvZyhuZXd2YWwpKVswXV0pLCBcIlwiLCBcInVfZGlmZnVzZTJcIikpXHJcbiAgc2hhZGVyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIHdpdGhMYWJlbChcclxuICAgICAgY3JlYXRlRGl2U2VjdGlvbihcImNvbHVtbi13aXRoLWdhcFwiLFxyXG4gICAgICAgIFtjcmVhdGVEcm9wZG93bihcclxuICAgICAgICAgIChuZXdGcmFnbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZyYWdtZW50ID0gbmV3RnJhZ21lbnQ7XHJcbiAgICAgICAgICAgIG9uU2hhZGVyc0NoYW5nZWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApWzBdLCBjcmVhdGVNYXRyaXgzKG5ld3ZhbCA9PiBjb25zb2xlLmxvZyhuZXd2YWwpKVswXV0pLCBcIlwiLCBcInVfZGlmZnVzZTJcIikpXHJcblxyXG4gIGNyZWF0ZUNhbnZhcyh2aWV3ZXIpO1xyXG5cclxufTtcclxuXHJcbmNyZWF0ZVZpZXdlcigpO1xyXG4iLCJleHBvcnQgY29uc3QgY3JlYXRlU2VjdGlvblRpdGxlID0gKHRleHQ6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xyXG4gIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gYCR7Y2xhc3NOYW1lfSBzZWN0aW9uLXRpdGxlYDtcclxuICByZXR1cm4geyBlbGVtZW50IH07XHJcbn07XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=