!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r="SHADERS",o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r},a={emptyItem:!0},u=function(e,t,n){var r=o(o({},a),n),u=document.createElement("select");u.className="dropdown-base "+t;var c=null,l=[],s=function(t){e(c=t)};u.onchange=function(){var e=l.find((function(e){return e.item.id===u.value}));e.item.id?s(e.item):s(null)};return[u,{setItems:function(e){u.innerHTML="",l.length=0,e.find((function(e){return e.id===(null==c?void 0:c.id)}))||s(null),(r.emptyItem?i([{id:"",display:""}],e):i(e)).forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.display,t.selected=e.id===(null==c?void 0:c.id),u.appendChild(t),l.push({element:t,item:e})}))},getItems:function(){return l.map((function(e){return e.item}))},setSelectedItemById:function(e){s(null),l.forEach((function(t){t.item.id===e?(t.element.selected=!0,s(t.item)):t.element.selected=!1}))},getSelectedItem:function(){return c},clearSelection:function(){l.forEach((function(e){return e.element.selected=!1})),s(null)}}]},c=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},l=function(e,t){return e.hasOwnProperty(t)},s=acquireVsCodeApi(),d=function(){function e(){var e=this;this.eventListeners=[],window.addEventListener("message",(function(t){e.eventListeners.forEach((function(e){return e(t.data)}))}))}return e.prototype.getShaderDocuments=function(){var e=this,t=c();return s.postMessage({type:"getShaderDocuments",id:t}),new Promise((function(n){var r=function(o){"getShaderDocuments"===o.type&&o.id===t&&(n(o.payload.files),e.removeListener(r))};e.eventListeners.push(r)}))},e.prototype.getDocumentText=function(e){var t=this,n=c();return s.postMessage({type:"getDocumentText",id:n,payload:{fileName:e}}),new Promise((function(e){var r=function(o){"getDocumentText"===o.type&&o.id===n&&(e(o.payload.text),t.removeListener(r))};t.eventListeners.push(r)}))},e.prototype.subscribeToDocumentSave=function(e,t){var n=this;s.postMessage({type:"subscribeToDocumentTextChange",payload:{fileName:e}});var r=function(n){"onDocumentTextChange"===n.type&&n.payload.filePath===e&&t(n.payload.text)};return this.eventListeners.push(r),function(){n.removeListener(r),s.postMessage({type:"unsubscribeToDocumentTextChange",payload:{fileName:e}})}},e.prototype.removeListener=function(e){var t,n,r;t=this.eventListeners,n=e,(r=t.indexOf(n))>-1&&t.splice(r,1)},e}(),f=function(e,t,n){var r=document.createElement("button");return r.onclick=n,r.className=t,r.textContent=e,{element:r}},p=function(e,t,n){var r=document.createElement("div");r.className=t+" options-wrapper";var o=document.createElement("label");return o.className="options-label",o.textContent=n,e.className=e.className+" options-content",r.appendChild(o),r.appendChild(e),r},m=function(e,t){var n=document.createElement("div");return n.className=e,null==t||t.forEach((function(e){return n.appendChild(e)})),n},v=function(e,t,n,r,o){var i=document.createElement("div");i.className="edit-input-grid";for(var a=[],u=function(){return a.map((function(e){return e.value}))},c=0;c<n;c++){var l=document.createElement("div");l.className="edit-input-row";for(var s=function(n){var i=c*r+n,s=e[i],d=document.createElement("input"),f={element:d,value:s};Object.assign(d,o),d.className="edit-input",d.type="number",d.value=null==s?void 0:s.toString(),d.oninput=function(){a[i].value=Number(d.value),null==t||t(u())},a.push(f),l.appendChild(d)},d=0;d<r;d++)s(d);i.appendChild(l)}return[i,{setValues:function(e){return a.forEach((function(t,n){return t.value=e[n]}))},getValues:u,setReadonly:function(e){return a.forEach((function(t){return t.element.readOnly=e}))}}]},h=function(e){return v([0,0,0,0,0,0,0,0,0],e,3,3)},y={min:"0",max:"1",step:"0.1"},g=function(){function e(e){this.keySelector=e,this.map=new Map}return e.prototype.get=function(e){this.map.get(this.keySelector(e))},e.prototype.set=function(e,t){this.map.set(this.keySelector(e),t)},e.prototype.clear=function(){this.map.clear()},e}(),b=(new g((function(e){return e.name+";"+e.bufferType})),new g((function(e){return e.name+";"+e.uniformType})),function(e){var t;e.appendChild(p(function(e){var t=[.5,.5,.5,1],n=document.createElement("div");n.className="edit-input-color";var r=function(e){n.style.background="rgb("+255*e[0]+","+255*e[1]+","+255*e[2]+","+e[3]+")"};r(t);var o=m("row-with-gap"),i=v(t,(function(t){r(t),null==e||e(t)}),1,4,y),a=i[0],u=i[1];return o.appendChild(a),o.appendChild(n),[o,u]}()[0],"","u_color")),e.appendChild(p(v([0,0,0,0],t,1,4)[0],"","u_diffuse"));var n=h((function(e){return console.log(e)})),r=n[0],o=n[1],i=u((function(e){e&&("0"===e.id&&o.setReadonly(!1),"1"===e.id&&o.setReadonly(!0))}),"",{emptyItem:!1}),a=i[0],c=i[1];c.setItems([{id:"0",display:"Color picker"},{id:"1",display:"Custom2"}]),c.setSelectedItemById("0"),e.appendChild(p(m("column-with-gap",[a,r]),"","dobre diffuse")),e.appendChild(p(m("column-with-gap",[u((function(e){}))[0],h((function(e){return console.log(e)}))[0]]),"","u_diffuse2")),e.appendChild(p(m("column-with-gap",[u((function(e){}))[0],h((function(e){return console.log(e)}))[0]]),"","u_diffuse2"))}),x=function(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;var o=e.getShaderInfoLog(r);return e.deleteShader(r),{error:o}},w=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},C=function(e){var t=document.createElement("canvas");t.className=e;var n=t.getContext("webgl");if(!n)throw new Error("Unable to create webgl context");return[t,{compileShaders:function(e,t){var r=x(n,n.VERTEX_SHADER,e),o=x(n,n.FRAGMENT_SHADER,t),i=void 0;l(r,"error")&&(i=r.error);var a=void 0;if(l(o,"error")&&(a=o.error),i||a)return[i,a];!function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;throw console.log("cos nie halo"),e.deleteProgram(r),new Error("Creating program failed: "+e.getProgramInfoLog(r))}(n,r,o);return Promise.resolve({})}}]};w(void 0,void 0,void 0,(function(){var e,t,n,o,i,a,c,l,s,v,h,y,g,x,E,T,P,N,D,I;return S(this,(function(L){var O,M,_;return e=new d,t=document.getElementById("viewer"),n=m("viewer-options"),o=m("viewer-shader-options"),(i=m("viewer-content")).style.background="red",a=C("viewer-content"),c=a[0],l=a[1],t.appendChild(c),t.appendChild(i),t.appendChild(n),s=function(e){c.style.visibility="canvas"===e?"visible":"collapse",i.style.visibility="errors"===e?"visible":"collapse"},x=function(){if(o.innerHTML="",console.log({fragment:g,vertex:y}),b(o),g&&y){var e=l.compileShaders(y,g);if(Array.isArray(e)){i.style.visibility="visible";var t=e;s("errors"),i.innerText=t.join("\r\n")}else s("canvas")}else console.log("clear")},n.appendChild(m("viewer-shaders-title",[(O=r,M="",_=document.createElement("h3"),_.textContent=O,_.className=M+" section-title",{element:_}).element,f("Sync","viewer-refresh-button",(function(){e.getShaderDocuments().then((function(e){var t=e.map((function(e){return{id:e.filePath,display:e.fileName}}));P.setItems(t),I.setItems(t)}))})).element])),E=u((function(t){return w(void 0,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return null==v||v(),t&&(v=e.subscribeToDocumentSave(t.id,(function(e){y=e,x()}))),t?[4,e.getDocumentText(t.id)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return y=n,x(),[2]}}))}))})),T=E[0],P=E[1],n.appendChild(p(T,"viewer-vertex-shader-selector","Vertex Shader")),N=u((function(t){return w(void 0,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return null==h||h(),t&&(h=e.subscribeToDocumentSave(t.id,(function(e){g=e,x()}))),t?[4,e.getDocumentText(t.id)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return g=n,x(),[2]}}))}))})),D=N[0],I=N[1],n.appendChild(p(D,"viewer-fragment-shader-selector","Fragment Shader")),n.appendChild(o),[2]}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyYW5zbGF0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvZHJvcGRvd24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tbXVuaWNhdGlvblByb3h5LnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9uZW50cy9jcmVhdGVGQUJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvd3JhcHBlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL2NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvZWRpdFZlY3RvcjMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL2VkaXRDb2xvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL3NoYWRlck9wdGlvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci93ZWJnbF91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9uZW50cy9jcmVhdGVTZWN0aW9uVGl0bGUudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ0cmFuc2xhdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsImVtcHR5SXRlbSIsImNyZWF0ZURyb3Bkb3duIiwib25DaGFuZ2UiLCJjbGFzc05hbWUiLCJvcHRpb25zIiwiY29tYmluZWRPcHRpb25zIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNlbGVjdGVkSXRlbSIsIml0ZW1FbGVtZW50cyIsInNldFNlbGVjdGVkSXRlbSIsIml0ZW0iLCJvbmNoYW5nZSIsImZvdW5kRWxlbWVudCIsImZpbmQiLCJlIiwiaWQiLCJzZXRJdGVtcyIsIml0ZW1zIiwiaW5uZXJIVE1MIiwibGVuZ3RoIiwiZGlzcGxheSIsImZvckVhY2giLCJvcHRpb24iLCJ0ZXh0Q29udGVudCIsInNlbGVjdGVkIiwiYXBwZW5kQ2hpbGQiLCJwdXNoIiwiZ2V0SXRlbXMiLCJtYXAiLCJpZSIsInNldFNlbGVjdGVkSXRlbUJ5SWQiLCJnZXRTZWxlY3RlZEl0ZW0iLCJjbGVhclNlbGVjdGlvbiIsInV1aWR2NCIsInJlcGxhY2UiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJoYXNQcm9wZXJ0eSIsIm9iaiIsInByb3AiLCJhY3F1aXJlVnNDb2RlQXBpIiwiZXZlbnRMaXN0ZW5lcnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJsaXN0ZW5lciIsImRhdGEiLCJnZXRTaGFkZXJEb2N1bWVudHMiLCJtZXNzYWdlSWQiLCJwb3N0TWVzc2FnZSIsInR5cGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm1lc3NhZ2UiLCJwYXlsb2FkIiwiZmlsZXMiLCJyZW1vdmVMaXN0ZW5lciIsImdldERvY3VtZW50VGV4dCIsImZpbGVOYW1lIiwidGV4dCIsInN1YnNjcmliZVRvRG9jdW1lbnRTYXZlIiwiZmlsZVBhdGgiLCJjYWxsYmFjayIsInRoaXMiLCJhcnJheSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZUZBQnV0dG9uIiwib25DbGljayIsImJ1dHRvbiIsIm9uY2xpY2siLCJ3aXRoTGFiZWwiLCJ3cmFwcGVyIiwibGFiZWwiLCJjcmVhdGVEaXYiLCJjaGlsZHJlbiIsImRpdiIsImNyZWF0ZU11bHRpTnVtYmVySW5wdXQiLCJpbml0aWFsVmFsdWUiLCJyb3dzIiwiY29sdW1ucyIsImlucHV0T3B0aW9ucyIsImlucHV0R3JpZCIsImdldFZhbHVlcyIsInJvdyIsImlucHV0Um93IiwiY29sdW1uIiwiaW5wdXQiLCJpdGVtRWxlbWVudCIsImFzc2lnbiIsIm9uaW5wdXQiLCJOdW1iZXIiLCJzZXRWYWx1ZXMiLCJuZXdWYWx1ZXMiLCJzZXRSZWFkb25seSIsInJlYWRvbmx5IiwicmVhZE9ubHkiLCJjcmVhdGVNYXRyaXgzIiwiY29sb3JJbnB1dFByb3BzIiwibWluIiwibWF4Iiwic3RlcCIsImtleVNlbGVjdG9yIiwiTWFwIiwic2V0IiwiY2xlYXIiLCJhcHBlbmRXaXRoU2hhZGVyT3B0aW9ucyIsIkNvbXBvc2l0ZUtleU1hcCIsImJ1ZmZlclR5cGUiLCJ1bmlmb3JtVHlwZSIsImNvbG9yRGl2Iiwic2V0Q29sb3IiLCJjb2xvciIsInN0eWxlIiwiYmFja2dyb3VuZCIsImNvbnRhaW5lciIsImNvbnRyb2xsZXIiLCJjcmVhdGVDb2xvcjQiLCJuZXd2YWwiLCJjb25zb2xlIiwibG9nIiwibWF0M2VsIiwibWF0M2NvbiIsInNlbCIsImVkaWZmIiwiY2RpZmYiLCJuZXdGcmFnbWVudCIsImNvbXBpbGVTaGFkZXIiLCJyZW5kZXJpbmdDb250ZXh0Iiwic291cmNlIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwic2hhZGVyU291cmNlIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJlcnJvciIsImdldFNoYWRlckluZm9Mb2ciLCJkZWxldGVTaGFkZXIiLCJjcmVhdGVXZWJHTENhbnZhcyIsImNhbnZhcyIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiRXJyb3IiLCJjb21waWxlU2hhZGVycyIsInZlcnRleFNoYWRlckNvbnRlbnQiLCJmcmFnbWVudFNoYWRlckNvbnRlbnQiLCJ2ZXJ0ZXhTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiZnJhZ21lbnRTaGFkZXIiLCJGUkFHTUVOVF9TSEFERVIiLCJ2ZXJ0ZXhFcnJvciIsInVuZGVmaW5lZCIsImZyYWdtZW50RXJyb3IiLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZGVsZXRlUHJvZ3JhbSIsImdldFByb2dyYW1JbmZvTG9nIiwidnNjb2RlQXBpIiwidmlld2VyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2aWV3ZXJPcHRpb25zIiwic2hhZGVyT3B0aW9ucyIsInNoYWRlckNvbXBpbGF0aW9uRXJyb3JzIiwid2ViR0xDYW52YXMiLCJ3ZWJHTENvbnRyb2xsZXIiLCJzaG93Q29udGVudCIsImNvbnRlbnQiLCJ2aXNpYmlsaXR5Iiwib25TaGFkZXJDb250ZW50Q2hhbmdlZCIsImZyYWdtZW50Iiwic2VsZWN0ZWRGcmFnbWVudENvbnRlbnQiLCJ2ZXJ0ZXgiLCJzZWxlY3RlZFZlcnRleENvbnRlbnQiLCJyZXN1bHQiLCJBcnJheSIsImlzQXJyYXkiLCJlcnJvcnMiLCJpbm5lclRleHQiLCJqb2luIiwidGhlbiIsInNkIiwiZiIsInZlcnRleERyb3Bkb3duQ29udHJvbGxlciIsImZyYWdtZW50RHJvcGRvd25Db250cm9sbGVyIiwibmV3VmVydGV4Iiwic2VsZWN0ZWRWZXJ0ZXhGaWxlV2F0Y2hlclVuc3Vic2NyaWJlIiwibmV3Q29udGVudCIsInZlcnRleERyb3Bkb3duRWxlbWVudCIsInNlbGVjdGVkRnJhZ21lbnRGaWxlV2F0Y2hlclVuc3Vic2NyaWJlIiwiZnJhZ21lbnREcm9wZG93bkVsZW1lbnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVND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SSxjQWpCR21CLEVBQXFCLEtBQUVMLEVBQXdCLEtBb0J0RHRCLEVBQWM3SSxZQUNaZ0QsRUFDRXdILEVBQ0EsZ0NBQ0Esa0JBSUUsRUFBd0RsTSxHQUM1RCxTQUFPaUksR0FBVywwQywrREFDaEJrRSxhQUVJbEUsSUFDRmtFLEVBQXlDL0IsRUFBVXRHLHdCQUNqRG1FLEVBQVlqSCxJQUNaLFNBQUNpTCxHQUNDaEIsRUFBMEJnQixFQUMxQmxCLFFBS29COUMsRUFDdEIsR0FBTW1DLEVBQVV6RyxnQkFBZ0JzRSxFQUFZakgsS0FEdEIsTSxjQUN0QixXLGFBQ0EsSyx3QkFGSmlLLEVBQTBCLEVBRzFCRixJLGNBakJHcUIsRUFBdUIsS0FBRU4sRUFBMEIsS0FvQjFEdkIsRUFBYzdJLFlBQ1pnRCxFQUNFMEgsRUFDQSxrQ0FDQSxvQkFJSjdCLEVBQWM3SSxZQUFZOEksRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcclxuICAgIHNoYWRlcnM6IFwiU0hBREVSU1wiXHJcbn0iLCJleHBvcnQgdHlwZSBEcm9wZG93bkl0ZW0gPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBkaXNwbGF5OiBzdHJpbmc7XHJcbn07XHJcblxyXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICBlbXB0eUl0ZW06IHRydWVcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZURyb3Bkb3duID0gKFxyXG4gIC8vaW5pdGlhbFZhbHVlOiBEcm9wZG93bkl0ZW0gfCBudWxsLFxyXG4gIG9uQ2hhbmdlOiAoaXRlbTogRHJvcGRvd25JdGVtIHwgbnVsbCkgPT4gdm9pZCxcclxuICBjbGFzc05hbWU/OiBzdHJpbmcsXHJcbiAgb3B0aW9ucz86IHsgZW1wdHlJdGVtOiBib29sZWFuIH0gLy9wbGFjZWhvbGRlclxyXG4pOiBbXHJcbiAgICBIVE1MU2VsZWN0RWxlbWVudCxcclxuICAgIHtcclxuICAgICAgc2V0SXRlbXM6IChpdGVtczogRHJvcGRvd25JdGVtW10pID0+IHZvaWQ7XHJcbiAgICAgIGdldEl0ZW1zOiAoKSA9PiBEcm9wZG93bkl0ZW1bXTtcclxuICAgICAgc2V0U2VsZWN0ZWRJdGVtQnlJZDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICAgIGdldFNlbGVjdGVkSXRlbTogKCkgPT4gRHJvcGRvd25JdGVtIHwgbnVsbDtcclxuICAgICAgY2xlYXJTZWxlY3Rpb246ICgpID0+IHZvaWQ7XHJcbiAgICB9XHJcbiAgXSA9PiB7XHJcbiAgY29uc3QgY29tYmluZWRPcHRpb25zID0geyAuLi5kZWZhdWx0T3B0aW9ucywgLi4ub3B0aW9ucyB9O1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gYGRyb3Bkb3duLWJhc2UgJHtjbGFzc05hbWV9YDtcclxuXHJcbiAgbGV0IHNlbGVjdGVkSXRlbTogRHJvcGRvd25JdGVtIHwgbnVsbCA9IG51bGw7XHJcbiAgbGV0IGl0ZW1FbGVtZW50czogeyBlbGVtZW50OiBIVE1MT3B0aW9uRWxlbWVudDsgaXRlbTogRHJvcGRvd25JdGVtIH1bXSA9IFtdO1xyXG4gIGNvbnN0IHNldFNlbGVjdGVkSXRlbSA9IChpdGVtOiBEcm9wZG93bkl0ZW0gfCBudWxsKSA9PiB7XHJcbiAgICBzZWxlY3RlZEl0ZW0gPSBpdGVtO1xyXG4gICAgb25DaGFuZ2Uoc2VsZWN0ZWRJdGVtKTtcclxuICB9O1xyXG5cclxuICBlbGVtZW50Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgZm91bmRFbGVtZW50ID0gaXRlbUVsZW1lbnRzLmZpbmQoKGUpID0+IGUuaXRlbS5pZCA9PT0gZWxlbWVudC52YWx1ZSk7XHJcblxyXG4gICAgaWYgKGZvdW5kRWxlbWVudC5pdGVtLmlkKSBzZXRTZWxlY3RlZEl0ZW0oZm91bmRFbGVtZW50Lml0ZW0pO1xyXG4gICAgZWxzZSBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2V0SXRlbXMgPSAoaXRlbXM6IERyb3Bkb3duSXRlbVtdKSA9PiB7XHJcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBpdGVtRWxlbWVudHMubGVuZ3RoID0gMDtcclxuXHJcbiAgICBpZiAoIWl0ZW1zLmZpbmQoKGkpID0+IGkuaWQgPT09IHNlbGVjdGVkSXRlbT8uaWQpKSB7XHJcbiAgICAgIHNldFNlbGVjdGVkSXRlbShudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdJdGVtcyA9IGNvbWJpbmVkT3B0aW9ucy5lbXB0eUl0ZW0gPyBbeyBpZDogXCJcIiwgZGlzcGxheTogXCJcIiB9LCAuLi5pdGVtc10gOiBbLi4uaXRlbXNdO1xyXG4gICAgbmV3SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICBvcHRpb24udmFsdWUgPSBpdGVtLmlkO1xyXG4gICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBpdGVtLmRpc3BsYXk7XHJcbiAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGl0ZW0uaWQgPT09IHNlbGVjdGVkSXRlbT8uaWQ7XHJcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgaXRlbUVsZW1lbnRzLnB1c2goeyBlbGVtZW50OiBvcHRpb24sIGl0ZW0gfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRJdGVtcyA9ICgpID0+IGl0ZW1FbGVtZW50cy5tYXAoKGllKSA9PiBpZS5pdGVtKTtcclxuICBjb25zdCBzZXRTZWxlY3RlZEl0ZW1CeUlkID0gKGlkOiBzdHJpbmcpID0+IHtcclxuICAgIHNldFNlbGVjdGVkSXRlbShudWxsKTtcclxuICAgIGl0ZW1FbGVtZW50cy5mb3JFYWNoKChpZSkgPT4ge1xyXG4gICAgICBpZiAoaWUuaXRlbS5pZCA9PT0gaWQpIHtcclxuICAgICAgICBpZS5lbGVtZW50LnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBzZXRTZWxlY3RlZEl0ZW0oaWUuaXRlbSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWUuZWxlbWVudC5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRTZWxlY3RlZEl0ZW0gPSAoKSA9PiBzZWxlY3RlZEl0ZW07XHJcbiAgY29uc3QgY2xlYXJTZWxlY3Rpb24gPSAoKSA9PiB7XHJcbiAgICBpdGVtRWxlbWVudHMuZm9yRWFjaCgoaWUpID0+IChpZS5lbGVtZW50LnNlbGVjdGVkID0gZmFsc2UpKTtcclxuICAgIHNldFNlbGVjdGVkSXRlbShudWxsKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gW1xyXG4gICAgZWxlbWVudCxcclxuICAgIHtcclxuICAgICAgc2V0SXRlbXMsXHJcbiAgICAgIGdldEl0ZW1zLFxyXG4gICAgICBzZXRTZWxlY3RlZEl0ZW1CeUlkLFxyXG4gICAgICBnZXRTZWxlY3RlZEl0ZW0sXHJcbiAgICAgIGNsZWFyU2VsZWN0aW9uLFxyXG4gICAgfSxcclxuICBdO1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3QgcmVtb3ZlID0gPFQ+KGFycmF5OiBUW10sIGl0ZW06IFQpID0+IHtcclxuICBjb25zdCBpbmRleCA9IGFycmF5LmluZGV4T2YoaXRlbSk7XHJcblxyXG4gIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcclxuZXhwb3J0IGNvbnN0IHV1aWR2NCA9ICgpID0+IHtcclxuICByZXR1cm4gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XHJcbiAgICB2YXIgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCxcclxuICAgICAgdiA9IGMgPT0gXCJ4XCIgPyByIDogKHIgJiAweDMpIHwgMHg4O1xyXG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGhhc1Byb3BlcnR5ID0gPFQgZXh0ZW5kcyB7fSwgUCBleHRlbmRzIFByb3BlcnR5S2V5PihcclxuICBvYmo6IFQsXHJcbiAgcHJvcDogUFxyXG4pOiBvYmogaXMgVCAmIFJlY29yZDxQLCB1bmtub3duPiA9PiB7XHJcbiAgcmV0dXJuIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKTtcclxufTtcclxuIiwiaW1wb3J0IHsgcmVtb3ZlLCB1dWlkdjQgfSBmcm9tICcuLy4uL3V0aWxzJztcclxuZGVjbGFyZSBjb25zdCBhY3F1aXJlVnNDb2RlQXBpOiAoKSA9PiB7XHJcbiAgLy9nZXRTdGF0ZTogKCkgPT4gYW55O1xyXG4gIC8vc2V0U3RhdGU6IChzdGF0ZTogYW55KSA9PiB2b2lkO1xyXG4gIHBvc3RNZXNzYWdlOiAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVxdWVzdCkgPT4gdm9pZDtcclxufTtcclxuZXhwb3J0IGNvbnN0IHZzY29kZUFwaSA9IGFjcXVpcmVWc0NvZGVBcGkoKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlcXVlc3QgPVxyXG4gIHwgeyB0eXBlOiBcImdldFNoYWRlckRvY3VtZW50c1wiLCBpZDogc3RyaW5nLCB9XHJcbiAgfCB7IHR5cGU6IFwiZ2V0RG9jdW1lbnRUZXh0XCIsIGlkOiBzdHJpbmcsIHBheWxvYWQ6IHsgZmlsZU5hbWU6IHN0cmluZyB9IH1cclxuICB8IHsgdHlwZTogXCJzdWJzY3JpYmVUb0RvY3VtZW50VGV4dENoYW5nZVwiLCBwYXlsb2FkOiB7IGZpbGVOYW1lOiBzdHJpbmcgfSB9XHJcbiAgfCB7IHR5cGU6IFwidW5zdWJzY3JpYmVUb0RvY3VtZW50VGV4dENoYW5nZVwiLCBwYXlsb2FkOiB7IGZpbGVOYW1lOiBzdHJpbmcgfSB9O1xyXG5cclxuZXhwb3J0IHR5cGUgVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UgPSB7XHJcbiAgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIjtcclxuICBpZDogc3RyaW5nLFxyXG4gIHBheWxvYWQ6IHsgZmlsZXM6IHsgZmlsZVBhdGg6IHN0cmluZzsgZmlsZU5hbWU6IHN0cmluZyB9W10gfTtcclxufSB8XHJcbnsgdHlwZTogXCJnZXREb2N1bWVudFRleHRcIiwgaWQ6IHN0cmluZywgcGF5bG9hZDogeyBmaWxlTmFtZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcgfSB9IHxcclxueyB0eXBlOiBcIm9uRG9jdW1lbnRUZXh0Q2hhbmdlXCIsIHBheWxvYWQ6IHsgZmlsZVBhdGg6IHN0cmluZywgdGV4dDogc3RyaW5nIH0gfVxyXG5cclxuZXhwb3J0IHR5cGUgVW5zdWJzY3JpYmUgPSAoKSA9PiB2b2lkO1xyXG5cclxudHlwZSBQcm94eVJlc3BvbnNlTGlzdGVuZXIgPSAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgVnNDb2RlQXBpUHJveHkge1xyXG4gIGV2ZW50TGlzdGVuZXJzOiBQcm94eVJlc3BvbnNlTGlzdGVuZXJbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZXZlbnQuZGF0YSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRTaGFkZXJEb2N1bWVudHMoKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlSWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgICB2c2NvZGVBcGkucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiBcImdldFNoYWRlckRvY3VtZW50c1wiLFxyXG4gICAgICBpZDogbWVzc2FnZUlkXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8eyBmaWxlUGF0aDogc3RyaW5nOyBmaWxlTmFtZTogc3RyaW5nIH1bXT4oKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgbGlzdGVuZXIgPSAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcImdldFNoYWRlckRvY3VtZW50c1wiICYmIG1lc3NhZ2UuaWQgPT09IG1lc3NhZ2VJZCkge1xyXG4gICAgICAgICAgcmVzb2x2ZShtZXNzYWdlLnBheWxvYWQuZmlsZXMpO1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0RG9jdW1lbnRUZXh0KGZpbGVOYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IHV1aWR2NCgpO1xyXG5cclxuICAgIHZzY29kZUFwaS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIHR5cGU6IFwiZ2V0RG9jdW1lbnRUZXh0XCIsXHJcbiAgICAgIGlkOiBtZXNzYWdlSWQsXHJcbiAgICAgIHBheWxvYWQ6IHsgZmlsZU5hbWUgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgbGlzdGVuZXIgPSAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcImdldERvY3VtZW50VGV4dFwiICYmIG1lc3NhZ2UuaWQgPT09IG1lc3NhZ2VJZCkge1xyXG4gICAgICAgICAgcmVzb2x2ZShtZXNzYWdlLnBheWxvYWQudGV4dCk7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmVUb0RvY3VtZW50U2F2ZShmaWxlUGF0aDogc3RyaW5nLCBjYWxsYmFjazogKG5ld0NvbnRlbnQ6IHN0cmluZykgPT4gdm9pZCk6IFVuc3Vic2NyaWJlIHtcclxuICAgIHZzY29kZUFwaS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIHR5cGU6IFwic3Vic2NyaWJlVG9Eb2N1bWVudFRleHRDaGFuZ2VcIixcclxuICAgICAgcGF5bG9hZDogeyBmaWxlTmFtZTogZmlsZVBhdGggfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbGlzdGVuZXIgPSAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UpID0+IHtcclxuICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJvbkRvY3VtZW50VGV4dENoYW5nZVwiICYmIG1lc3NhZ2UucGF5bG9hZC5maWxlUGF0aCA9PT0gZmlsZVBhdGgpIHtcclxuICAgICAgICBjYWxsYmFjayhtZXNzYWdlLnBheWxvYWQudGV4dCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbiAgICAgIHZzY29kZUFwaS5wb3N0TWVzc2FnZSh7IHR5cGU6IFwidW5zdWJzY3JpYmVUb0RvY3VtZW50VGV4dENoYW5nZVwiLCBwYXlsb2FkOiB7IGZpbGVOYW1lOiBmaWxlUGF0aCB9IH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyOiBQcm94eVJlc3BvbnNlTGlzdGVuZXIpIHtcclxuICAgIHJlbW92ZSh0aGlzLmV2ZW50TGlzdGVuZXJzLCBsaXN0ZW5lcilcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGNyZWF0ZUZBQnV0dG9uID0gKFxyXG4gIHRleHQ6IHN0cmluZyxcclxuICBjbGFzc05hbWU6IHN0cmluZyxcclxuICBvbkNsaWNrOiAoKSA9PiB2b2lkXHJcbikgPT4ge1xyXG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9uLm9uY2xpY2sgPSBvbkNsaWNrO1xyXG4gIGJ1dHRvbi5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICByZXR1cm4geyBlbGVtZW50OiBidXR0b24gfTtcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IHdpdGhMYWJlbCA9IChcclxuICBlbGVtZW50OiBIVE1MRWxlbWVudCxcclxuICBjbGFzc05hbWU6IHN0cmluZyxcclxuICB0ZXh0OiBzdHJpbmdcclxuKSA9PiB7XHJcbiAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgd3JhcHBlci5jbGFzc05hbWUgPSBgJHtjbGFzc05hbWV9IG9wdGlvbnMtd3JhcHBlcmA7XHJcbiAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgbGFiZWwuY2xhc3NOYW1lID0gXCJvcHRpb25zLWxhYmVsXCI7XHJcbiAgbGFiZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gYCR7ZWxlbWVudC5jbGFzc05hbWV9IG9wdGlvbnMtY29udGVudGA7XHJcbiAgd3JhcHBlci5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgd3JhcHBlci5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICByZXR1cm4gd3JhcHBlcjtcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IGNyZWF0ZURpdiA9IChjbGFzc05hbWU6IHN0cmluZywgY2hpbGRyZW4/OiBIVE1MRWxlbWVudFtdKSA9PiB7XHJcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXYuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIGNoaWxkcmVuPy5mb3JFYWNoKChjKSA9PiBkaXYuYXBwZW5kQ2hpbGQoYykpO1xyXG4gIHJldHVybiBkaXY7XHJcbn07XHJcbiIsImltcG9ydCB7IGNyZWF0ZURpdiB9IGZyb20gXCIuL2NvbW1vblwiO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dCA9IDxUIGV4dGVuZHMgbnVtYmVyW10+KFxyXG4gIGluaXRpYWxWYWx1ZTogVCxcclxuICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBUKSA9PiB2b2lkLFxyXG4gIHJvd3M6IG51bWJlcixcclxuICBjb2x1bW5zOiBudW1iZXIsXHJcbiAgaW5wdXRPcHRpb25zPzogUGFydGlhbDxIVE1MSW5wdXRFbGVtZW50PlxyXG4pOiBbXHJcbiAgSFRNTERpdkVsZW1lbnQsXHJcbiAge1xyXG4gICAgc2V0VmFsdWVzOiAodmFsdWU6IFQpID0+IHZvaWQ7XHJcbiAgICBzZXRSZWFkb25seTogKHJlYWRvbmx5OiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgZ2V0VmFsdWVzOiAoKSA9PiBUO1xyXG4gIH1cclxuXSA9PiB7XHJcbiAgY29uc3QgaW5wdXRHcmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBpbnB1dEdyaWQuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0LWdyaWRcIjtcclxuXHJcbiAgY29uc3QgaXRlbUVsZW1lbnRzOiB7IGVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7IHZhbHVlOiBudW1iZXIgfVtdID0gW107XHJcbiAgY29uc3Qgc2V0VmFsdWVzID0gKG5ld1ZhbHVlczogVCkgPT5cclxuICAgIGl0ZW1FbGVtZW50cy5mb3JFYWNoKChpZSwgaW5kZXgpID0+IChpZS52YWx1ZSA9IG5ld1ZhbHVlc1tpbmRleF0pKTtcclxuICBjb25zdCBnZXRWYWx1ZXMgPSAoKSA9PiBpdGVtRWxlbWVudHMubWFwKChpZSkgPT4gaWUudmFsdWUpIGFzIFQ7XHJcbiAgY29uc3Qgc2V0UmVhZG9ubHkgPSAocmVhZG9ubHk6IGJvb2xlYW4pID0+XHJcbiAgICBpdGVtRWxlbWVudHMuZm9yRWFjaCgoaWUpID0+IChpZS5lbGVtZW50LnJlYWRPbmx5ID0gcmVhZG9ubHkpKTtcclxuXHJcbiAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgcm93czsgcm93KyspIHtcclxuICAgIGNvbnN0IGlucHV0Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGlucHV0Um93LmNsYXNzTmFtZSA9IFwiZWRpdC1pbnB1dC1yb3dcIjtcclxuXHJcbiAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCBjb2x1bW5zOyBjb2x1bW4rKykge1xyXG4gICAgICBjb25zdCBpbmRleCA9IHJvdyAqIGNvbHVtbnMgKyBjb2x1bW47XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gaW5pdGlhbFZhbHVlW2luZGV4XTtcclxuICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0geyBlbGVtZW50OiBpbnB1dCwgdmFsdWUgfTtcclxuICAgICAgT2JqZWN0LmFzc2lnbihpbnB1dCwgaW5wdXRPcHRpb25zKTtcclxuICAgICAgaW5wdXQuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0XCI7XHJcbiAgICAgIGlucHV0LnR5cGUgPSBcIm51bWJlclwiO1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlPy50b1N0cmluZygpO1xyXG4gICAgICBpbnB1dC5vbmlucHV0ID0gKCkgPT4ge1xyXG4gICAgICAgIGl0ZW1FbGVtZW50c1tpbmRleF0udmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpO1xyXG4gICAgICAgIG9uQ2hhbmdlPy4oZ2V0VmFsdWVzKCkpO1xyXG4gICAgICB9O1xyXG4gICAgICBpdGVtRWxlbWVudHMucHVzaChpdGVtRWxlbWVudCk7XHJcbiAgICAgIGlucHV0Um93LmFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgIH1cclxuXHJcbiAgICBpbnB1dEdyaWQuYXBwZW5kQ2hpbGQoaW5wdXRSb3cpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIFtcclxuICAgIGlucHV0R3JpZCxcclxuICAgIHtcclxuICAgICAgc2V0VmFsdWVzLFxyXG4gICAgICBnZXRWYWx1ZXMsXHJcbiAgICAgIHNldFJlYWRvbmx5LFxyXG4gICAgfSxcclxuICBdO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgTWF0cml4MyA9IFtcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlclxyXG5dO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlTWF0cml4MyA9IChvbkNoYW5nZT86IChuZXdWYWx1ZTogTWF0cml4MykgPT4gdm9pZCkgPT5cclxuICBjcmVhdGVNdWx0aU51bWJlcklucHV0PE1hdHJpeDM+KFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSwgb25DaGFuZ2UsIDMsIDMpO1xyXG5cclxuZXhwb3J0IHR5cGUgVmVjdG9yMyA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVZlY3RvcjMgPSAob25DaGFuZ2U/OiAobmV3VmFsdWU6IFZlY3RvcjMpID0+IHZvaWQpID0+XHJcbiAgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxWZWN0b3IzPihbMCwgMCwgMF0sIG9uQ2hhbmdlLCAxLCAzKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZlY3RvcjQgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVZlY3RvcjQgPSAob25DaGFuZ2U/OiAobmV3VmFsdWU6IFZlY3RvcjQpID0+IHZvaWQpID0+XHJcbiAgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxWZWN0b3I0PihbMCwgMCwgMCwgMF0sIG9uQ2hhbmdlLCAxLCA0KTtcclxuIiwiaW1wb3J0IHsgY3JlYXRlRGl2IH0gZnJvbSBcIi4vY29tbW9uXCI7XHJcbmltcG9ydCB7IGNyZWF0ZU11bHRpTnVtYmVySW5wdXQgfSBmcm9tIFwiLi9lZGl0VmVjdG9yM1wiO1xyXG5cclxuY29uc3QgY29sb3JJbnB1dFByb3BzID0ge1xyXG4gIG1pbjogXCIwXCIsXHJcbiAgbWF4OiBcIjFcIixcclxuICBzdGVwOiBcIjAuMVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29sb3I0ID0gW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVDb2xvcjQgPSAoXHJcbiAgb25DaGFuZ2U/OiAobmV3VmFsdWU6IENvbG9yNCkgPT4gdm9pZFxyXG4pOiBbXHJcbiAgSFRNTERpdkVsZW1lbnQsXHJcbiAge1xyXG4gICAgc2V0VmFsdWVzOiAodmFsdWU6IENvbG9yNCkgPT4gdm9pZDtcclxuICAgIHNldFJlYWRvbmx5OiAocmVhZG9ubHk6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBnZXRWYWx1ZXM6ICgpID0+IENvbG9yNDtcclxuICB9XHJcbl0gPT4ge1xyXG4gIGNvbnN0IGluaXRpYWxWYWx1ZSA9IFswLjUsIDAuNSwgMC41LCAxXSBhcyBDb2xvcjQ7XHJcbiAgY29uc3QgY29sb3JEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGNvbG9yRGl2LmNsYXNzTmFtZSA9IFwiZWRpdC1pbnB1dC1jb2xvclwiO1xyXG4gIGNvbnN0IHNldENvbG9yID0gKGNvbG9yOiBDb2xvcjQpID0+IHtcclxuICAgIGNvbG9yRGl2LnN0eWxlLmJhY2tncm91bmQgPSBgcmdiKCR7Y29sb3JbMF0gKiAyNTV9LCR7Y29sb3JbMV0gKiAyNTV9LCR7XHJcbiAgICAgIGNvbG9yWzJdICogMjU1XHJcbiAgICB9LCR7Y29sb3JbM119KWA7XHJcbiAgfTtcclxuXHJcbiAgc2V0Q29sb3IoaW5pdGlhbFZhbHVlKTtcclxuXHJcbiAgY29uc3Qgb25DaGFuZ2VJbnRlcm5hbCA9IChjb2xvcjogQ29sb3I0KSA9PiB7XHJcbiAgICBzZXRDb2xvcihjb2xvcik7XHJcbiAgICBvbkNoYW5nZT8uKGNvbG9yKTtcclxuICB9O1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGNyZWF0ZURpdihcInJvdy13aXRoLWdhcFwiKTtcclxuICBjb25zdCBbZWxlbWVudCwgY29udHJvbGxlcl0gPSBjcmVhdGVNdWx0aU51bWJlcklucHV0PENvbG9yND4oXHJcbiAgICBpbml0aWFsVmFsdWUsXHJcbiAgICBvbkNoYW5nZUludGVybmFsLFxyXG4gICAgMSxcclxuICAgIDQsXHJcbiAgICBjb2xvcklucHV0UHJvcHNcclxuICApO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29sb3JEaXYpO1xyXG4gIHJldHVybiBbY29udGFpbmVyLCBjb250cm9sbGVyXTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENvbG9yMyA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbG9yMyA9IChcclxuICBvbkNoYW5nZT86IChuZXdWYWx1ZTogQ29sb3IzKSA9PiB2b2lkXHJcbik6IFtcclxuICBIVE1MRGl2RWxlbWVudCxcclxuICB7XHJcbiAgICBzZXRWYWx1ZXM6ICh2YWx1ZTogQ29sb3IzKSA9PiB2b2lkO1xyXG4gICAgc2V0UmVhZG9ubHk6IChyZWFkb25seTogYm9vbGVhbikgPT4gdm9pZDtcclxuICAgIGdldFZhbHVlczogKCkgPT4gQ29sb3IzO1xyXG4gIH1cclxuXSA9PiB7XHJcbiAgY29uc3QgaW5pdGlhbFZhbHVlID0gWzAuNSwgMC41LCAwLjVdIGFzIENvbG9yMztcclxuICBjb25zdCBjb2xvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgY29sb3JEaXYuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0LWNvbG9yXCI7XHJcbiAgY29uc3Qgc2V0Q29sb3IgPSAoY29sb3I6IENvbG9yMykgPT4ge1xyXG4gICAgY29sb3JEaXYuc3R5bGUuYmFja2dyb3VuZCA9IGByZ2IoJHtjb2xvclswXSAqIDI1NX0sJHtjb2xvclsxXSAqIDI1NX0sJHtcclxuICAgICAgY29sb3JbMl0gKiAyNTVcclxuICAgIH0sMSlgO1xyXG4gIH07XHJcblxyXG4gIHNldENvbG9yKGluaXRpYWxWYWx1ZSk7XHJcblxyXG4gIGNvbnN0IG9uQ2hhbmdlSW50ZXJuYWwgPSAoY29sb3I6IENvbG9yMykgPT4ge1xyXG4gICAgc2V0Q29sb3IoY29sb3IpO1xyXG4gICAgb25DaGFuZ2U/Lihjb2xvcik7XHJcbiAgfTtcclxuICBjb25zdCBjb250YWluZXIgPSBjcmVhdGVEaXYoXCJyb3ctd2l0aC1nYXBcIik7XHJcbiAgY29uc3QgW2VsZW1lbnQsIGNvbnRyb2xsZXJdID0gY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxDb2xvcjM+KFxyXG4gICAgaW5pdGlhbFZhbHVlLFxyXG4gICAgb25DaGFuZ2VJbnRlcm5hbCxcclxuICAgIDEsXHJcbiAgICA0LFxyXG4gICAgY29sb3JJbnB1dFByb3BzXHJcbiAgKTtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbG9yRGl2KTtcclxuICByZXR1cm4gW2NvbnRhaW5lciwgY29udHJvbGxlcl07XHJcbn07XHJcbiIsImltcG9ydCB7IGNyZWF0ZURpdiB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tbW9uXCI7XHJcbmltcG9ydCB7IGNyZWF0ZURyb3Bkb3duIH0gZnJvbSBcIi4vY29tcG9uZW50cy9kcm9wZG93blwiO1xyXG5pbXBvcnQgeyBjcmVhdGVDb2xvcjQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2VkaXRDb2xvclwiO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVZlY3RvcjMsXHJcbiAgY3JlYXRlVmVjdG9yNCxcclxuICBjcmVhdGVNYXRyaXgzLFxyXG59IGZyb20gXCIuL2NvbXBvbmVudHMvZWRpdFZlY3RvcjNcIjtcclxuaW1wb3J0IHsgd2l0aExhYmVsIH0gZnJvbSBcIi4vY29tcG9uZW50cy93cmFwcGVyc1wiO1xyXG5cclxuLy9jb25zdCBhdHRyaWJ1dGVCdWZmZXJzXHJcblxyXG4vL25hbWUsIHR5cGUgPT4gdmFsdWVcclxuXHJcbmV4cG9ydCB0eXBlIEF0dHJpYnV0ZUJ1ZmZlclR5cGUgPSBcInZlY3RvcjJcIiB8IFwidmVjdG9yM1wiIHwgXCJ2ZWN0b3I0XCI7XHJcbmV4cG9ydCB0eXBlIFVuaWZvcm1UeXBlID0gXCJ2ZWMyXCIgfCBcInZlYzNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb21wb3NpdGVLZXlNYXA8VEtleSwgVFZhbHVlPiB7XHJcbiAgcHJpdmF0ZSBtYXAgPSBuZXcgTWFwPHN0cmluZywgVFZhbHVlPigpO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGtleVNlbGVjdG9yOiAoY29tcG9zaXRlS2V5OiBUS2V5KSA9PiBzdHJpbmcpIHt9XHJcblxyXG4gIGdldChrZXk6IFRLZXkpIHtcclxuICAgIHRoaXMubWFwLmdldCh0aGlzLmtleVNlbGVjdG9yKGtleSkpO1xyXG4gIH1cclxuXHJcbiAgc2V0KGtleTogVEtleSwgdmFsdWU6IFRWYWx1ZSkge1xyXG4gICAgdGhpcy5tYXAuc2V0KHRoaXMua2V5U2VsZWN0b3Ioa2V5KSwgdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLm1hcC5jbGVhcigpO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgYXR0cmlidXRlQnVmZmVycyA9IG5ldyBDb21wb3NpdGVLZXlNYXA8XHJcbiAgeyBuYW1lOiBzdHJpbmc7IGJ1ZmZlclR5cGU6IEF0dHJpYnV0ZUJ1ZmZlclR5cGUgfSxcclxuICBzdHJpbmdcclxuPigoa2V5KSA9PiBgJHtrZXkubmFtZX07JHtrZXkuYnVmZmVyVHlwZX1gKTtcclxuXHJcbmNvbnN0IHVuaWZvcm1zID0gbmV3IENvbXBvc2l0ZUtleU1hcDxcclxuICB7IG5hbWU6IHN0cmluZzsgdW5pZm9ybVR5cGU6IFVuaWZvcm1UeXBlIH0sXHJcbiAgc3RyaW5nXHJcbj4oKGtleSkgPT4gYCR7a2V5Lm5hbWV9OyR7a2V5LnVuaWZvcm1UeXBlfWApO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFwcGVuZFdpdGhTaGFkZXJPcHRpb25zID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgLy9jb21waWxlXHJcbiAgLy9jcmVhdGUgbWFwXHJcblxyXG4gIGVsZW1lbnQuYXBwZW5kQ2hpbGQod2l0aExhYmVsKGNyZWF0ZUNvbG9yNCgpWzBdLCBcIlwiLCBcInVfY29sb3JcIikpO1xyXG4gIGVsZW1lbnQuYXBwZW5kQ2hpbGQod2l0aExhYmVsKGNyZWF0ZVZlY3RvcjQoKVswXSwgXCJcIiwgXCJ1X2RpZmZ1c2VcIikpO1xyXG5cclxuICBjb25zdCBbbWF0M2VsLCBtYXQzY29uXSA9IGNyZWF0ZU1hdHJpeDMoKG5ld3ZhbCkgPT4gY29uc29sZS5sb2cobmV3dmFsKSk7XHJcbiAgY29uc3QgW2VkaWZmLCBjZGlmZl0gPSBjcmVhdGVEcm9wZG93bihcclxuICAgIChzZWwpID0+IHtcclxuICAgICAgaWYgKCFzZWwpIHJldHVybjtcclxuICAgICAgaWYgKHNlbC5pZCA9PT0gXCIwXCIpIHtcclxuICAgICAgICBtYXQzY29uLnNldFJlYWRvbmx5KGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2VsLmlkID09PSBcIjFcIikge1xyXG4gICAgICAgIG1hdDNjb24uc2V0UmVhZG9ubHkodHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcIlwiLFxyXG4gICAgeyBlbXB0eUl0ZW06IGZhbHNlIH1cclxuICApO1xyXG5cclxuICBjZGlmZi5zZXRJdGVtcyhbXHJcbiAgICB7IGlkOiBcIjBcIiwgZGlzcGxheTogXCJDb2xvciBwaWNrZXJcIiB9LFxyXG4gICAgeyBpZDogXCIxXCIsIGRpc3BsYXk6IFwiQ3VzdG9tMlwiIH0sXHJcbiAgXSk7XHJcbiAgY2RpZmYuc2V0U2VsZWN0ZWRJdGVtQnlJZChcIjBcIik7XHJcblxyXG4gIGVsZW1lbnQuYXBwZW5kQ2hpbGQoXHJcbiAgICB3aXRoTGFiZWwoXHJcbiAgICAgIGNyZWF0ZURpdihcImNvbHVtbi13aXRoLWdhcFwiLCBbZWRpZmYsIG1hdDNlbF0pLFxyXG4gICAgICBcIlwiLFxyXG4gICAgICBcImRvYnJlIGRpZmZ1c2VcIlxyXG4gICAgKVxyXG4gICk7XHJcblxyXG4gIGVsZW1lbnQuYXBwZW5kQ2hpbGQoXHJcbiAgICB3aXRoTGFiZWwoXHJcbiAgICAgIGNyZWF0ZURpdihcImNvbHVtbi13aXRoLWdhcFwiLCBbXHJcbiAgICAgICAgY3JlYXRlRHJvcGRvd24oKG5ld0ZyYWdtZW50KSA9PiB7fSlbMF0sXHJcbiAgICAgICAgY3JlYXRlTWF0cml4MygobmV3dmFsKSA9PiBjb25zb2xlLmxvZyhuZXd2YWwpKVswXSxcclxuICAgICAgXSksXHJcbiAgICAgIFwiXCIsXHJcbiAgICAgIFwidV9kaWZmdXNlMlwiXHJcbiAgICApXHJcbiAgKTtcclxuICBlbGVtZW50LmFwcGVuZENoaWxkKFxyXG4gICAgd2l0aExhYmVsKFxyXG4gICAgICBjcmVhdGVEaXYoXCJjb2x1bW4td2l0aC1nYXBcIiwgW1xyXG4gICAgICAgIGNyZWF0ZURyb3Bkb3duKChuZXdGcmFnbWVudCkgPT4ge30pWzBdLFxyXG4gICAgICAgIGNyZWF0ZU1hdHJpeDMoKG5ld3ZhbCkgPT4gY29uc29sZS5sb2cobmV3dmFsKSlbMF0sXHJcbiAgICAgIF0pLFxyXG4gICAgICBcIlwiLFxyXG4gICAgICBcInVfZGlmZnVzZTJcIlxyXG4gICAgKVxyXG4gICk7XHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCBjb21waWxlU2hhZGVyID0gKFxyXG4gIHJlbmRlcmluZ0NvbnRleHQ6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCxcclxuICB0eXBlOiBHTGVudW0sXHJcbiAgc291cmNlOiBzdHJpbmdcclxuKTogV2ViR0xTaGFkZXIgfCB7IGVycm9yOiBzdHJpbmcgfSA9PiB7XHJcbiAgY29uc3Qgc2hhZGVyID0gcmVuZGVyaW5nQ29udGV4dC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgcmVuZGVyaW5nQ29udGV4dC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xyXG4gIHJlbmRlcmluZ0NvbnRleHQuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSByZW5kZXJpbmdDb250ZXh0LmdldFNoYWRlclBhcmFtZXRlcihcclxuICAgIHNoYWRlcixcclxuICAgIHJlbmRlcmluZ0NvbnRleHQuQ09NUElMRV9TVEFUVVNcclxuICApO1xyXG5cclxuICBpZiAocmVzdWx0KSB7XHJcbiAgICByZXR1cm4gc2hhZGVyO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCBlcnJvciA9IHJlbmRlcmluZ0NvbnRleHQuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xyXG4gICAgcmVuZGVyaW5nQ29udGV4dC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGVycm9yLFxyXG4gICAgfTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUHJvZ3JhbSA9IChcclxuICByZW5kZXJpbmdDb250ZXh0OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXHJcbiAgdmVydGV4U2hhZGVyOiBXZWJHTFNoYWRlcixcclxuICBmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXJcclxuKSA9PiB7XHJcbiAgY29uc3QgcHJvZ3JhbSA9IHJlbmRlcmluZ0NvbnRleHQuY3JlYXRlUHJvZ3JhbSgpO1xyXG4gIHJlbmRlcmluZ0NvbnRleHQuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XHJcbiAgcmVuZGVyaW5nQ29udGV4dC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xyXG4gIHJlbmRlcmluZ0NvbnRleHQubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IHJlbmRlcmluZ0NvbnRleHQuZ2V0UHJvZ3JhbVBhcmFtZXRlcihcclxuICAgIHByb2dyYW0sXHJcbiAgICByZW5kZXJpbmdDb250ZXh0LkxJTktfU1RBVFVTXHJcbiAgKTtcclxuXHJcbiAgaWYgKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIHByb2dyYW07XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKFwiY29zIG5pZSBoYWxvXCIpO1xyXG5cclxuICAgIHJlbmRlcmluZ0NvbnRleHQuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgIGBDcmVhdGluZyBwcm9ncmFtIGZhaWxlZDogJHtyZW5kZXJpbmdDb250ZXh0LmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pfWBcclxuICAgICk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIEVhc3lHTEF0dHJpYnV0ZUJ1ZmZlciB7fVxyXG5cclxuZXhwb3J0IGNsYXNzIEVhc3lHTFVuaWZvcm0ge31cclxuXHJcbmV4cG9ydCBjbGFzcyBFYXN5R0xQcm9ncmFtIHt9XHJcbiIsImltcG9ydCB7IHRyYW5zbGF0aW9ucyB9IGZyb20gXCIuLy4uL3RyYW5zbGF0aW9uc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVEcm9wZG93biwgRHJvcGRvd25JdGVtIH0gZnJvbSBcIi4vY29tcG9uZW50cy9kcm9wZG93blwiO1xyXG5pbXBvcnQgeyBVbnN1YnNjcmliZSwgVnNDb2RlQXBpUHJveHkgfSBmcm9tIFwiLi9jb21tdW5pY2F0aW9uUHJveHlcIjtcclxuaW1wb3J0IHsgY3JlYXRlU2VjdGlvblRpdGxlIH0gZnJvbSBcIi4vY29tcG9uZW50cy9jcmVhdGVTZWN0aW9uVGl0bGVcIjtcclxuaW1wb3J0IHsgY3JlYXRlRkFCdXR0b24gYXMgY3JlYXRlQnV0dG9uIH0gZnJvbSBcIi4vY29tcG9uZW50cy9jcmVhdGVGQUJ1dHRvblwiO1xyXG5pbXBvcnQgeyB3aXRoTGFiZWwgfSBmcm9tIFwiLi9jb21wb25lbnRzL3dyYXBwZXJzXCI7XHJcbmltcG9ydCB7XHJcbiAgY3JlYXRlTWF0cml4MyxcclxuICBjcmVhdGVWZWN0b3IzLFxyXG4gIGNyZWF0ZVZlY3RvcjQsXHJcbn0gZnJvbSBcIi4vY29tcG9uZW50cy9lZGl0VmVjdG9yM1wiO1xyXG5pbXBvcnQgeyBhcHBlbmRXaXRoU2hhZGVyT3B0aW9ucyB9IGZyb20gXCIuL3NoYWRlck9wdGlvbnNcIjtcclxuaW1wb3J0IHsgY3JlYXRlRGl2IH0gZnJvbSBcIi4vY29tcG9uZW50cy9jb21tb25cIjtcclxuaW1wb3J0IHsgY29tcGlsZVNoYWRlciwgY3JlYXRlUHJvZ3JhbSB9IGZyb20gXCIuL3dlYmdsX3V0aWxzL3V0aWxzXCI7XHJcbmltcG9ydCB7IGhhc1Byb3BlcnR5IH0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tIFwidXRpbFwiO1xyXG5cclxuZXhwb3J0IHR5cGUgVW5pZm9ybUluZm8gPSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHR5cGU6IHN0cmluZztcclxuICB1cGRhdGU6ICgpID0+IHZvaWQ7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBBdHRyaWJ1dGVCdWZmZXJJbmZvID0ge307XHJcblxyXG5leHBvcnQgdHlwZSBDb21waWxlRXJyb3JzID0gc3RyaW5nW107XHJcbmV4cG9ydCB0eXBlIFNoYWRlckNvbnRyb2xsZXIgPSB7fTtcclxuXHJcbmNvbnN0IGNyZWF0ZVdlYkdMQ2FudmFzID0gKFxyXG4gIGNsYXNzTmFtZTogc3RyaW5nXHJcbiAgLy8gb25TaGFkZXJzQ29tcGlsZWQ6IChwYXlsb2FkOiB7XHJcbiAgLy8gICB1bmlmb3JtczogVW5pZm9ybUluZm9bXTtcclxuICAvLyAgIGF0dHJpYnV0ZUJ1ZmZlcnM6IEF0dHJpYnV0ZUJ1ZmZlckluZm9bXTtcclxuICAvLyAgIC8vZ2V0Q29udGV4dFxyXG4gIC8vICAgLy9yZW5kZXJcclxuICAvLyB9KSA9PiB2b2lkXHJcbik6IFtcclxuICBIVE1MQ2FudmFzRWxlbWVudCxcclxuICB7XHJcbiAgICBjb21waWxlU2hhZGVyczogKFxyXG4gICAgICB2ZXJ0ZXhTaGFkZXJDb250ZW50OiBzdHJpbmcsXHJcbiAgICAgIGZyYWdtZW50U2hhZGVyQ29udGVudDogc3RyaW5nXHJcbiAgICApID0+IENvbXBpbGVFcnJvcnMgfCBTaGFkZXJDb250cm9sbGVyO1xyXG4gIH1cclxuXSA9PiB7XHJcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICBjYW52YXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpO1xyXG4gIGlmICghY29udGV4dCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSB3ZWJnbCBjb250ZXh0XCIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY29tcGlsZVNoYWRlcnMgPSAoXHJcbiAgICB2ZXJ0ZXhTaGFkZXJDb250ZW50OiBzdHJpbmcsXHJcbiAgICBmcmFnbWVudFNoYWRlckNvbnRlbnQ6IHN0cmluZ1xyXG4gICkgPT4ge1xyXG4gICAgY29uc3QgdmVydGV4U2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICAgICAgY29udGV4dCxcclxuICAgICAgY29udGV4dC5WRVJURVhfU0hBREVSLFxyXG4gICAgICB2ZXJ0ZXhTaGFkZXJDb250ZW50XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyID0gY29tcGlsZVNoYWRlcihcclxuICAgICAgY29udGV4dCxcclxuICAgICAgY29udGV4dC5GUkFHTUVOVF9TSEFERVIsXHJcbiAgICAgIGZyYWdtZW50U2hhZGVyQ29udGVudFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgdmVydGV4RXJyb3I6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIGlmIChoYXNQcm9wZXJ0eSh2ZXJ0ZXhTaGFkZXIsIFwiZXJyb3JcIikpIHtcclxuICAgICAgdmVydGV4RXJyb3IgPSB2ZXJ0ZXhTaGFkZXIuZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGZyYWdtZW50RXJyb3I6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIGlmIChoYXNQcm9wZXJ0eShmcmFnbWVudFNoYWRlciwgXCJlcnJvclwiKSkge1xyXG4gICAgICBmcmFnbWVudEVycm9yID0gZnJhZ21lbnRTaGFkZXIuZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZlcnRleEVycm9yIHx8IGZyYWdtZW50RXJyb3IpIHtcclxuICAgICAgcmV0dXJuIFt2ZXJ0ZXhFcnJvciwgZnJhZ21lbnRFcnJvcl07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0oY29udGV4dCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlcik7XHJcblxyXG4gICAgLy9jcmVhdGVDb250cm9sbGVyOTBcclxuXHJcbiAgICAvLyBjb25zdCBudW1Vbmlmb3JtcyA9IGNvbnRleHQuZ2V0UHJvZ3JhbVBhcmFtZXRlcihcclxuICAgIC8vICAgcHJvZ3JhbSxcclxuICAgIC8vICAgY29udGV4dC5BQ1RJVkVfVU5JRk9STVNcclxuICAgIC8vICk7XHJcbiAgICAvLyBjb25zdCB1bmlmb3JtU2V0dGVycyA9IHt9O1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJnZXR0aW5nIHVuaWZvcm1zXCIsIG51bVVuaWZvcm1zKTtcclxuXHJcbiAgICAvLyBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbnVtVW5pZm9ybXM7ICsraWkpIHtcclxuICAgIC8vICAgY29uc3QgdW5pZm9ybUluZm8gPSBjb250ZXh0LmdldEFjdGl2ZVVuaWZvcm0ocHJvZ3JhbSwgaWkpO1xyXG4gICAgLy8gICAvLyBpZiAoaXNCdWlsdEluKHVuaWZvcm1JbmZvKSkge1xyXG4gICAgLy8gICAvLyAgICAgY29udGludWU7XHJcbiAgICAvLyAgIC8vIH1cclxuICAgIC8vICAgbGV0IG5hbWUgPSB1bmlmb3JtSW5mby5uYW1lO1xyXG4gICAgLy8gICBjb25zb2xlLmxvZyhcInVuaWZvcm06XCIsIHVuaWZvcm1JbmZvKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvL3Byb2dyYW0uXHJcbiAgICAvL2dlbmVyYXRlIHByb2dyYW0gaW5mb1xyXG5cclxuICAgIC8vZnJhZ21lbnQ6IHsgZXJyb3JzOiB9XHJcbiAgICAvL2ZyYWdtZW50OiB7IGVycm9yczogfVxyXG5cclxuICAgIC8vZGVsZXRlIHNoYWRlcnNcclxuXHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlPFNoYWRlckNvbnRyb2xsZXI+KHt9KTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gW1xyXG4gICAgY2FudmFzLFxyXG4gICAge1xyXG4gICAgICBjb21waWxlU2hhZGVycyxcclxuICAgIH0sXHJcbiAgXTtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZVZpZXdlciA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCB2c2NvZGVBcGkgPSBuZXcgVnNDb2RlQXBpUHJveHkoKTtcclxuICBjb25zdCB2aWV3ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZXdlclwiKTtcclxuICBjb25zdCB2aWV3ZXJPcHRpb25zID0gY3JlYXRlRGl2KFwidmlld2VyLW9wdGlvbnNcIik7XHJcbiAgY29uc3Qgc2hhZGVyT3B0aW9ucyA9IGNyZWF0ZURpdihcInZpZXdlci1zaGFkZXItb3B0aW9uc1wiKTtcclxuICBjb25zdCBzaGFkZXJDb21waWxhdGlvbkVycm9ycyA9IGNyZWF0ZURpdihcInZpZXdlci1jb250ZW50XCIpO1xyXG4gIHNoYWRlckNvbXBpbGF0aW9uRXJyb3JzLnN0eWxlLmJhY2tncm91bmQgPSBcInJlZFwiO1xyXG4gIGNvbnN0IFt3ZWJHTENhbnZhcywgd2ViR0xDb250cm9sbGVyXSA9IGNyZWF0ZVdlYkdMQ2FudmFzKFwidmlld2VyLWNvbnRlbnRcIik7XHJcblxyXG4gIHZpZXdlci5hcHBlbmRDaGlsZCh3ZWJHTENhbnZhcyk7XHJcbiAgdmlld2VyLmFwcGVuZENoaWxkKHNoYWRlckNvbXBpbGF0aW9uRXJyb3JzKTtcclxuICB2aWV3ZXIuYXBwZW5kQ2hpbGQodmlld2VyT3B0aW9ucyk7XHJcblxyXG4gIGNvbnN0IHNob3dDb250ZW50ID0gKGNvbnRlbnQ6IFwiY2FudmFzXCIgfCBcImVycm9yc1wiKSA9PiB7XHJcbiAgICB3ZWJHTENhbnZhcy5zdHlsZS52aXNpYmlsaXR5ID1cclxuICAgICAgY29udGVudCA9PT0gXCJjYW52YXNcIiA/IFwidmlzaWJsZVwiIDogXCJjb2xsYXBzZVwiO1xyXG4gICAgc2hhZGVyQ29tcGlsYXRpb25FcnJvcnMuc3R5bGUudmlzaWJpbGl0eSA9XHJcbiAgICAgIGNvbnRlbnQgPT09IFwiZXJyb3JzXCIgPyBcInZpc2libGVcIiA6IFwiY29sbGFwc2VcIjtcclxuICB9O1xyXG5cclxuICBsZXQgc2VsZWN0ZWRWZXJ0ZXhGaWxlV2F0Y2hlclVuc3Vic2NyaWJlOiBVbnN1YnNjcmliZSB8IHVuZGVmaW5lZDtcclxuICBsZXQgc2VsZWN0ZWRGcmFnbWVudEZpbGVXYXRjaGVyVW5zdWJzY3JpYmU6IFVuc3Vic2NyaWJlIHwgdW5kZWZpbmVkO1xyXG4gIGxldCBzZWxlY3RlZFZlcnRleENvbnRlbnQ6IHN0cmluZyB8IG51bGw7XHJcbiAgbGV0IHNlbGVjdGVkRnJhZ21lbnRDb250ZW50OiBzdHJpbmcgfCBudWxsO1xyXG5cclxuICBjb25zdCBvblNoYWRlckNvbnRlbnRDaGFuZ2VkID0gKCkgPT4ge1xyXG4gICAgc2hhZGVyT3B0aW9ucy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgY29uc29sZS5sb2coe1xyXG4gICAgICBmcmFnbWVudDogc2VsZWN0ZWRGcmFnbWVudENvbnRlbnQsXHJcbiAgICAgIHZlcnRleDogc2VsZWN0ZWRWZXJ0ZXhDb250ZW50LFxyXG4gICAgfSk7XHJcblxyXG4gICAgYXBwZW5kV2l0aFNoYWRlck9wdGlvbnMoc2hhZGVyT3B0aW9ucyk7XHJcblxyXG4gICAgaWYgKHNlbGVjdGVkRnJhZ21lbnRDb250ZW50ICYmIHNlbGVjdGVkVmVydGV4Q29udGVudCkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB3ZWJHTENvbnRyb2xsZXIuY29tcGlsZVNoYWRlcnMoXHJcbiAgICAgICAgc2VsZWN0ZWRWZXJ0ZXhDb250ZW50LFxyXG4gICAgICAgIHNlbGVjdGVkRnJhZ21lbnRDb250ZW50XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XHJcbiAgICAgICAgc2hhZGVyQ29tcGlsYXRpb25FcnJvcnMuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xyXG4gICAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdCBhcyBzdHJpbmdbXTtcclxuICAgICAgICBzaG93Q29udGVudChcImVycm9yc1wiKTtcclxuICAgICAgICBzaGFkZXJDb21waWxhdGlvbkVycm9ycy5pbm5lclRleHQgPSBlcnJvcnMuam9pbihcIlxcclxcblwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBzaGFkZXJDb250cm9sbGVyID0gcmVzdWx0IGFzIFNoYWRlckNvbnRyb2xsZXI7XHJcbiAgICAgICAgc2hvd0NvbnRlbnQoXCJjYW52YXNcIik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiY2xlYXJcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIGNyZWF0ZURpdihcInZpZXdlci1zaGFkZXJzLXRpdGxlXCIsIFtcclxuICAgICAgY3JlYXRlU2VjdGlvblRpdGxlKHRyYW5zbGF0aW9ucy5zaGFkZXJzLCBcIlwiKS5lbGVtZW50LFxyXG4gICAgICBjcmVhdGVCdXR0b24oXCJTeW5jXCIsIFwidmlld2VyLXJlZnJlc2gtYnV0dG9uXCIsICgpID0+IHtcclxuICAgICAgICB2c2NvZGVBcGkuZ2V0U2hhZGVyRG9jdW1lbnRzKCkudGhlbigoc2QpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGZpbGVzID0gc2QubWFwKChmKSA9PiAoe1xyXG4gICAgICAgICAgICBpZDogZi5maWxlUGF0aCxcclxuICAgICAgICAgICAgZGlzcGxheTogZi5maWxlTmFtZSxcclxuICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICB2ZXJ0ZXhEcm9wZG93bkNvbnRyb2xsZXIuc2V0SXRlbXMoZmlsZXMpO1xyXG4gICAgICAgICAgZnJhZ21lbnREcm9wZG93bkNvbnRyb2xsZXIuc2V0SXRlbXMoZmlsZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KS5lbGVtZW50LFxyXG4gICAgXSlcclxuICApO1xyXG5cclxuICBjb25zdCBbdmVydGV4RHJvcGRvd25FbGVtZW50LCB2ZXJ0ZXhEcm9wZG93bkNvbnRyb2xsZXJdID0gY3JlYXRlRHJvcGRvd24oXHJcbiAgICBhc3luYyAobmV3VmVydGV4KSA9PiB7XHJcbiAgICAgIHNlbGVjdGVkVmVydGV4RmlsZVdhdGNoZXJVbnN1YnNjcmliZT8uKCk7XHJcblxyXG4gICAgICBpZiAobmV3VmVydGV4KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRWZXJ0ZXhGaWxlV2F0Y2hlclVuc3Vic2NyaWJlID0gdnNjb2RlQXBpLnN1YnNjcmliZVRvRG9jdW1lbnRTYXZlKFxyXG4gICAgICAgICAgbmV3VmVydGV4LmlkLFxyXG4gICAgICAgICAgKG5ld0NvbnRlbnQpID0+IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRWZXJ0ZXhDb250ZW50ID0gbmV3Q29udGVudDtcclxuICAgICAgICAgICAgb25TaGFkZXJDb250ZW50Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNlbGVjdGVkVmVydGV4Q29udGVudCA9IG5ld1ZlcnRleFxyXG4gICAgICAgID8gYXdhaXQgdnNjb2RlQXBpLmdldERvY3VtZW50VGV4dChuZXdWZXJ0ZXguaWQpXHJcbiAgICAgICAgOiBcIlwiO1xyXG4gICAgICBvblNoYWRlckNvbnRlbnRDaGFuZ2VkKCk7XHJcbiAgICB9XHJcbiAgKTtcclxuICB2aWV3ZXJPcHRpb25zLmFwcGVuZENoaWxkKFxyXG4gICAgd2l0aExhYmVsKFxyXG4gICAgICB2ZXJ0ZXhEcm9wZG93bkVsZW1lbnQsXHJcbiAgICAgIFwidmlld2VyLXZlcnRleC1zaGFkZXItc2VsZWN0b3JcIixcclxuICAgICAgXCJWZXJ0ZXggU2hhZGVyXCJcclxuICAgIClcclxuICApO1xyXG5cclxuICBjb25zdCBbZnJhZ21lbnREcm9wZG93bkVsZW1lbnQsIGZyYWdtZW50RHJvcGRvd25Db250cm9sbGVyXSA9IGNyZWF0ZURyb3Bkb3duKFxyXG4gICAgYXN5bmMgKG5ld0ZyYWdtZW50KSA9PiB7XHJcbiAgICAgIHNlbGVjdGVkRnJhZ21lbnRGaWxlV2F0Y2hlclVuc3Vic2NyaWJlPy4oKTtcclxuXHJcbiAgICAgIGlmIChuZXdGcmFnbWVudCkge1xyXG4gICAgICAgIHNlbGVjdGVkRnJhZ21lbnRGaWxlV2F0Y2hlclVuc3Vic2NyaWJlID0gdnNjb2RlQXBpLnN1YnNjcmliZVRvRG9jdW1lbnRTYXZlKFxyXG4gICAgICAgICAgbmV3RnJhZ21lbnQuaWQsXHJcbiAgICAgICAgICAobmV3Q29udGVudCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZyYWdtZW50Q29udGVudCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgICAgIG9uU2hhZGVyQ29udGVudENoYW5nZWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZWxlY3RlZEZyYWdtZW50Q29udGVudCA9IG5ld0ZyYWdtZW50XHJcbiAgICAgICAgPyBhd2FpdCB2c2NvZGVBcGkuZ2V0RG9jdW1lbnRUZXh0KG5ld0ZyYWdtZW50LmlkKVxyXG4gICAgICAgIDogXCJcIjtcclxuICAgICAgb25TaGFkZXJDb250ZW50Q2hhbmdlZCgpO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIHdpdGhMYWJlbChcclxuICAgICAgZnJhZ21lbnREcm9wZG93bkVsZW1lbnQsXHJcbiAgICAgIFwidmlld2VyLWZyYWdtZW50LXNoYWRlci1zZWxlY3RvclwiLFxyXG4gICAgICBcIkZyYWdtZW50IFNoYWRlclwiXHJcbiAgICApXHJcbiAgKTtcclxuXHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChzaGFkZXJPcHRpb25zKTtcclxufTtcclxuXHJcbmNyZWF0ZVZpZXdlcigpO1xyXG4iLCJleHBvcnQgY29uc3QgY3JlYXRlU2VjdGlvblRpdGxlID0gKHRleHQ6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xyXG4gIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gYCR7Y2xhc3NOYW1lfSBzZWN0aW9uLXRpdGxlYDtcclxuICByZXR1cm4geyBlbGVtZW50IH07XHJcbn07XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=