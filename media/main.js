!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r,o="SHADERS",a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,u=a.length;i<u;i++,o++)r[o]=a[i];return r},u={emptyItem:!0},c=function(e,t,n){var r=a(a({},u),n),o=document.createElement("select");o.className="dropdown-base "+t;var c=null,l=[],s=function(t){e(c=t)};o.onchange=function(){var e=l.find((function(e){return e.item.id===o.value}));e.item.id?s(e.item):s(null)};return[o,{setItems:function(e){o.innerHTML="",l.length=0,e.find((function(e){return e.id===(null==c?void 0:c.id)}))||s(null),(r.emptyItem?i([{id:"",display:""}],e):i(e)).forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.display,t.selected=e.id===(null==c?void 0:c.id),o.appendChild(t),l.push({element:t,item:e})}))},getItems:function(){return l.map((function(e){return e.item}))},setSelectedItemById:function(e){s(null),l.forEach((function(t){t.item.id===e?(t.element.selected=!0,s(t.item)):t.element.selected=!1}))},getSelectedItem:function(){return c},clearSelection:function(){l.forEach((function(e){return e.element.selected=!1})),s(null)}}]},l=function(e,t){return e.substring(0,e.length-t)},s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},f=function(e,t){return e.hasOwnProperty(t)},d=acquireVsCodeApi(),p=function(){function e(){var e=this;this.eventListeners=[],window.addEventListener("message",(function(t){e.eventListeners.forEach((function(e){return e(t.data)}))}))}return e.prototype.getShaderDocuments=function(){var e=this,t=s();return d.postMessage({type:"getShaderDocuments",id:t}),new Promise((function(n){var r=function(o){"getShaderDocuments"===o.type&&o.id===t&&(n(o.payload.files),e.removeListener(r))};e.eventListeners.push(r)}))},e.prototype.getDocumentText=function(e){var t=this,n=s();return d.postMessage({type:"getDocumentText",id:n,payload:{fileName:e}}),new Promise((function(e){var r=function(o){"getDocumentText"===o.type&&o.id===n&&(e(o.payload.text),t.removeListener(r))};t.eventListeners.push(r)}))},e.prototype.subscribeToDocumentSave=function(e,t){var n=this;d.postMessage({type:"subscribeToDocumentTextChange",payload:{fileName:e}});var r=function(n){"onDocumentTextChange"===n.type&&n.payload.filePath===e&&t(n.payload.text)};return this.eventListeners.push(r),function(){n.removeListener(r),d.postMessage({type:"unsubscribeToDocumentTextChange",payload:{fileName:e}})}},e.prototype.removeListener=function(e){var t,n,r;t=this.eventListeners,n=e,(r=t.indexOf(n))>-1&&t.splice(r,1)},e}(),m=function(e,t,n){var r=document.createElement("button");return r.onclick=n,r.className=t,r.textContent=e,{element:r}},v=function(e,t,n){var r=document.createElement("div");r.className=t+" options-wrapper";var o=document.createElement("label");return o.className="options-label",o.textContent=n,e.className=e.className+" options-content",r.appendChild(o),r.appendChild(e),r},h=function(e,t,n,r,o){var a=document.createElement("div");a.className="edit-input-grid";for(var i=[],u=function(){return i.map((function(e){return e.value}))},c=0;c<n;c++){var l=document.createElement("div");l.className="edit-input-row";for(var s=function(n){var a=c*r+n,s=e[a],f=document.createElement("input"),d={element:f,value:s};Object.assign(f,o),f.className="edit-input",f.type="number",f.value=null==s?void 0:s.toString(),f.oninput=function(){i[a].value=Number(f.value),null==t||t(u())},i.push(d),l.appendChild(f)},f=0;f<r;f++)s(f);a.appendChild(l)}return[a,{setValues:function(e){return i.forEach((function(t,n){t.value=e[n],t.element.value=t.value.toString()}))},getValues:u,setReadonly:function(e){return i.forEach((function(t){return t.element.readOnly=e}))}}]},y=function(e,t){var n=document.createElement("div");return n.className=e,null==t||t.forEach((function(e){return n.appendChild(e)})),n},g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b={min:"0",max:"1",step:"0.1"},x=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,u=a.length;i<u;i++,o++)r[o]=a[i];return r};!function(e){e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4"}(r||(r={}));var E=function(e,t,n){switch(e){case r.FLOAT_VEC2:return function(e){return t.uniform2f.apply(t,x([n],e))};case r.FLOAT_VEC3:return function(e){return t.uniform3f.apply(t,x([n],e))};case r.FLOAT_VEC4:return function(e){return t.uniform4f.apply(t,x([n],e))};default:!function(e){throw new Error("Unhandled union member: "+JSON.stringify(e))}(e)}},w=function(){var e=document.createElement("div");return e.className="unsupported-error",e.innerText="Not supported uniform",e},S=function(e){var t=c((function(t){t&&(Object.values(e).forEach((function(e){return e.element.classList.add("hidden")})),e[t.id].element.classList.remove("hidden"))}),"",{emptyItem:!1}),n=t[0],r=t[1];return r.setItems(Object.entries(e).map((function(e){return{id:e[0],display:e[1].display}}))),r.setSelectedItemById("custom"),n},C=function(e){var t=h([0,0],e,1,2),n=t[0];return t[1].setValues([0,0]),n},T=function(e){var t=h([0,0,0],e,1,3),n=t[0];t[1].setValues([0,0,0]);var r=function(e){var t=[.5,.5,.5],n=document.createElement("div");n.className="edit-input-color";var r=function(e){n.style.background="rgb("+255*e[0]+","+255*e[1]+","+255*e[2]+",1)"};r(t);var o=y("row-with-gap"),a=h(t,(function(t){r(t),null==e||e(t)}),1,3,b),i=a[0],u=a[1];return o.appendChild(i),o.appendChild(n),[o,g(g({},u),{setValues:function(e){u.setValues(e),r(e)}})]}(e),o=r[0];r[1].setValues([1,0,0]);var a=S({custom:{display:"Custom",element:n},color:{display:"Color",element:o}});return y("column-with-gap",[a,n,o])},O=function(e){var t=h([0,0,0,0],e,1,4),n=t[0];t[1].setValues([0,0,0,0]);var r=function(e){var t=[.5,.5,.5,1],n=document.createElement("div");n.className="edit-input-color";var r=function(e){n.style.background="rgb("+255*e[0]+","+255*e[1]+","+255*e[2]+","+e[3]+")"};r(t);var o=y("row-with-gap"),a=h(t,(function(t){r(t),null==e||e(t)}),1,4,b),i=a[0],u=a[1];return o.appendChild(i),o.appendChild(n),[o,g(g({},u),{setValues:function(e){u.setValues(e),r(e)}})]}(e),o=r[0];r[1].setValues([1,0,0,1]);var a=S({custom:{display:"Custom",element:n},color:{display:"Color",element:o}});return y("column-with-gap",[a,n,o])},L=function(){function e(e){this.keySelector=e,this.map=new Map}return e.prototype.get=function(e){return this.map.get(this.keySelector(e))},e.prototype.set=function(e,t){this.map.set(this.keySelector(e),t)},e.prototype.clear=function(){this.map.clear()},e}(),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},V=new L((function(e){return e.name+";"+e.type})),N=function(e,t){t.uniforms.map((function(e){var n=V.get(A({},e));if(n)return n;var o=v(function(e,t){switch(e.type){case r.FLOAT_VEC2:return C((function(n){e.update(n),t()}));case r.FLOAT_VEC3:return T((function(n){e.update(n),t()}));case r.FLOAT_VEC4:return O((function(n){e.update(n),t()}));default:return w()}}(e,t.render),"",e.name);return V.set(A({},e),o),o})).forEach((function(t){return e.appendChild(t)}))},P=function(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;var o=e.getShaderInfoLog(r);return e.deleteShader(r),{error:o}},_=function(e){var t=document.createElement("canvas");t.className=e;var n=t.getContext("webgl");if(!n)throw new Error("Unable to create webgl context");return[t,{compileShaders:function(e,t){var r=P(n,n.VERTEX_SHADER,e),o=P(n,n.FRAGMENT_SHADER,t),a=void 0;f(r,"error")&&(a=l(r.error,1));var i=void 0;if(f(o,"error")&&(i=l(o.error,1)),a||i)return[a,i];var u=function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;throw console.log("cos nie halo"),e.deleteProgram(r),new Error("Creating program failed: "+e.getProgramInfoLog(r))}(n,r,o);return{render:function(){console.log("rendering")},uniforms:function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[],o=0;o<n;++o){var a=e.getActiveUniform(t,o),i=e.getUniformLocation(t,a.name),u=E(a.type,e,i);r.push({name:a.name,type:a.type,update:u})}return r}(n,u)}}}]},D=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},I=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};D(void 0,void 0,void 0,(function(){var e,t,n,r,a,i,u,l,s,f,d,h,g,b,x,E,w,S,C,T;return I(this,(function(O){var L,A,V;return e=new p,t=document.getElementById("viewer"),n=y("viewer-options"),r=y("viewer-shader-options"),a=y("viewer-content shader-errors"),i=_("viewer-content"),u=i[0],l=i[1],t.appendChild(u),t.appendChild(a),t.appendChild(n),s=function(e){u.style.visibility="canvas"===e?"visible":"collapse",a.style.visibility="errors"===e?"visible":"collapse"},b=function(){if(r.innerHTML="",g&&h){var e=l.compileShaders(h,g);if(Array.isArray(e)){s("errors");var t=e,n=t[0],o=t[1],i=[];n&&i.push("VERTEX SHADER:",n),o&&i.push("FRAGMENT SHADER:",o),a.innerText=i.join("\r\n")}else s("canvas"),N(r,e)}else s("none")},n.appendChild(y("viewer-shaders-title",[(L=o,A="",V=document.createElement("h3"),V.textContent=L,V.className=A+" section-title",{element:V}).element,m("Sync","viewer-refresh-button",(function(){e.getShaderDocuments().then((function(e){var t=e.map((function(e){return{id:e.filePath,display:e.fileName}}));w.setItems(t),T.setItems(t)}))})).element])),x=c((function(t){return D(void 0,void 0,void 0,(function(){var n;return I(this,(function(r){switch(r.label){case 0:return null==f||f(),t&&(f=e.subscribeToDocumentSave(t.id,(function(e){h=e,b()}))),t?[4,e.getDocumentText(t.id)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return h=n,b(),[2]}}))}))})),E=x[0],w=x[1],n.appendChild(v(E,"viewer-vertex-shader-selector","Vertex Shader")),S=c((function(t){return D(void 0,void 0,void 0,(function(){var n;return I(this,(function(r){switch(r.label){case 0:return null==d||d(),t&&(d=e.subscribeToDocumentSave(t.id,(function(e){g=e,b()}))),t?[4,e.getDocumentText(t.id)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return g=n,b(),[2]}}))}))})),C=S[0],T=S[1],n.appendChild(v(C,"viewer-fragment-shader-selector","Fragment Shader")),n.appendChild(r),[2]}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyYW5zbGF0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL3VuaWZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL2Ryb3Bkb3duLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbW11bmljYXRpb25Qcm94eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvY3JlYXRlRkFCdXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL3dyYXBwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9uZW50cy9lZGl0VmVjdG9yMy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvY29tbW9uLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9uZW50cy9lZGl0Q29sb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci91bmlmb3JtQ29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9zaXRlS2V5TWFwLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvc2hhZGVyT3B0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL3dlYmdsX3V0aWxzL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY3JlYXRlV2ViR0xDYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvY3JlYXRlU2VjdGlvblRpdGxlLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVW5pZm9ybVR5cGUiLCJ0cmFuc2xhdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsImVtcHR5SXRlbSIsImNyZWF0ZURyb3Bkb3duIiwib25DaGFuZ2UiLCJjbGFzc05hbWUiLCJvcHRpb25zIiwiY29tYmluZWRPcHRpb25zIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNlbGVjdGVkSXRlbSIsIml0ZW1FbGVtZW50cyIsInNldFNlbGVjdGVkSXRlbSIsIml0ZW0iLCJvbmNoYW5nZSIsImZvdW5kRWxlbWVudCIsImZpbmQiLCJlIiwiaWQiLCJzZXRJdGVtcyIsIml0ZW1zIiwiaW5uZXJIVE1MIiwibGVuZ3RoIiwiZGlzcGxheSIsImZvckVhY2giLCJvcHRpb24iLCJ0ZXh0Q29udGVudCIsInNlbGVjdGVkIiwiYXBwZW5kQ2hpbGQiLCJwdXNoIiwiZ2V0SXRlbXMiLCJtYXAiLCJpZSIsInNldFNlbGVjdGVkSXRlbUJ5SWQiLCJnZXRTZWxlY3RlZEl0ZW0iLCJjbGVhclNlbGVjdGlvbiIsInJlbW92ZUxhc3QiLCJ0ZXh0IiwiY291bnQiLCJzdWJzdHJpbmciLCJ1dWlkdjQiLCJyZXBsYWNlIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiaGFzUHJvcGVydHkiLCJvYmoiLCJwcm9wIiwiYWNxdWlyZVZzQ29kZUFwaSIsImV2ZW50TGlzdGVuZXJzIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwibGlzdGVuZXIiLCJkYXRhIiwiZ2V0U2hhZGVyRG9jdW1lbnRzIiwibWVzc2FnZUlkIiwicG9zdE1lc3NhZ2UiLCJ0eXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJtZXNzYWdlIiwicGF5bG9hZCIsImZpbGVzIiwicmVtb3ZlTGlzdGVuZXIiLCJnZXREb2N1bWVudFRleHQiLCJmaWxlTmFtZSIsInN1YnNjcmliZVRvRG9jdW1lbnRTYXZlIiwiZmlsZVBhdGgiLCJjYWxsYmFjayIsInRoaXMiLCJhcnJheSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZUZBQnV0dG9uIiwib25DbGljayIsImJ1dHRvbiIsIm9uY2xpY2siLCJ3aXRoTGFiZWwiLCJ3cmFwcGVyIiwibGFiZWwiLCJjcmVhdGVNdWx0aU51bWJlcklucHV0IiwiaW5pdGlhbFZhbHVlIiwicm93cyIsImNvbHVtbnMiLCJpbnB1dE9wdGlvbnMiLCJpbnB1dEdyaWQiLCJnZXRWYWx1ZXMiLCJyb3ciLCJpbnB1dFJvdyIsImNvbHVtbiIsImlucHV0IiwiaXRlbUVsZW1lbnQiLCJhc3NpZ24iLCJvbmlucHV0IiwiTnVtYmVyIiwic2V0VmFsdWVzIiwibmV3VmFsdWVzIiwic2V0UmVhZG9ubHkiLCJyZWFkb25seSIsInJlYWRPbmx5IiwiY3JlYXRlRGl2IiwiY2hpbGRyZW4iLCJkaXYiLCJjb2xvcklucHV0UHJvcHMiLCJtaW4iLCJtYXgiLCJzdGVwIiwiZ2V0VW5pZm9ybVNldHRlciIsImNvbnRleHQiLCJsb2NhdGlvbiIsIkZMT0FUX1ZFQzIiLCJ1bmlmb3JtMmYiLCJGTE9BVF9WRUMzIiwidW5pZm9ybTNmIiwiRkxPQVRfVkVDNCIsInVuaWZvcm00ZiIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImFzc2VydE5ldmVyIiwiY3JlYXRlVW5pZm9ybU5vdFN1cHBvcnRlZCIsImlubmVyVGV4dCIsImNyZWF0ZVVuaWZvcm1TZWxlY3Rpb24iLCJlbGVtZW50cyIsInZhbHVlcyIsIm9lIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwib3B0aW9uc0VsZW1lbnQiLCJvcHRpb25zQ29udHJvbGxlciIsImVudHJpZXMiLCJjcmVhdGVVbmlmb3JtRm9yVmVjMiIsInVwZGF0ZSIsImN1c3RvbUVsZW1lbnQiLCJjcmVhdGVVbmlmb3JtRm9yVmVjMyIsImNvbG9yRGl2Iiwic2V0Q29sb3IiLCJjb2xvciIsInN0eWxlIiwiYmFja2dyb3VuZCIsImNvbnRhaW5lciIsImNvbnRyb2xsZXIiLCJjcmVhdGVDb2xvcjMiLCJjb2xvckVsZW1lbnQiLCJjdXN0b20iLCJjcmVhdGVVbmlmb3JtRm9yVmVjNCIsImNyZWF0ZUNvbG9yNCIsImtleVNlbGVjdG9yIiwiTWFwIiwic2V0IiwiY2xlYXIiLCJ1bmlmb3Jtc0NhY2hlIiwiQ29tcG9zaXRlS2V5TWFwIiwiYXBwZW5kV2l0aFNoYWRlck9wdGlvbnMiLCJzaGFkZXJDb250cm9sbGVyIiwidW5pZm9ybXMiLCJ1bmlmb3JtIiwiY29tcG9uZW50RnJvbUNhY2hlIiwiY29tcG9uZW50IiwidW5pZm9ybUluZm8iLCJyZW5kZXIiLCJjcmVhdGVVbmlmb3JtQ29tcG9uZW50IiwiY29tcGlsZVNoYWRlciIsInJlbmRlcmluZ0NvbnRleHQiLCJzb3VyY2UiLCJzaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJzaGFkZXJTb3VyY2UiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImVycm9yIiwiZ2V0U2hhZGVySW5mb0xvZyIsImRlbGV0ZVNoYWRlciIsImNyZWF0ZVdlYkdMQ2FudmFzIiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsImNvbXBpbGVTaGFkZXJzIiwidmVydGV4U2hhZGVyQ29udGVudCIsImZyYWdtZW50U2hhZGVyQ29udGVudCIsInZlcnRleFNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJmcmFnbWVudFNoYWRlciIsIkZSQUdNRU5UX1NIQURFUiIsInZlcnRleEVycm9yIiwidW5kZWZpbmVkIiwiZnJhZ21lbnRFcnJvciIsInByb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJjb25zb2xlIiwibG9nIiwiZGVsZXRlUHJvZ3JhbSIsImdldFByb2dyYW1JbmZvTG9nIiwibnVtVW5pZm9ybXMiLCJBQ1RJVkVfVU5JRk9STVMiLCJyZXN1bHQiLCJnZXRBY3RpdmVVbmlmb3JtIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwiZ2VuZXJhdGVVbmlmb3JtSW5mb3MiLCJ2c2NvZGVBcGkiLCJ2aWV3ZXIiLCJnZXRFbGVtZW50QnlJZCIsInZpZXdlck9wdGlvbnMiLCJzaGFkZXJPcHRpb25zIiwic2hhZGVyQ29tcGlsYXRpb25FcnJvcnMiLCJ3ZWJHTENhbnZhcyIsIndlYkdMQ29udHJvbGxlciIsInNob3dDb250ZW50IiwiY29udGVudCIsInZpc2liaWxpdHkiLCJvblNoYWRlckNvbnRlbnRDaGFuZ2VkIiwic2VsZWN0ZWRGcmFnbWVudENvbnRlbnQiLCJzZWxlY3RlZFZlcnRleENvbnRlbnQiLCJBcnJheSIsImlzQXJyYXkiLCJ2ZXJ0ZXhTaGFkZXJFcnJvcnMiLCJmcmFnbWVudFNoYWRlckVycm9ycyIsImVycm9ycyIsImpvaW4iLCJ0aGVuIiwic2QiLCJmIiwidmVydGV4RHJvcGRvd25Db250cm9sbGVyIiwiZnJhZ21lbnREcm9wZG93bkNvbnRyb2xsZXIiLCJuZXdWZXJ0ZXgiLCJzZWxlY3RlZFZlcnRleEZpbGVXYXRjaGVyVW5zdWJzY3JpYmUiLCJuZXdDb250ZW50IiwidmVydGV4RHJvcGRvd25FbGVtZW50IiwibmV3RnJhZ21lbnQiLCJzZWxlY3RlZEZyYWdtZW50RmlsZVdhdGNoZXJVbnN1YnNjcmliZSIsImZyYWdtZW50RHJvcGRvd25FbGVtZW50Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFB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IG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcclxuICAgIHNoYWRlcnM6IFwiU0hBREVSU1wiXHJcbn0iLCJpbXBvcnQgeyBhc3NlcnROZXZlciB9IGZyb20gXCIuLy4uL3V0aWxzXCI7XHJcbmltcG9ydCB7IFZlY3RvcjIsIFZlY3RvcjMsIFZlY3RvcjQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2VkaXRWZWN0b3IzXCI7XHJcbmltcG9ydCB7IENvbG9yMywgQ29sb3I0IH0gZnJvbSBcIi4vY29tcG9uZW50cy9lZGl0Q29sb3JcIjtcclxuZXhwb3J0IGVudW0gVW5pZm9ybVR5cGUge1xyXG4gIEZMT0FUX1ZFQzIgPSAzNTY2NCxcclxuICBGTE9BVF9WRUMzID0gMzU2NjUsXHJcbiAgRkxPQVRfVkVDNCA9IDM1NjY2LFxyXG59XHJcblxyXG4vLzUxMjAgKEJZVEUpLCA1MTIxIChVTlNJR05FRF9CWVRFKSwgNTEyMiAoU0hPUlQpLCA1MTIzIChVTlNJR05FRF9TSE9SVCksIDUxMjQgKElOVCksXHJcbi8vIDUxMjUgKFVOU0lHTkVEX0lOVCksIDUxMjYgKEZMT0FUKSwgMzU2NjQgKEZMT0FUX1ZFQzIpLFxyXG4vLyAsIDM1NjY3IChJTlRfVkVDMiksIDM1NjY4IChJTlRfVkVDMyksIDM1NjY5IChJTlRfVkVDNCksIDM1NjcwIChCT09MKSwgMzU2NzEgKEJPT0xfVkVDMiksIDM1NjcyIChCT09MX1ZFQzMpLCAzNTY3MyAoQk9PTF9WRUM0KSwgMzU2NzQgKEZMT0FUX01BVDIpLCAzNTY3NSAoRkxPQVRfTUFUMyksIDM1Njc2IChGTE9BVF9NQVQ0KSwgYW5kIDM1Njc4IChTQU1QTEVSXzJEKS5cclxuXHJcbmV4cG9ydCB0eXBlIFVuaWZvcm1JbmZvID1cclxuICB8IHtcclxuICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICB0eXBlOiBVbmlmb3JtVHlwZS5GTE9BVF9WRUMyO1xyXG4gICAgICB1cGRhdGU6ICh2YWx1ZTogVmVjdG9yMikgPT4gdm9pZDtcclxuICAgIH1cclxuICB8IHtcclxuICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICB0eXBlOiBVbmlmb3JtVHlwZS5GTE9BVF9WRUMzO1xyXG4gICAgICB1cGRhdGU6ICh2YWx1ZTogVmVjdG9yMyB8IENvbG9yMykgPT4gdm9pZDtcclxuICAgIH1cclxuICB8IHtcclxuICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICB0eXBlOiBVbmlmb3JtVHlwZS5GTE9BVF9WRUM0O1xyXG4gICAgICB1cGRhdGU6ICh2YWx1ZTogVmVjdG9yNCB8IENvbG9yNCkgPT4gdm9pZDtcclxuICAgIH07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VW5pZm9ybVNldHRlciA9IChcclxuICB0eXBlOiBVbmlmb3JtVHlwZSxcclxuICBjb250ZXh0OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXHJcbiAgbG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uXHJcbik6ICgodmFsdWU6IGFueSkgPT4gdm9pZCkgPT4ge1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSBVbmlmb3JtVHlwZS5GTE9BVF9WRUMyOlxyXG4gICAgICByZXR1cm4gKHZhbHVlOiBWZWN0b3IyKSA9PiBjb250ZXh0LnVuaWZvcm0yZihsb2NhdGlvbiwgLi4udmFsdWUpO1xyXG4gICAgY2FzZSBVbmlmb3JtVHlwZS5GTE9BVF9WRUMzOlxyXG4gICAgICByZXR1cm4gKHZhbHVlOiBWZWN0b3IzKSA9PiBjb250ZXh0LnVuaWZvcm0zZihsb2NhdGlvbiwgLi4udmFsdWUpO1xyXG4gICAgY2FzZSBVbmlmb3JtVHlwZS5GTE9BVF9WRUM0OlxyXG4gICAgICByZXR1cm4gKHZhbHVlOiBWZWN0b3I0KSA9PiBjb250ZXh0LnVuaWZvcm00Zihsb2NhdGlvbiwgLi4udmFsdWUpO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgYXNzZXJ0TmV2ZXIodHlwZSk7XHJcbiAgfVxyXG59O1xyXG4iLCJleHBvcnQgdHlwZSBEcm9wZG93bkl0ZW0gPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBkaXNwbGF5OiBzdHJpbmc7XHJcbn07XHJcblxyXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICBlbXB0eUl0ZW06IHRydWVcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZURyb3Bkb3duID0gKFxyXG4gIC8vaW5pdGlhbFZhbHVlOiBEcm9wZG93bkl0ZW0gfCBudWxsLFxyXG4gIG9uQ2hhbmdlOiAoaXRlbTogRHJvcGRvd25JdGVtIHwgbnVsbCkgPT4gdm9pZCxcclxuICBjbGFzc05hbWU/OiBzdHJpbmcsXHJcbiAgb3B0aW9ucz86IHsgZW1wdHlJdGVtOiBib29sZWFuIH0gLy9wbGFjZWhvbGRlclxyXG4pOiBbXHJcbiAgICBIVE1MU2VsZWN0RWxlbWVudCxcclxuICAgIHtcclxuICAgICAgc2V0SXRlbXM6IChpdGVtczogRHJvcGRvd25JdGVtW10pID0+IHZvaWQ7XHJcbiAgICAgIGdldEl0ZW1zOiAoKSA9PiBEcm9wZG93bkl0ZW1bXTtcclxuICAgICAgc2V0U2VsZWN0ZWRJdGVtQnlJZDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICAgIGdldFNlbGVjdGVkSXRlbTogKCkgPT4gRHJvcGRvd25JdGVtIHwgbnVsbDtcclxuICAgICAgY2xlYXJTZWxlY3Rpb246ICgpID0+IHZvaWQ7XHJcbiAgICB9XHJcbiAgXSA9PiB7XHJcbiAgY29uc3QgY29tYmluZWRPcHRpb25zID0geyAuLi5kZWZhdWx0T3B0aW9ucywgLi4ub3B0aW9ucyB9O1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gYGRyb3Bkb3duLWJhc2UgJHtjbGFzc05hbWV9YDtcclxuXHJcbiAgbGV0IHNlbGVjdGVkSXRlbTogRHJvcGRvd25JdGVtIHwgbnVsbCA9IG51bGw7XHJcbiAgbGV0IGl0ZW1FbGVtZW50czogeyBlbGVtZW50OiBIVE1MT3B0aW9uRWxlbWVudDsgaXRlbTogRHJvcGRvd25JdGVtIH1bXSA9IFtdO1xyXG4gIGNvbnN0IHNldFNlbGVjdGVkSXRlbSA9IChpdGVtOiBEcm9wZG93bkl0ZW0gfCBudWxsKSA9PiB7XHJcbiAgICBzZWxlY3RlZEl0ZW0gPSBpdGVtO1xyXG4gICAgb25DaGFuZ2Uoc2VsZWN0ZWRJdGVtKTtcclxuICB9O1xyXG5cclxuICBlbGVtZW50Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgZm91bmRFbGVtZW50ID0gaXRlbUVsZW1lbnRzLmZpbmQoKGUpID0+IGUuaXRlbS5pZCA9PT0gZWxlbWVudC52YWx1ZSk7XHJcblxyXG4gICAgaWYgKGZvdW5kRWxlbWVudC5pdGVtLmlkKSBzZXRTZWxlY3RlZEl0ZW0oZm91bmRFbGVtZW50Lml0ZW0pO1xyXG4gICAgZWxzZSBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2V0SXRlbXMgPSAoaXRlbXM6IERyb3Bkb3duSXRlbVtdKSA9PiB7XHJcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBpdGVtRWxlbWVudHMubGVuZ3RoID0gMDtcclxuXHJcbiAgICBpZiAoIWl0ZW1zLmZpbmQoKGkpID0+IGkuaWQgPT09IHNlbGVjdGVkSXRlbT8uaWQpKSB7XHJcbiAgICAgIHNldFNlbGVjdGVkSXRlbShudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdJdGVtcyA9IGNvbWJpbmVkT3B0aW9ucy5lbXB0eUl0ZW0gPyBbeyBpZDogXCJcIiwgZGlzcGxheTogXCJcIiB9LCAuLi5pdGVtc10gOiBbLi4uaXRlbXNdO1xyXG4gICAgbmV3SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICBvcHRpb24udmFsdWUgPSBpdGVtLmlkO1xyXG4gICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBpdGVtLmRpc3BsYXk7XHJcbiAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGl0ZW0uaWQgPT09IHNlbGVjdGVkSXRlbT8uaWQ7XHJcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgaXRlbUVsZW1lbnRzLnB1c2goeyBlbGVtZW50OiBvcHRpb24sIGl0ZW0gfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRJdGVtcyA9ICgpID0+IGl0ZW1FbGVtZW50cy5tYXAoKGllKSA9PiBpZS5pdGVtKTtcclxuICBjb25zdCBzZXRTZWxlY3RlZEl0ZW1CeUlkID0gKGlkOiBzdHJpbmcpID0+IHtcclxuICAgIHNldFNlbGVjdGVkSXRlbShudWxsKTtcclxuICAgIGl0ZW1FbGVtZW50cy5mb3JFYWNoKChpZSkgPT4ge1xyXG4gICAgICBpZiAoaWUuaXRlbS5pZCA9PT0gaWQpIHtcclxuICAgICAgICBpZS5lbGVtZW50LnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBzZXRTZWxlY3RlZEl0ZW0oaWUuaXRlbSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWUuZWxlbWVudC5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRTZWxlY3RlZEl0ZW0gPSAoKSA9PiBzZWxlY3RlZEl0ZW07XHJcbiAgY29uc3QgY2xlYXJTZWxlY3Rpb24gPSAoKSA9PiB7XHJcbiAgICBpdGVtRWxlbWVudHMuZm9yRWFjaCgoaWUpID0+IChpZS5lbGVtZW50LnNlbGVjdGVkID0gZmFsc2UpKTtcclxuICAgIHNldFNlbGVjdGVkSXRlbShudWxsKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gW1xyXG4gICAgZWxlbWVudCxcclxuICAgIHtcclxuICAgICAgc2V0SXRlbXMsXHJcbiAgICAgIGdldEl0ZW1zLFxyXG4gICAgICBzZXRTZWxlY3RlZEl0ZW1CeUlkLFxyXG4gICAgICBnZXRTZWxlY3RlZEl0ZW0sXHJcbiAgICAgIGNsZWFyU2VsZWN0aW9uLFxyXG4gICAgfSxcclxuICBdO1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3QgcmVtb3ZlID0gPFQ+KGFycmF5OiBUW10sIGl0ZW06IFQpID0+IHtcclxuICBjb25zdCBpbmRleCA9IGFycmF5LmluZGV4T2YoaXRlbSk7XHJcblxyXG4gIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVMYXN0ID0gKHRleHQ6IHN0cmluZywgY291bnQ6IG51bWJlcikgPT4ge1xyXG4gIHJldHVybiB0ZXh0LnN1YnN0cmluZygwLCB0ZXh0Lmxlbmd0aCAtIGNvdW50KTtcclxufTtcclxuXHJcbi8vaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcclxuZXhwb3J0IGNvbnN0IHV1aWR2NCA9ICgpID0+IHtcclxuICByZXR1cm4gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XHJcbiAgICB2YXIgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCxcclxuICAgICAgdiA9IGMgPT0gXCJ4XCIgPyByIDogKHIgJiAweDMpIHwgMHg4O1xyXG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGhhc1Byb3BlcnR5ID0gPFQgZXh0ZW5kcyB7fSwgUCBleHRlbmRzIFByb3BlcnR5S2V5PihcclxuICBvYmo6IFQsXHJcbiAgcHJvcDogUFxyXG4pOiBvYmogaXMgVCAmIFJlY29yZDxQLCB1bmtub3duPiA9PiB7XHJcbiAgcmV0dXJuIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhc3NlcnROZXZlciA9ICh2YWx1ZTogbmV2ZXIpOiBuZXZlciA9PiB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKGBVbmhhbmRsZWQgdW5pb24gbWVtYmVyOiAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcclxufTtcclxuIiwiaW1wb3J0IHsgcmVtb3ZlLCB1dWlkdjQgfSBmcm9tICcuLy4uL3V0aWxzJztcclxuZGVjbGFyZSBjb25zdCBhY3F1aXJlVnNDb2RlQXBpOiAoKSA9PiB7XHJcbiAgLy9nZXRTdGF0ZTogKCkgPT4gYW55O1xyXG4gIC8vc2V0U3RhdGU6IChzdGF0ZTogYW55KSA9PiB2b2lkO1xyXG4gIHBvc3RNZXNzYWdlOiAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVxdWVzdCkgPT4gdm9pZDtcclxufTtcclxuZXhwb3J0IGNvbnN0IHZzY29kZUFwaSA9IGFjcXVpcmVWc0NvZGVBcGkoKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlcXVlc3QgPVxyXG4gIHwgeyB0eXBlOiBcImdldFNoYWRlckRvY3VtZW50c1wiLCBpZDogc3RyaW5nLCB9XHJcbiAgfCB7IHR5cGU6IFwiZ2V0RG9jdW1lbnRUZXh0XCIsIGlkOiBzdHJpbmcsIHBheWxvYWQ6IHsgZmlsZU5hbWU6IHN0cmluZyB9IH1cclxuICB8IHsgdHlwZTogXCJzdWJzY3JpYmVUb0RvY3VtZW50VGV4dENoYW5nZVwiLCBwYXlsb2FkOiB7IGZpbGVOYW1lOiBzdHJpbmcgfSB9XHJcbiAgfCB7IHR5cGU6IFwidW5zdWJzY3JpYmVUb0RvY3VtZW50VGV4dENoYW5nZVwiLCBwYXlsb2FkOiB7IGZpbGVOYW1lOiBzdHJpbmcgfSB9O1xyXG5cclxuZXhwb3J0IHR5cGUgVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UgPSB7XHJcbiAgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIjtcclxuICBpZDogc3RyaW5nLFxyXG4gIHBheWxvYWQ6IHsgZmlsZXM6IHsgZmlsZVBhdGg6IHN0cmluZzsgZmlsZU5hbWU6IHN0cmluZyB9W10gfTtcclxufSB8XHJcbnsgdHlwZTogXCJnZXREb2N1bWVudFRleHRcIiwgaWQ6IHN0cmluZywgcGF5bG9hZDogeyBmaWxlTmFtZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcgfSB9IHxcclxueyB0eXBlOiBcIm9uRG9jdW1lbnRUZXh0Q2hhbmdlXCIsIHBheWxvYWQ6IHsgZmlsZVBhdGg6IHN0cmluZywgdGV4dDogc3RyaW5nIH0gfVxyXG5cclxuZXhwb3J0IHR5cGUgVW5zdWJzY3JpYmUgPSAoKSA9PiB2b2lkO1xyXG5cclxudHlwZSBQcm94eVJlc3BvbnNlTGlzdGVuZXIgPSAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgVnNDb2RlQXBpUHJveHkge1xyXG4gIGV2ZW50TGlzdGVuZXJzOiBQcm94eVJlc3BvbnNlTGlzdGVuZXJbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZXZlbnQuZGF0YSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRTaGFkZXJEb2N1bWVudHMoKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlSWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgICB2c2NvZGVBcGkucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiBcImdldFNoYWRlckRvY3VtZW50c1wiLFxyXG4gICAgICBpZDogbWVzc2FnZUlkXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8eyBmaWxlUGF0aDogc3RyaW5nOyBmaWxlTmFtZTogc3RyaW5nIH1bXT4oKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgbGlzdGVuZXIgPSAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcImdldFNoYWRlckRvY3VtZW50c1wiICYmIG1lc3NhZ2UuaWQgPT09IG1lc3NhZ2VJZCkge1xyXG4gICAgICAgICAgcmVzb2x2ZShtZXNzYWdlLnBheWxvYWQuZmlsZXMpO1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0RG9jdW1lbnRUZXh0KGZpbGVOYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IHV1aWR2NCgpO1xyXG5cclxuICAgIHZzY29kZUFwaS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIHR5cGU6IFwiZ2V0RG9jdW1lbnRUZXh0XCIsXHJcbiAgICAgIGlkOiBtZXNzYWdlSWQsXHJcbiAgICAgIHBheWxvYWQ6IHsgZmlsZU5hbWUgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgbGlzdGVuZXIgPSAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcImdldERvY3VtZW50VGV4dFwiICYmIG1lc3NhZ2UuaWQgPT09IG1lc3NhZ2VJZCkge1xyXG4gICAgICAgICAgcmVzb2x2ZShtZXNzYWdlLnBheWxvYWQudGV4dCk7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmVUb0RvY3VtZW50U2F2ZShmaWxlUGF0aDogc3RyaW5nLCBjYWxsYmFjazogKG5ld0NvbnRlbnQ6IHN0cmluZykgPT4gdm9pZCk6IFVuc3Vic2NyaWJlIHtcclxuICAgIHZzY29kZUFwaS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIHR5cGU6IFwic3Vic2NyaWJlVG9Eb2N1bWVudFRleHRDaGFuZ2VcIixcclxuICAgICAgcGF5bG9hZDogeyBmaWxlTmFtZTogZmlsZVBhdGggfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbGlzdGVuZXIgPSAobWVzc2FnZTogVnNDb2RlQXBpUHJveHlNZXNzYWdlUmVzcG9uc2UpID0+IHtcclxuICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJvbkRvY3VtZW50VGV4dENoYW5nZVwiICYmIG1lc3NhZ2UucGF5bG9hZC5maWxlUGF0aCA9PT0gZmlsZVBhdGgpIHtcclxuICAgICAgICBjYWxsYmFjayhtZXNzYWdlLnBheWxvYWQudGV4dCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbiAgICAgIHZzY29kZUFwaS5wb3N0TWVzc2FnZSh7IHR5cGU6IFwidW5zdWJzY3JpYmVUb0RvY3VtZW50VGV4dENoYW5nZVwiLCBwYXlsb2FkOiB7IGZpbGVOYW1lOiBmaWxlUGF0aCB9IH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyOiBQcm94eVJlc3BvbnNlTGlzdGVuZXIpIHtcclxuICAgIHJlbW92ZSh0aGlzLmV2ZW50TGlzdGVuZXJzLCBsaXN0ZW5lcilcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGNyZWF0ZUZBQnV0dG9uID0gKFxyXG4gIHRleHQ6IHN0cmluZyxcclxuICBjbGFzc05hbWU6IHN0cmluZyxcclxuICBvbkNsaWNrOiAoKSA9PiB2b2lkXHJcbikgPT4ge1xyXG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9uLm9uY2xpY2sgPSBvbkNsaWNrO1xyXG4gIGJ1dHRvbi5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICByZXR1cm4geyBlbGVtZW50OiBidXR0b24gfTtcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IHdpdGhMYWJlbCA9IChcclxuICBlbGVtZW50OiBIVE1MRWxlbWVudCxcclxuICBjbGFzc05hbWU6IHN0cmluZyxcclxuICB0ZXh0OiBzdHJpbmdcclxuKSA9PiB7XHJcbiAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgd3JhcHBlci5jbGFzc05hbWUgPSBgJHtjbGFzc05hbWV9IG9wdGlvbnMtd3JhcHBlcmA7XHJcbiAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgbGFiZWwuY2xhc3NOYW1lID0gXCJvcHRpb25zLWxhYmVsXCI7XHJcbiAgbGFiZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gYCR7ZWxlbWVudC5jbGFzc05hbWV9IG9wdGlvbnMtY29udGVudGA7XHJcbiAgd3JhcHBlci5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgd3JhcHBlci5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICByZXR1cm4gd3JhcHBlcjtcclxufTtcclxuIiwiaW1wb3J0IHsgY3JlYXRlRGl2IH0gZnJvbSBcIi4vY29tbW9uXCI7XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVNdWx0aU51bWJlcklucHV0ID0gPFQgZXh0ZW5kcyBudW1iZXJbXT4oXHJcbiAgaW5pdGlhbFZhbHVlOiBULFxyXG4gIG9uQ2hhbmdlOiAobmV3VmFsdWU6IFQpID0+IHZvaWQsXHJcbiAgcm93czogbnVtYmVyLFxyXG4gIGNvbHVtbnM6IG51bWJlcixcclxuICBpbnB1dE9wdGlvbnM/OiBQYXJ0aWFsPEhUTUxJbnB1dEVsZW1lbnQ+XHJcbik6IFtcclxuICBIVE1MRGl2RWxlbWVudCxcclxuICB7XHJcbiAgICBzZXRWYWx1ZXM6ICh2YWx1ZTogVCkgPT4gdm9pZDtcclxuICAgIHNldFJlYWRvbmx5OiAocmVhZG9ubHk6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBnZXRWYWx1ZXM6ICgpID0+IFQ7XHJcbiAgfVxyXG5dID0+IHtcclxuICBjb25zdCBpbnB1dEdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGlucHV0R3JpZC5jbGFzc05hbWUgPSBcImVkaXQtaW5wdXQtZ3JpZFwiO1xyXG5cclxuICBjb25zdCBpdGVtRWxlbWVudHM6IHsgZWxlbWVudDogSFRNTElucHV0RWxlbWVudDsgdmFsdWU6IG51bWJlciB9W10gPSBbXTtcclxuICBjb25zdCBzZXRWYWx1ZXMgPSAobmV3VmFsdWVzOiBUKSA9PlxyXG4gICAgaXRlbUVsZW1lbnRzLmZvckVhY2goKGllLCBpbmRleCkgPT4ge1xyXG4gICAgICBpZS52YWx1ZSA9IG5ld1ZhbHVlc1tpbmRleF07XHJcbiAgICAgIGllLmVsZW1lbnQudmFsdWUgPSBpZS52YWx1ZS50b1N0cmluZygpO1xyXG4gICAgfSk7XHJcbiAgY29uc3QgZ2V0VmFsdWVzID0gKCkgPT4gaXRlbUVsZW1lbnRzLm1hcCgoaWUpID0+IGllLnZhbHVlKSBhcyBUO1xyXG4gIGNvbnN0IHNldFJlYWRvbmx5ID0gKHJlYWRvbmx5OiBib29sZWFuKSA9PlxyXG4gICAgaXRlbUVsZW1lbnRzLmZvckVhY2goKGllKSA9PiAoaWUuZWxlbWVudC5yZWFkT25seSA9IHJlYWRvbmx5KSk7XHJcblxyXG4gIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHJvd3M7IHJvdysrKSB7XHJcbiAgICBjb25zdCBpbnB1dFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBpbnB1dFJvdy5jbGFzc05hbWUgPSBcImVkaXQtaW5wdXQtcm93XCI7XHJcblxyXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgY29sdW1uczsgY29sdW1uKyspIHtcclxuICAgICAgY29uc3QgaW5kZXggPSByb3cgKiBjb2x1bW5zICsgY29sdW1uO1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IGluaXRpYWxWYWx1ZVtpbmRleF07XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICBjb25zdCBpdGVtRWxlbWVudCA9IHsgZWxlbWVudDogaW5wdXQsIHZhbHVlIH07XHJcbiAgICAgIE9iamVjdC5hc3NpZ24oaW5wdXQsIGlucHV0T3B0aW9ucyk7XHJcbiAgICAgIGlucHV0LmNsYXNzTmFtZSA9IFwiZWRpdC1pbnB1dFwiO1xyXG4gICAgICBpbnB1dC50eXBlID0gXCJudW1iZXJcIjtcclxuICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZT8udG9TdHJpbmcoKTtcclxuICAgICAgaW5wdXQub25pbnB1dCA9ICgpID0+IHtcclxuICAgICAgICBpdGVtRWxlbWVudHNbaW5kZXhdLnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKTtcclxuICAgICAgICBvbkNoYW5nZT8uKGdldFZhbHVlcygpKTtcclxuICAgICAgfTtcclxuICAgICAgaXRlbUVsZW1lbnRzLnB1c2goaXRlbUVsZW1lbnQpO1xyXG4gICAgICBpbnB1dFJvdy5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5wdXRHcmlkLmFwcGVuZENoaWxkKGlucHV0Um93KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBbXHJcbiAgICBpbnB1dEdyaWQsXHJcbiAgICB7XHJcbiAgICAgIHNldFZhbHVlcyxcclxuICAgICAgZ2V0VmFsdWVzLFxyXG4gICAgICBzZXRSZWFkb25seSxcclxuICAgIH0sXHJcbiAgXTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIE1hdHJpeDMgPSBbXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXJcclxuXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1hdHJpeDMgPSAob25DaGFuZ2U/OiAobmV3VmFsdWU6IE1hdHJpeDMpID0+IHZvaWQpID0+XHJcbiAgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxNYXRyaXgzPihbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sIG9uQ2hhbmdlLCAzLCAzKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZlY3RvcjIgPSBbbnVtYmVyLCBudW1iZXJdO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlVmVjdG9yMiA9IChvbkNoYW5nZT86IChuZXdWYWx1ZTogVmVjdG9yMikgPT4gdm9pZCkgPT5cclxuICBjcmVhdGVNdWx0aU51bWJlcklucHV0PFZlY3RvcjI+KFswLCAwXSwgb25DaGFuZ2UsIDEsIDIpO1xyXG5cclxuZXhwb3J0IHR5cGUgVmVjdG9yMyA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVZlY3RvcjMgPSAob25DaGFuZ2U/OiAobmV3VmFsdWU6IFZlY3RvcjMpID0+IHZvaWQpID0+XHJcbiAgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxWZWN0b3IzPihbMCwgMCwgMF0sIG9uQ2hhbmdlLCAxLCAzKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZlY3RvcjQgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVZlY3RvcjQgPSAob25DaGFuZ2U/OiAobmV3VmFsdWU6IFZlY3RvcjQpID0+IHZvaWQpID0+XHJcbiAgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxWZWN0b3I0PihbMCwgMCwgMCwgMF0sIG9uQ2hhbmdlLCAxLCA0KTtcclxuIiwiZXhwb3J0IGNvbnN0IGNyZWF0ZURpdiA9IChjbGFzc05hbWU6IHN0cmluZywgY2hpbGRyZW4/OiBIVE1MRWxlbWVudFtdKSA9PiB7XHJcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXYuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIGNoaWxkcmVuPy5mb3JFYWNoKChjKSA9PiBkaXYuYXBwZW5kQ2hpbGQoYykpO1xyXG4gIHJldHVybiBkaXY7XHJcbn07XHJcbiIsImltcG9ydCB7IGNyZWF0ZURpdiB9IGZyb20gXCIuL2NvbW1vblwiO1xyXG5pbXBvcnQgeyBjcmVhdGVNdWx0aU51bWJlcklucHV0IH0gZnJvbSBcIi4vZWRpdFZlY3RvcjNcIjtcclxuXHJcbmNvbnN0IGNvbG9ySW5wdXRQcm9wcyA9IHtcclxuICBtaW46IFwiMFwiLFxyXG4gIG1heDogXCIxXCIsXHJcbiAgc3RlcDogXCIwLjFcIixcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENvbG9yNCA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlQ29sb3I0ID0gKFxyXG4gIG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBDb2xvcjQpID0+IHZvaWRcclxuKTogW1xyXG4gIEhUTUxEaXZFbGVtZW50LFxyXG4gIHtcclxuICAgIHNldFZhbHVlczogKHZhbHVlOiBDb2xvcjQpID0+IHZvaWQ7XHJcbiAgICBzZXRSZWFkb25seTogKHJlYWRvbmx5OiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgZ2V0VmFsdWVzOiAoKSA9PiBDb2xvcjQ7XHJcbiAgfVxyXG5dID0+IHtcclxuICBjb25zdCBpbml0aWFsVmFsdWUgPSBbMC41LCAwLjUsIDAuNSwgMV0gYXMgQ29sb3I0O1xyXG4gIGNvbnN0IGNvbG9yRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBjb2xvckRpdi5jbGFzc05hbWUgPSBcImVkaXQtaW5wdXQtY29sb3JcIjtcclxuICBjb25zdCBzZXRDb2xvciA9IChjb2xvcjogQ29sb3I0KSA9PiB7XHJcbiAgICBjb2xvckRpdi5zdHlsZS5iYWNrZ3JvdW5kID0gYHJnYigke2NvbG9yWzBdICogMjU1fSwke2NvbG9yWzFdICogMjU1fSwke1xyXG4gICAgICBjb2xvclsyXSAqIDI1NVxyXG4gICAgfSwke2NvbG9yWzNdfSlgO1xyXG4gIH07XHJcblxyXG4gIHNldENvbG9yKGluaXRpYWxWYWx1ZSk7XHJcblxyXG4gIGNvbnN0IG9uQ2hhbmdlSW50ZXJuYWwgPSAoY29sb3I6IENvbG9yNCkgPT4ge1xyXG4gICAgc2V0Q29sb3IoY29sb3IpO1xyXG4gICAgb25DaGFuZ2U/Lihjb2xvcik7XHJcbiAgfTtcclxuICBjb25zdCBjb250YWluZXIgPSBjcmVhdGVEaXYoXCJyb3ctd2l0aC1nYXBcIik7XHJcbiAgY29uc3QgW2VsZW1lbnQsIGNvbnRyb2xsZXJdID0gY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxDb2xvcjQ+KFxyXG4gICAgaW5pdGlhbFZhbHVlLFxyXG4gICAgb25DaGFuZ2VJbnRlcm5hbCxcclxuICAgIDEsXHJcbiAgICA0LFxyXG4gICAgY29sb3JJbnB1dFByb3BzXHJcbiAgKTtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbG9yRGl2KTtcclxuICByZXR1cm4gW1xyXG4gICAgY29udGFpbmVyLFxyXG4gICAge1xyXG4gICAgICAuLi5jb250cm9sbGVyLFxyXG4gICAgICBzZXRWYWx1ZXM6ICh2YWx1ZTogQ29sb3I0KSA9PiB7XHJcbiAgICAgICAgY29udHJvbGxlci5zZXRWYWx1ZXModmFsdWUpO1xyXG4gICAgICAgIHNldENvbG9yKHZhbHVlKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgXTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENvbG9yMyA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbG9yMyA9IChcclxuICBvbkNoYW5nZT86IChuZXdWYWx1ZTogQ29sb3IzKSA9PiB2b2lkXHJcbik6IFtcclxuICBIVE1MRGl2RWxlbWVudCxcclxuICB7XHJcbiAgICBzZXRWYWx1ZXM6ICh2YWx1ZTogQ29sb3IzKSA9PiB2b2lkO1xyXG4gICAgc2V0UmVhZG9ubHk6IChyZWFkb25seTogYm9vbGVhbikgPT4gdm9pZDtcclxuICAgIGdldFZhbHVlczogKCkgPT4gQ29sb3IzO1xyXG4gIH1cclxuXSA9PiB7XHJcbiAgY29uc3QgaW5pdGlhbFZhbHVlID0gWzAuNSwgMC41LCAwLjVdIGFzIENvbG9yMztcclxuICBjb25zdCBjb2xvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgY29sb3JEaXYuY2xhc3NOYW1lID0gXCJlZGl0LWlucHV0LWNvbG9yXCI7XHJcbiAgY29uc3Qgc2V0Q29sb3IgPSAoY29sb3I6IENvbG9yMykgPT4ge1xyXG4gICAgY29sb3JEaXYuc3R5bGUuYmFja2dyb3VuZCA9IGByZ2IoJHtjb2xvclswXSAqIDI1NX0sJHtjb2xvclsxXSAqIDI1NX0sJHtcclxuICAgICAgY29sb3JbMl0gKiAyNTVcclxuICAgIH0sMSlgO1xyXG4gIH07XHJcblxyXG4gIHNldENvbG9yKGluaXRpYWxWYWx1ZSk7XHJcblxyXG4gIGNvbnN0IG9uQ2hhbmdlSW50ZXJuYWwgPSAoY29sb3I6IENvbG9yMykgPT4ge1xyXG4gICAgc2V0Q29sb3IoY29sb3IpO1xyXG4gICAgb25DaGFuZ2U/Lihjb2xvcik7XHJcbiAgfTtcclxuICBjb25zdCBjb250YWluZXIgPSBjcmVhdGVEaXYoXCJyb3ctd2l0aC1nYXBcIik7XHJcbiAgY29uc3QgW2VsZW1lbnQsIGNvbnRyb2xsZXJdID0gY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxDb2xvcjM+KFxyXG4gICAgaW5pdGlhbFZhbHVlLFxyXG4gICAgb25DaGFuZ2VJbnRlcm5hbCxcclxuICAgIDEsXHJcbiAgICAzLFxyXG4gICAgY29sb3JJbnB1dFByb3BzXHJcbiAgKTtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbG9yRGl2KTtcclxuICByZXR1cm4gW1xyXG4gICAgY29udGFpbmVyLFxyXG4gICAge1xyXG4gICAgICAuLi5jb250cm9sbGVyLFxyXG4gICAgICBzZXRWYWx1ZXM6ICh2YWx1ZTogQ29sb3IzKSA9PiB7XHJcbiAgICAgICAgY29udHJvbGxlci5zZXRWYWx1ZXModmFsdWUpO1xyXG4gICAgICAgIHNldENvbG9yKHZhbHVlKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgXTtcclxufTtcclxuIiwiaW1wb3J0IHtcclxuICBjcmVhdGVWZWN0b3IyLFxyXG4gIGNyZWF0ZVZlY3RvcjMsXHJcbiAgY3JlYXRlVmVjdG9yNCxcclxuICBWZWN0b3IyLFxyXG4gIFZlY3RvcjMsXHJcbiAgVmVjdG9yNCxcclxufSBmcm9tIFwiLi9jb21wb25lbnRzL2VkaXRWZWN0b3IzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZURpdiB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tbW9uXCI7XHJcbmltcG9ydCB7IGNyZWF0ZURyb3Bkb3duIH0gZnJvbSBcIi4vY29tcG9uZW50cy9kcm9wZG93blwiO1xyXG5pbXBvcnQgeyBjcmVhdGVDb2xvcjMsIGNyZWF0ZUNvbG9yNCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZWRpdENvbG9yXCI7XHJcbmltcG9ydCB7IFVuaWZvcm1JbmZvLCBVbmlmb3JtVHlwZSB9IGZyb20gXCIuL3VuaWZvcm1cIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVVbmlmb3JtQ29tcG9uZW50ID0gKFxyXG4gIHVuaWZvcm1JbmZvOiBVbmlmb3JtSW5mbyxcclxuICByZW5kZXI6ICgpID0+IHZvaWRcclxuKSA9PiB7XHJcbiAgc3dpdGNoICh1bmlmb3JtSW5mby50eXBlKSB7XHJcbiAgICBjYXNlIFVuaWZvcm1UeXBlLkZMT0FUX1ZFQzI6XHJcbiAgICAgIHJldHVybiBjcmVhdGVVbmlmb3JtRm9yVmVjMigodmFsdWUpID0+IHtcclxuICAgICAgICB1bmlmb3JtSW5mby51cGRhdGUodmFsdWUpO1xyXG4gICAgICAgIHJlbmRlcigpO1xyXG4gICAgICB9KTtcclxuICAgIGNhc2UgVW5pZm9ybVR5cGUuRkxPQVRfVkVDMzpcclxuICAgICAgcmV0dXJuIGNyZWF0ZVVuaWZvcm1Gb3JWZWMzKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgIHVuaWZvcm1JbmZvLnVwZGF0ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgY2FzZSBVbmlmb3JtVHlwZS5GTE9BVF9WRUM0OlxyXG4gICAgICByZXR1cm4gY3JlYXRlVW5pZm9ybUZvclZlYzQoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgdW5pZm9ybUluZm8udXBkYXRlKHZhbHVlKTtcclxuICAgICAgICByZW5kZXIoKTtcclxuICAgICAgfSk7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gY3JlYXRlVW5pZm9ybU5vdFN1cHBvcnRlZCgpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVVbmlmb3JtTm90U3VwcG9ydGVkID0gKCkgPT4ge1xyXG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2LmNsYXNzTmFtZSA9IFwidW5zdXBwb3J0ZWQtZXJyb3JcIjtcclxuICBkaXYuaW5uZXJUZXh0ID0gXCJOb3Qgc3VwcG9ydGVkIHVuaWZvcm1cIjtcclxuICByZXR1cm4gZGl2O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVuaWZvcm1TZWxlY3Rpb24gPSAoZWxlbWVudHM6IHtcclxuICBba2V5OiBzdHJpbmddOiB7IGRpc3BsYXk6IHN0cmluZzsgZWxlbWVudDogSFRNTEVsZW1lbnQgfTtcclxufSkgPT4ge1xyXG4gIGNvbnN0IFtvcHRpb25zRWxlbWVudCwgb3B0aW9uc0NvbnRyb2xsZXJdID0gY3JlYXRlRHJvcGRvd24oXHJcbiAgICAoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoIWl0ZW0pIHJldHVybjtcclxuXHJcbiAgICAgIE9iamVjdC52YWx1ZXMoZWxlbWVudHMpLmZvckVhY2goKG9lKSA9PlxyXG4gICAgICAgIG9lLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgZWxlbWVudHNbaXRlbS5pZF0uZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgfSxcclxuICAgIFwiXCIsXHJcbiAgICB7IGVtcHR5SXRlbTogZmFsc2UgfVxyXG4gICk7XHJcbiAgb3B0aW9uc0NvbnRyb2xsZXIuc2V0SXRlbXMoXHJcbiAgICBPYmplY3QuZW50cmllcyhlbGVtZW50cykubWFwKChba2V5LCB2YWx1ZV0pID0+ICh7XHJcbiAgICAgIGlkOiBrZXksXHJcbiAgICAgIGRpc3BsYXk6IHZhbHVlLmRpc3BsYXksXHJcbiAgICB9KSlcclxuICApO1xyXG4gIG9wdGlvbnNDb250cm9sbGVyLnNldFNlbGVjdGVkSXRlbUJ5SWQoXCJjdXN0b21cIik7XHJcbiAgcmV0dXJuIG9wdGlvbnNFbGVtZW50O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVuaWZvcm1Gb3JWZWMyID0gKHVwZGF0ZTogKHZhbHVlOiBWZWN0b3IyKSA9PiB2b2lkKSA9PiB7XHJcbiAgY29uc3QgW2N1c3RvbUVsZW1lbnQsIGN1c3RvbUNvbnRyb2xsZXJdID0gY3JlYXRlVmVjdG9yMih1cGRhdGUpO1xyXG4gIGN1c3RvbUNvbnRyb2xsZXIuc2V0VmFsdWVzKFswLCAwXSk7XHJcbiAgcmV0dXJuIGN1c3RvbUVsZW1lbnQ7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlVW5pZm9ybUZvclZlYzMgPSAodXBkYXRlOiAodmFsdWU6IFZlY3RvcjMpID0+IHZvaWQpID0+IHtcclxuICBjb25zdCBbY3VzdG9tRWxlbWVudCwgY3VzdG9tQ29udHJvbGxlcl0gPSBjcmVhdGVWZWN0b3IzKHVwZGF0ZSk7XHJcbiAgY3VzdG9tQ29udHJvbGxlci5zZXRWYWx1ZXMoWzAsIDAsIDBdKTtcclxuXHJcbiAgY29uc3QgW2NvbG9yRWxlbWVudCwgY29sb3JDb250cm9sbGVyXSA9IGNyZWF0ZUNvbG9yMyh1cGRhdGUpO1xyXG4gIGNvbG9yQ29udHJvbGxlci5zZXRWYWx1ZXMoWzEsIDAsIDBdKTtcclxuXHJcbiAgY29uc3Qgb3B0aW9uc0VsZW1lbnQgPSBjcmVhdGVVbmlmb3JtU2VsZWN0aW9uKHtcclxuICAgIGN1c3RvbToge1xyXG4gICAgICBkaXNwbGF5OiBcIkN1c3RvbVwiLFxyXG4gICAgICBlbGVtZW50OiBjdXN0b21FbGVtZW50LFxyXG4gICAgfSxcclxuICAgIGNvbG9yOiB7XHJcbiAgICAgIGRpc3BsYXk6IFwiQ29sb3JcIixcclxuICAgICAgZWxlbWVudDogY29sb3JFbGVtZW50LFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGNyZWF0ZURpdihcImNvbHVtbi13aXRoLWdhcFwiLCBbXHJcbiAgICBvcHRpb25zRWxlbWVudCxcclxuICAgIGN1c3RvbUVsZW1lbnQsXHJcbiAgICBjb2xvckVsZW1lbnQsXHJcbiAgXSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlVW5pZm9ybUZvclZlYzQgPSAodXBkYXRlOiAodmFsdWU6IFZlY3RvcjQpID0+IHZvaWQpID0+IHtcclxuICBjb25zdCBbY3VzdG9tRWxlbWVudCwgY3VzdG9tQ29udHJvbGxlcl0gPSBjcmVhdGVWZWN0b3I0KHVwZGF0ZSk7XHJcbiAgY3VzdG9tQ29udHJvbGxlci5zZXRWYWx1ZXMoWzAsIDAsIDAsIDBdKTtcclxuXHJcbiAgY29uc3QgW2NvbG9yRWxlbWVudCwgY29sb3JDb250cm9sbGVyXSA9IGNyZWF0ZUNvbG9yNCh1cGRhdGUpO1xyXG4gIGNvbG9yQ29udHJvbGxlci5zZXRWYWx1ZXMoWzEsIDAsIDAsIDFdKTtcclxuXHJcbiAgY29uc3Qgb3B0aW9uc0VsZW1lbnQgPSBjcmVhdGVVbmlmb3JtU2VsZWN0aW9uKHtcclxuICAgIGN1c3RvbToge1xyXG4gICAgICBkaXNwbGF5OiBcIkN1c3RvbVwiLFxyXG4gICAgICBlbGVtZW50OiBjdXN0b21FbGVtZW50LFxyXG4gICAgfSxcclxuICAgIGNvbG9yOiB7XHJcbiAgICAgIGRpc3BsYXk6IFwiQ29sb3JcIixcclxuICAgICAgZWxlbWVudDogY29sb3JFbGVtZW50LFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGNyZWF0ZURpdihcImNvbHVtbi13aXRoLWdhcFwiLCBbXHJcbiAgICBvcHRpb25zRWxlbWVudCxcclxuICAgIGN1c3RvbUVsZW1lbnQsXHJcbiAgICBjb2xvckVsZW1lbnQsXHJcbiAgXSk7XHJcbn07XHJcbiIsImV4cG9ydCBjbGFzcyBDb21wb3NpdGVLZXlNYXA8VEtleSwgVFZhbHVlPiB7XHJcbiAgcHJpdmF0ZSBtYXAgPSBuZXcgTWFwPHN0cmluZywgVFZhbHVlPigpO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGtleVNlbGVjdG9yOiAoY29tcG9zaXRlS2V5OiBUS2V5KSA9PiBzdHJpbmcpIHt9XHJcblxyXG4gIGdldChrZXk6IFRLZXkpIHtcclxuICAgIHJldHVybiB0aGlzLm1hcC5nZXQodGhpcy5rZXlTZWxlY3RvcihrZXkpKTtcclxuICB9XHJcblxyXG4gIHNldChrZXk6IFRLZXksIHZhbHVlOiBUVmFsdWUpIHtcclxuICAgIHRoaXMubWFwLnNldCh0aGlzLmtleVNlbGVjdG9yKGtleSksIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgdGhpcy5tYXAuY2xlYXIoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgd2l0aExhYmVsIH0gZnJvbSBcIi4vY29tcG9uZW50cy93cmFwcGVyc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVVbmlmb3JtQ29tcG9uZW50IH0gZnJvbSBcIi4vdW5pZm9ybUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBDb21wb3NpdGVLZXlNYXAgfSBmcm9tIFwiLi9jb21wb3NpdGVLZXlNYXBcIjtcclxuaW1wb3J0IHsgU2hhZGVyQ29udHJvbGxlciB9IGZyb20gXCIuL2NyZWF0ZVdlYkdMQ2FudmFzXCI7XHJcbmltcG9ydCB7IFVuaWZvcm1UeXBlIH0gZnJvbSBcIi4vdW5pZm9ybVwiO1xyXG5cclxuY29uc3QgdW5pZm9ybXNDYWNoZSA9IG5ldyBDb21wb3NpdGVLZXlNYXA8XHJcbiAgeyBuYW1lOiBzdHJpbmc7IHR5cGU6IFVuaWZvcm1UeXBlIH0sXHJcbiAgSFRNTEVsZW1lbnRcclxuPigoa2V5KSA9PiBgJHtrZXkubmFtZX07JHtrZXkudHlwZX1gKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhcHBlbmRXaXRoU2hhZGVyT3B0aW9ucyA9IChcclxuICBlbGVtZW50OiBIVE1MRWxlbWVudCxcclxuICBzaGFkZXJDb250cm9sbGVyOiBTaGFkZXJDb250cm9sbGVyXHJcbikgPT4ge1xyXG4gIGNvbnN0IHVuaWZvcm1FbGVtZW50cyA9IHNoYWRlckNvbnRyb2xsZXIudW5pZm9ybXMubWFwKCh1bmlmb3JtKSA9PiB7XHJcbiAgICBjb25zdCBjb21wb25lbnRGcm9tQ2FjaGUgPSB1bmlmb3Jtc0NhY2hlLmdldCh7XHJcbiAgICAgIC4uLnVuaWZvcm0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoY29tcG9uZW50RnJvbUNhY2hlKSB7XHJcbiAgICAgIHJldHVybiBjb21wb25lbnRGcm9tQ2FjaGU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb21wb25lbnQgPSB3aXRoTGFiZWwoXHJcbiAgICAgICAgY3JlYXRlVW5pZm9ybUNvbXBvbmVudCh1bmlmb3JtLCBzaGFkZXJDb250cm9sbGVyLnJlbmRlciksXHJcbiAgICAgICAgXCJcIixcclxuICAgICAgICB1bmlmb3JtLm5hbWVcclxuICAgICAgKTtcclxuICAgICAgdW5pZm9ybXNDYWNoZS5zZXQoeyAuLi51bmlmb3JtIH0sIGNvbXBvbmVudCk7XHJcbiAgICAgIHJldHVybiBjb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHVuaWZvcm1FbGVtZW50cy5mb3JFYWNoKChlKSA9PiBlbGVtZW50LmFwcGVuZENoaWxkKGUpKTtcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IGNvbXBpbGVTaGFkZXIgPSAoXHJcbiAgcmVuZGVyaW5nQ29udGV4dDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LFxyXG4gIHR5cGU6IEdMZW51bSxcclxuICBzb3VyY2U6IHN0cmluZ1xyXG4pOiBXZWJHTFNoYWRlciB8IHsgZXJyb3I6IHN0cmluZyB9ID0+IHtcclxuICBjb25zdCBzaGFkZXIgPSByZW5kZXJpbmdDb250ZXh0LmNyZWF0ZVNoYWRlcih0eXBlKTtcclxuICByZW5kZXJpbmdDb250ZXh0LnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XHJcbiAgcmVuZGVyaW5nQ29udGV4dC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IHJlbmRlcmluZ0NvbnRleHQuZ2V0U2hhZGVyUGFyYW1ldGVyKFxyXG4gICAgc2hhZGVyLFxyXG4gICAgcmVuZGVyaW5nQ29udGV4dC5DT01QSUxFX1NUQVRVU1xyXG4gICk7XHJcblxyXG4gIGlmIChyZXN1bHQpIHtcclxuICAgIHJldHVybiBzaGFkZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IGVycm9yID0gcmVuZGVyaW5nQ29udGV4dC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XHJcbiAgICByZW5kZXJpbmdDb250ZXh0LmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZXJyb3IsXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQcm9ncmFtID0gKFxyXG4gIHJlbmRlcmluZ0NvbnRleHQ6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCxcclxuICB2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyLFxyXG4gIGZyYWdtZW50U2hhZGVyOiBXZWJHTFNoYWRlclxyXG4pID0+IHtcclxuICBjb25zdCBwcm9ncmFtID0gcmVuZGVyaW5nQ29udGV4dC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgcmVuZGVyaW5nQ29udGV4dC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcclxuICByZW5kZXJpbmdDb250ZXh0LmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgcmVuZGVyaW5nQ29udGV4dC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gcmVuZGVyaW5nQ29udGV4dC5nZXRQcm9ncmFtUGFyYW1ldGVyKFxyXG4gICAgcHJvZ3JhbSxcclxuICAgIHJlbmRlcmluZ0NvbnRleHQuTElOS19TVEFUVVNcclxuICApO1xyXG5cclxuICBpZiAocmVzdWx0KSB7XHJcbiAgICByZXR1cm4gcHJvZ3JhbTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coXCJjb3MgbmllIGhhbG9cIik7XHJcblxyXG4gICAgcmVuZGVyaW5nQ29udGV4dC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgYENyZWF0aW5nIHByb2dyYW0gZmFpbGVkOiAke3JlbmRlcmluZ0NvbnRleHQuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSl9YFxyXG4gICAgKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgRWFzeUdMQXR0cmlidXRlQnVmZmVyIHt9XHJcblxyXG5leHBvcnQgY2xhc3MgRWFzeUdMVW5pZm9ybSB7fVxyXG5cclxuZXhwb3J0IGNsYXNzIEVhc3lHTFByb2dyYW0ge31cclxuIiwiaW1wb3J0IHsgaGFzUHJvcGVydHksIHJlbW92ZUxhc3QgfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgZ2V0VW5pZm9ybVNldHRlciwgVW5pZm9ybUluZm8gfSBmcm9tIFwiLi91bmlmb3JtXCI7XHJcbmltcG9ydCB7IGNvbXBpbGVTaGFkZXIsIGNyZWF0ZVByb2dyYW0gfSBmcm9tIFwiLi93ZWJnbF91dGlscy91dGlsc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgQXR0cmlidXRlQnVmZmVySW5mbyA9IHt9O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29tcGlsZUVycm9ycyA9IFtcclxuICB2ZXJ0ZXhTaGFkZXJFcnJvcnM6IHN0cmluZyxcclxuICBmcmFnbWVudFNoYWRlckVycm9yczogc3RyaW5nXHJcbl07XHJcblxyXG5leHBvcnQgdHlwZSBTaGFkZXJDb250cm9sbGVyID0ge1xyXG4gIHVuaWZvcm1zOiBVbmlmb3JtSW5mb1tdO1xyXG4gIHJlbmRlcjogKCkgPT4gdm9pZDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVVuaWZvcm1JbmZvcyA9IChcclxuICBjb250ZXh0OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXHJcbiAgcHJvZ3JhbTogV2ViR0xQcm9ncmFtXHJcbik6IFVuaWZvcm1JbmZvW10gPT4ge1xyXG4gIGNvbnN0IG51bVVuaWZvcm1zID0gY29udGV4dC5nZXRQcm9ncmFtUGFyYW1ldGVyKFxyXG4gICAgcHJvZ3JhbSxcclxuICAgIGNvbnRleHQuQUNUSVZFX1VOSUZPUk1TXHJcbiAgKTtcclxuICBjb25zdCByZXN1bHQ6IFVuaWZvcm1JbmZvW10gPSBbXTtcclxuXHJcbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG51bVVuaWZvcm1zOyArK2luZGV4KSB7XHJcbiAgICBjb25zdCB1bmlmb3JtID0gY29udGV4dC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0sIGluZGV4KTtcclxuICAgIGNvbnN0IGxvY2F0aW9uID0gY29udGV4dC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybS5uYW1lKTtcclxuICAgIGNvbnN0IHVwZGF0ZSA9IGdldFVuaWZvcm1TZXR0ZXIodW5pZm9ybS50eXBlLCBjb250ZXh0LCBsb2NhdGlvbik7XHJcblxyXG4gICAgcmVzdWx0LnB1c2goe1xyXG4gICAgICBuYW1lOiB1bmlmb3JtLm5hbWUsXHJcbiAgICAgIHR5cGU6IHVuaWZvcm0udHlwZSxcclxuICAgICAgdXBkYXRlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVdlYkdMQ2FudmFzID0gKFxyXG4gIGNsYXNzTmFtZTogc3RyaW5nXHJcbik6IFtcclxuICBIVE1MQ2FudmFzRWxlbWVudCxcclxuICB7XHJcbiAgICBjb21waWxlU2hhZGVyczogKFxyXG4gICAgICB2ZXJ0ZXhTaGFkZXJDb250ZW50OiBzdHJpbmcsXHJcbiAgICAgIGZyYWdtZW50U2hhZGVyQ29udGVudDogc3RyaW5nXHJcbiAgICApID0+IENvbXBpbGVFcnJvcnMgfCBTaGFkZXJDb250cm9sbGVyO1xyXG4gIH1cclxuXSA9PiB7XHJcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICBjYW52YXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpO1xyXG4gIGlmICghY29udGV4dCkge1xyXG4gICAgLy90b2RvIG1vdmUgdG8gZXJyb3JzXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIHdlYmdsIGNvbnRleHRcIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb21waWxlU2hhZGVycyA9IChcclxuICAgIHZlcnRleFNoYWRlckNvbnRlbnQ6IHN0cmluZyxcclxuICAgIGZyYWdtZW50U2hhZGVyQ29udGVudDogc3RyaW5nXHJcbiAgKSA9PiB7XHJcbiAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gICAgICBjb250ZXh0LFxyXG4gICAgICBjb250ZXh0LlZFUlRFWF9TSEFERVIsXHJcbiAgICAgIHZlcnRleFNoYWRlckNvbnRlbnRcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gICAgICBjb250ZXh0LFxyXG4gICAgICBjb250ZXh0LkZSQUdNRU5UX1NIQURFUixcclxuICAgICAgZnJhZ21lbnRTaGFkZXJDb250ZW50XHJcbiAgICApO1xyXG5cclxuICAgIGxldCB2ZXJ0ZXhFcnJvcjogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgaWYgKGhhc1Byb3BlcnR5KHZlcnRleFNoYWRlciwgXCJlcnJvclwiKSkge1xyXG4gICAgICB2ZXJ0ZXhFcnJvciA9IHJlbW92ZUxhc3QodmVydGV4U2hhZGVyLmVycm9yLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZnJhZ21lbnRFcnJvcjogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgaWYgKGhhc1Byb3BlcnR5KGZyYWdtZW50U2hhZGVyLCBcImVycm9yXCIpKSB7XHJcbiAgICAgIGZyYWdtZW50RXJyb3IgPSByZW1vdmVMYXN0KGZyYWdtZW50U2hhZGVyLmVycm9yLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmVydGV4RXJyb3IgfHwgZnJhZ21lbnRFcnJvcikge1xyXG4gICAgICAvL3RvZG8gY2xlYW51cFxyXG4gICAgICByZXR1cm4gW3ZlcnRleEVycm9yLCBmcmFnbWVudEVycm9yXSBhcyBDb21waWxlRXJyb3JzO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKGNvbnRleHQsIHZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXIpO1xyXG5cclxuICAgIC8vY3JlYXRlQ29udHJvbGxlcjkwXHJcblxyXG4gICAgLy8gY29uc3QgbnVtVW5pZm9ybXMgPSBjb250ZXh0LmdldFByb2dyYW1QYXJhbWV0ZXIoXHJcbiAgICAvLyAgIHByb2dyYW0sXHJcbiAgICAvLyAgIGNvbnRleHQuQUNUSVZFX1VOSUZPUk1TXHJcbiAgICAvLyApO1xyXG4gICAgLy8gY29uc3QgdW5pZm9ybVNldHRlcnMgPSB7fTtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwiZ2V0dGluZyB1bmlmb3Jtc1wiLCBudW1Vbmlmb3Jtcyk7XHJcblxyXG4gICAgLy8gZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1zOyArK2lpKSB7XHJcbiAgICAvLyAgIGNvbnN0IHVuaWZvcm1JbmZvID0gY29udGV4dC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0sIGlpKTtcclxuICAgIC8vICAgLy8gaWYgKGlzQnVpbHRJbih1bmlmb3JtSW5mbykpIHtcclxuICAgIC8vICAgLy8gICAgIGNvbnRpbnVlO1xyXG4gICAgLy8gICAvLyB9XHJcbiAgICAvLyAgIGxldCBuYW1lID0gdW5pZm9ybUluZm8ubmFtZTtcclxuICAgIC8vICAgY29uc29sZS5sb2coXCJ1bmlmb3JtOlwiLCB1bmlmb3JtSW5mbyk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy9wcm9ncmFtLlxyXG4gICAgLy9nZW5lcmF0ZSBwcm9ncmFtIGluZm9cclxuXHJcbiAgICBjb25zdCB1bmlmb3JtcyA9IGdlbmVyYXRlVW5pZm9ybUluZm9zKGNvbnRleHQsIHByb2dyYW0pO1xyXG4gICAgLy8gdW5pZm9ybXMucHVzaCh7XHJcbiAgICAvLyAgIG5hbWU6IFwidW5pZm9ybTFcIixcclxuICAgIC8vICAgdHlwZTogXCJ2ZWMzXCIsXHJcbiAgICAvLyAgIHVwZGF0ZTogKCkgPT4ge30sXHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvLyB1bmlmb3Jtcy5wdXNoKHtcclxuICAgIC8vICAgbmFtZTogXCJ1bmlmb3JtMlwiLFxyXG4gICAgLy8gICB0eXBlOiBcInZlYzJcIixcclxuICAgIC8vICAgdXBkYXRlOiAoKSA9PiB7fSxcclxuICAgIC8vIH0pO1xyXG4gICAgLy9mcmFnbWVudDogeyBlcnJvcnM6IH1cclxuICAgIC8vZnJhZ21lbnQ6IHsgZXJyb3JzOiB9XHJcblxyXG4gICAgLy9kZWxldGUgc2hhZGVyc1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlbmRlcjogKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVuZGVyaW5nXCIpO1xyXG4gICAgICB9LFxyXG4gICAgICB1bmlmb3JtcyxcclxuICAgIH0gYXMgU2hhZGVyQ29udHJvbGxlcjtcclxuICB9O1xyXG5cclxuICByZXR1cm4gW1xyXG4gICAgY2FudmFzLFxyXG4gICAge1xyXG4gICAgICBjb21waWxlU2hhZGVycyxcclxuICAgIH0sXHJcbiAgXTtcclxufTtcclxuIiwiaW1wb3J0IHsgdHJhbnNsYXRpb25zIH0gZnJvbSBcIi4vLi4vdHJhbnNsYXRpb25zXCI7XHJcbmltcG9ydCB7IGNyZWF0ZURyb3Bkb3duIH0gZnJvbSBcIi4vY29tcG9uZW50cy9kcm9wZG93blwiO1xyXG5pbXBvcnQgeyBVbnN1YnNjcmliZSwgVnNDb2RlQXBpUHJveHkgfSBmcm9tIFwiLi9jb21tdW5pY2F0aW9uUHJveHlcIjtcclxuaW1wb3J0IHsgY3JlYXRlU2VjdGlvblRpdGxlIH0gZnJvbSBcIi4vY29tcG9uZW50cy9jcmVhdGVTZWN0aW9uVGl0bGVcIjtcclxuaW1wb3J0IHsgY3JlYXRlRkFCdXR0b24gYXMgY3JlYXRlQnV0dG9uIH0gZnJvbSBcIi4vY29tcG9uZW50cy9jcmVhdGVGQUJ1dHRvblwiO1xyXG5pbXBvcnQgeyB3aXRoTGFiZWwgfSBmcm9tIFwiLi9jb21wb25lbnRzL3dyYXBwZXJzXCI7XHJcbmltcG9ydCB7IGFwcGVuZFdpdGhTaGFkZXJPcHRpb25zIGFzIHVwZGF0ZVNoYWRlck9wdGlvbnMgfSBmcm9tIFwiLi9zaGFkZXJPcHRpb25zXCI7XHJcbmltcG9ydCB7IGNyZWF0ZURpdiB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tbW9uXCI7XHJcbmltcG9ydCB7XHJcbiAgQ29tcGlsZUVycm9ycyxcclxuICBjcmVhdGVXZWJHTENhbnZhcyxcclxuICBTaGFkZXJDb250cm9sbGVyLFxyXG59IGZyb20gXCIuL2NyZWF0ZVdlYkdMQ2FudmFzXCI7XHJcblxyXG5jb25zdCBjcmVhdGVWaWV3ZXIgPSBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgdnNjb2RlQXBpID0gbmV3IFZzQ29kZUFwaVByb3h5KCk7XHJcbiAgY29uc3Qgdmlld2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWV3ZXJcIik7XHJcbiAgY29uc3Qgdmlld2VyT3B0aW9ucyA9IGNyZWF0ZURpdihcInZpZXdlci1vcHRpb25zXCIpO1xyXG4gIGNvbnN0IHNoYWRlck9wdGlvbnMgPSBjcmVhdGVEaXYoXCJ2aWV3ZXItc2hhZGVyLW9wdGlvbnNcIik7XHJcbiAgY29uc3Qgc2hhZGVyQ29tcGlsYXRpb25FcnJvcnMgPSBjcmVhdGVEaXYoXCJ2aWV3ZXItY29udGVudCBzaGFkZXItZXJyb3JzXCIpO1xyXG4gIGNvbnN0IFt3ZWJHTENhbnZhcywgd2ViR0xDb250cm9sbGVyXSA9IGNyZWF0ZVdlYkdMQ2FudmFzKFwidmlld2VyLWNvbnRlbnRcIik7XHJcblxyXG4gIHZpZXdlci5hcHBlbmRDaGlsZCh3ZWJHTENhbnZhcyk7XHJcbiAgdmlld2VyLmFwcGVuZENoaWxkKHNoYWRlckNvbXBpbGF0aW9uRXJyb3JzKTtcclxuICB2aWV3ZXIuYXBwZW5kQ2hpbGQodmlld2VyT3B0aW9ucyk7XHJcblxyXG4gIGNvbnN0IHNob3dDb250ZW50ID0gKGNvbnRlbnQ6IFwiY2FudmFzXCIgfCBcImVycm9yc1wiIHwgXCJub25lXCIpID0+IHtcclxuICAgIHdlYkdMQ2FudmFzLnN0eWxlLnZpc2liaWxpdHkgPVxyXG4gICAgICBjb250ZW50ID09PSBcImNhbnZhc1wiID8gXCJ2aXNpYmxlXCIgOiBcImNvbGxhcHNlXCI7XHJcbiAgICBzaGFkZXJDb21waWxhdGlvbkVycm9ycy5zdHlsZS52aXNpYmlsaXR5ID1cclxuICAgICAgY29udGVudCA9PT0gXCJlcnJvcnNcIiA/IFwidmlzaWJsZVwiIDogXCJjb2xsYXBzZVwiO1xyXG4gIH07XHJcblxyXG4gIGxldCBzZWxlY3RlZFZlcnRleEZpbGVXYXRjaGVyVW5zdWJzY3JpYmU6IFVuc3Vic2NyaWJlIHwgdW5kZWZpbmVkO1xyXG4gIGxldCBzZWxlY3RlZEZyYWdtZW50RmlsZVdhdGNoZXJVbnN1YnNjcmliZTogVW5zdWJzY3JpYmUgfCB1bmRlZmluZWQ7XHJcbiAgbGV0IHNlbGVjdGVkVmVydGV4Q29udGVudDogc3RyaW5nIHwgbnVsbDtcclxuICBsZXQgc2VsZWN0ZWRGcmFnbWVudENvbnRlbnQ6IHN0cmluZyB8IG51bGw7XHJcblxyXG4gIGNvbnN0IG9uU2hhZGVyQ29udGVudENoYW5nZWQgPSAoKSA9PiB7XHJcbiAgICBzaGFkZXJPcHRpb25zLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgaWYgKHNlbGVjdGVkRnJhZ21lbnRDb250ZW50ICYmIHNlbGVjdGVkVmVydGV4Q29udGVudCkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB3ZWJHTENvbnRyb2xsZXIuY29tcGlsZVNoYWRlcnMoXHJcbiAgICAgICAgc2VsZWN0ZWRWZXJ0ZXhDb250ZW50LFxyXG4gICAgICAgIHNlbGVjdGVkRnJhZ21lbnRDb250ZW50XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XHJcbiAgICAgICAgc2hvd0NvbnRlbnQoXCJlcnJvcnNcIik7XHJcbiAgICAgICAgY29uc3QgW1xyXG4gICAgICAgICAgdmVydGV4U2hhZGVyRXJyb3JzLFxyXG4gICAgICAgICAgZnJhZ21lbnRTaGFkZXJFcnJvcnMsXHJcbiAgICAgICAgXSA9IHJlc3VsdCBhcyBDb21waWxlRXJyb3JzO1xyXG5cclxuICAgICAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgIGlmICh2ZXJ0ZXhTaGFkZXJFcnJvcnMpIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKFwiVkVSVEVYIFNIQURFUjpcIiwgdmVydGV4U2hhZGVyRXJyb3JzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmcmFnbWVudFNoYWRlckVycm9ycykge1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goXCJGUkFHTUVOVCBTSEFERVI6XCIsIGZyYWdtZW50U2hhZGVyRXJyb3JzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNoYWRlckNvbXBpbGF0aW9uRXJyb3JzLmlubmVyVGV4dCA9IGVycm9ycy5qb2luKFwiXFxyXFxuXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNob3dDb250ZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIHVwZGF0ZVNoYWRlck9wdGlvbnMoc2hhZGVyT3B0aW9ucywgcmVzdWx0IGFzIFNoYWRlckNvbnRyb2xsZXIpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaG93Q29udGVudChcIm5vbmVcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIGNyZWF0ZURpdihcInZpZXdlci1zaGFkZXJzLXRpdGxlXCIsIFtcclxuICAgICAgY3JlYXRlU2VjdGlvblRpdGxlKHRyYW5zbGF0aW9ucy5zaGFkZXJzLCBcIlwiKS5lbGVtZW50LFxyXG4gICAgICBjcmVhdGVCdXR0b24oXCJTeW5jXCIsIFwidmlld2VyLXJlZnJlc2gtYnV0dG9uXCIsICgpID0+IHtcclxuICAgICAgICB2c2NvZGVBcGkuZ2V0U2hhZGVyRG9jdW1lbnRzKCkudGhlbigoc2QpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGZpbGVzID0gc2QubWFwKChmKSA9PiAoe1xyXG4gICAgICAgICAgICBpZDogZi5maWxlUGF0aCxcclxuICAgICAgICAgICAgZGlzcGxheTogZi5maWxlTmFtZSxcclxuICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICB2ZXJ0ZXhEcm9wZG93bkNvbnRyb2xsZXIuc2V0SXRlbXMoZmlsZXMpO1xyXG4gICAgICAgICAgZnJhZ21lbnREcm9wZG93bkNvbnRyb2xsZXIuc2V0SXRlbXMoZmlsZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KS5lbGVtZW50LFxyXG4gICAgXSlcclxuICApO1xyXG5cclxuICBjb25zdCBbdmVydGV4RHJvcGRvd25FbGVtZW50LCB2ZXJ0ZXhEcm9wZG93bkNvbnRyb2xsZXJdID0gY3JlYXRlRHJvcGRvd24oXHJcbiAgICBhc3luYyAobmV3VmVydGV4KSA9PiB7XHJcbiAgICAgIHNlbGVjdGVkVmVydGV4RmlsZVdhdGNoZXJVbnN1YnNjcmliZT8uKCk7XHJcblxyXG4gICAgICBpZiAobmV3VmVydGV4KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRWZXJ0ZXhGaWxlV2F0Y2hlclVuc3Vic2NyaWJlID0gdnNjb2RlQXBpLnN1YnNjcmliZVRvRG9jdW1lbnRTYXZlKFxyXG4gICAgICAgICAgbmV3VmVydGV4LmlkLFxyXG4gICAgICAgICAgKG5ld0NvbnRlbnQpID0+IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRWZXJ0ZXhDb250ZW50ID0gbmV3Q29udGVudDtcclxuICAgICAgICAgICAgb25TaGFkZXJDb250ZW50Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNlbGVjdGVkVmVydGV4Q29udGVudCA9IG5ld1ZlcnRleFxyXG4gICAgICAgID8gYXdhaXQgdnNjb2RlQXBpLmdldERvY3VtZW50VGV4dChuZXdWZXJ0ZXguaWQpXHJcbiAgICAgICAgOiBcIlwiO1xyXG4gICAgICBvblNoYWRlckNvbnRlbnRDaGFuZ2VkKCk7XHJcbiAgICB9XHJcbiAgKTtcclxuICB2aWV3ZXJPcHRpb25zLmFwcGVuZENoaWxkKFxyXG4gICAgd2l0aExhYmVsKFxyXG4gICAgICB2ZXJ0ZXhEcm9wZG93bkVsZW1lbnQsXHJcbiAgICAgIFwidmlld2VyLXZlcnRleC1zaGFkZXItc2VsZWN0b3JcIixcclxuICAgICAgXCJWZXJ0ZXggU2hhZGVyXCJcclxuICAgIClcclxuICApO1xyXG5cclxuICBjb25zdCBbZnJhZ21lbnREcm9wZG93bkVsZW1lbnQsIGZyYWdtZW50RHJvcGRvd25Db250cm9sbGVyXSA9IGNyZWF0ZURyb3Bkb3duKFxyXG4gICAgYXN5bmMgKG5ld0ZyYWdtZW50KSA9PiB7XHJcbiAgICAgIHNlbGVjdGVkRnJhZ21lbnRGaWxlV2F0Y2hlclVuc3Vic2NyaWJlPy4oKTtcclxuXHJcbiAgICAgIGlmIChuZXdGcmFnbWVudCkge1xyXG4gICAgICAgIHNlbGVjdGVkRnJhZ21lbnRGaWxlV2F0Y2hlclVuc3Vic2NyaWJlID0gdnNjb2RlQXBpLnN1YnNjcmliZVRvRG9jdW1lbnRTYXZlKFxyXG4gICAgICAgICAgbmV3RnJhZ21lbnQuaWQsXHJcbiAgICAgICAgICAobmV3Q29udGVudCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZyYWdtZW50Q29udGVudCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgICAgIG9uU2hhZGVyQ29udGVudENoYW5nZWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZWxlY3RlZEZyYWdtZW50Q29udGVudCA9IG5ld0ZyYWdtZW50XHJcbiAgICAgICAgPyBhd2FpdCB2c2NvZGVBcGkuZ2V0RG9jdW1lbnRUZXh0KG5ld0ZyYWdtZW50LmlkKVxyXG4gICAgICAgIDogXCJcIjtcclxuICAgICAgb25TaGFkZXJDb250ZW50Q2hhbmdlZCgpO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIHdpdGhMYWJlbChcclxuICAgICAgZnJhZ21lbnREcm9wZG93bkVsZW1lbnQsXHJcbiAgICAgIFwidmlld2VyLWZyYWdtZW50LXNoYWRlci1zZWxlY3RvclwiLFxyXG4gICAgICBcIkZyYWdtZW50IFNoYWRlclwiXHJcbiAgICApXHJcbiAgKTtcclxuXHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChzaGFkZXJPcHRpb25zKTtcclxufTtcclxuXHJcbmNyZWF0ZVZpZXdlcigpO1xyXG4iLCJleHBvcnQgY29uc3QgY3JlYXRlU2VjdGlvblRpdGxlID0gKHRleHQ6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xyXG4gIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gYCR7Y2xhc3NOYW1lfSBzZWN0aW9uLXRpdGxlYDtcclxuICByZXR1cm4geyBlbGVtZW50IH07XHJcbn07XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=