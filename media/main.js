!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r="SHADERS",o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r},a={emptyItem:!0},u=function(e,t,n){var r=o(o({},a),n),u=document.createElement("select");u.className="dropdown-base "+t;var c=null,l=[],s=function(t){e(c=t)};u.onchange=function(){var e=l.find((function(e){return e.item.id===u.value}));e.item.id?s(e.item):s(null)};return[u,{setItems:function(e){u.innerHTML="",l.length=0,e.find((function(e){return e.id===(null==c?void 0:c.id)}))||s(null),(r.emptyItem?i([{id:"",display:""}],e):i(e)).forEach((function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.display,t.selected=e.id===(null==c?void 0:c.id),u.appendChild(t),l.push({element:t,item:e})}))},getItems:function(){return l.map((function(e){return e.item}))},setSelectedItemById:function(e){s(null),l.forEach((function(t){t.item.id===e?(t.element.selected=!0,s(t.item)):t.element.selected=!1}))},getSelectedItem:function(){return c},clearSelection:function(){l.forEach((function(e){return e.element.selected=!1})),s(null)}}]},c=function(e,t){return e.substring(0,e.length-t)},l=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},s=function(e,t){return e.hasOwnProperty(t)},d=acquireVsCodeApi(),f=function(){function e(){var e=this;this.eventListeners=[],window.addEventListener("message",(function(t){e.eventListeners.forEach((function(e){return e(t.data)}))}))}return e.prototype.getShaderDocuments=function(){var e=this,t=l();return d.postMessage({type:"getShaderDocuments",id:t}),new Promise((function(n){var r=function(o){"getShaderDocuments"===o.type&&o.id===t&&(n(o.payload.files),e.removeListener(r))};e.eventListeners.push(r)}))},e.prototype.getDocumentText=function(e){var t=this,n=l();return d.postMessage({type:"getDocumentText",id:n,payload:{fileName:e}}),new Promise((function(e){var r=function(o){"getDocumentText"===o.type&&o.id===n&&(e(o.payload.text),t.removeListener(r))};t.eventListeners.push(r)}))},e.prototype.subscribeToDocumentSave=function(e,t){var n=this;d.postMessage({type:"subscribeToDocumentTextChange",payload:{fileName:e}});var r=function(n){"onDocumentTextChange"===n.type&&n.payload.filePath===e&&t(n.payload.text)};return this.eventListeners.push(r),function(){n.removeListener(r),d.postMessage({type:"unsubscribeToDocumentTextChange",payload:{fileName:e}})}},e.prototype.removeListener=function(e){var t,n,r;t=this.eventListeners,n=e,(r=t.indexOf(n))>-1&&t.splice(r,1)},e}(),p=function(e,t,n){var r=document.createElement("button");return r.onclick=n,r.className=t,r.textContent=e,{element:r}},m=function(e,t,n){var r=document.createElement("div");r.className=t+" options-wrapper";var o=document.createElement("label");return o.className="options-label",o.textContent=n,e.className=e.className+" options-content",r.appendChild(o),r.appendChild(e),r},v=function(e,t){var n=document.createElement("div");return n.className=e,null==t||t.forEach((function(e){return n.appendChild(e)})),n},h=function(e,t,n,r,o){var i=document.createElement("div");i.className="edit-input-grid";for(var a=[],u=function(){return a.map((function(e){return e.value}))},c=0;c<n;c++){var l=document.createElement("div");l.className="edit-input-row";for(var s=function(n){var i=c*r+n,s=e[i],d=document.createElement("input"),f={element:d,value:s};Object.assign(d,o),d.className="edit-input",d.type="number",d.value=null==s?void 0:s.toString(),d.oninput=function(){a[i].value=Number(d.value),null==t||t(u())},a.push(f),l.appendChild(d)},d=0;d<r;d++)s(d);i.appendChild(l)}return[i,{setValues:function(e){return a.forEach((function(t,n){return t.value=e[n]}))},getValues:u,setReadonly:function(e){return a.forEach((function(t){return t.element.readOnly=e}))}}]},y=function(e){return h([0,0,0,0,0,0,0,0,0],e,3,3)},g={min:"0",max:"1",step:"0.1"},x=function(){function e(e){this.keySelector=e,this.map=new Map}return e.prototype.get=function(e){this.map.get(this.keySelector(e))},e.prototype.set=function(e,t){this.map.set(this.keySelector(e),t)},e.prototype.clear=function(){this.map.clear()},e}(),b=(new x((function(e){return e.name+";"+e.bufferType})),new x((function(e){return e.name+";"+e.uniformType})),function(e){var t;e.appendChild(m(function(e){var t=[.5,.5,.5,1],n=document.createElement("div");n.className="edit-input-color";var r=function(e){n.style.background="rgb("+255*e[0]+","+255*e[1]+","+255*e[2]+","+e[3]+")"};r(t);var o=v("row-with-gap"),i=h(t,(function(t){r(t),null==e||e(t)}),1,4,g),a=i[0],u=i[1];return o.appendChild(a),o.appendChild(n),[o,u]}()[0],"","u_color")),e.appendChild(m(h([0,0,0,0],t,1,4)[0],"","u_diffuse"));var n=y((function(e){return console.log(e)})),r=n[0],o=n[1],i=u((function(e){e&&("0"===e.id&&o.setReadonly(!1),"1"===e.id&&o.setReadonly(!0))}),"",{emptyItem:!1}),a=i[0],c=i[1];c.setItems([{id:"0",display:"Color picker"},{id:"1",display:"Custom2"}]),c.setSelectedItemById("0"),e.appendChild(m(v("column-with-gap",[a,r]),"","dobre diffuse")),e.appendChild(m(v("column-with-gap",[u((function(e){}))[0],y((function(e){return console.log(e)}))[0]]),"","u_diffuse2")),e.appendChild(m(v("column-with-gap",[u((function(e){}))[0],y((function(e){return console.log(e)}))[0]]),"","u_diffuse2"))}),w=function(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;var o=e.getShaderInfoLog(r);return e.deleteShader(r),{error:o}},S=function(e){var t=document.createElement("canvas");t.className=e;var n=t.getContext("webgl");if(!n)throw new Error("Unable to create webgl context");return[t,{compileShaders:function(e,t){var r=w(n,n.VERTEX_SHADER,e),o=w(n,n.FRAGMENT_SHADER,t),i=void 0;s(r,"error")&&(i=c(r.error,1));var a=void 0;if(s(o,"error")&&(a=c(o.error,1)),i||a)return[i,a];!function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;throw console.log("cos nie halo"),e.deleteProgram(r),new Error("Creating program failed: "+e.getProgramInfoLog(r))}(n,r,o);return Promise.resolve({})}}]},E=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};E(void 0,void 0,void 0,(function(){var e,t,n,o,i,a,c,l,s,d,h,y,g,x,w,T,N,P,D,I;return C(this,(function(L){var M,O,_;return e=new f,t=document.getElementById("viewer"),n=v("viewer-options"),o=v("viewer-shader-options"),i=v("viewer-content shader-errors"),a=S("viewer-content"),c=a[0],l=a[1],t.appendChild(c),t.appendChild(i),t.appendChild(n),s=function(e){c.style.visibility="canvas"===e?"visible":"collapse",i.style.visibility="errors"===e?"visible":"collapse"},x=function(){if(o.innerHTML="",console.log({fragment:g,vertex:y}),b(o),g&&y){var e=l.compileShaders(y,g);if(Array.isArray(e)){s("errors");var t=e,n=t[0],r=t[1],a=[];n&&a.push("VERTEX SHADER:",n),r&&a.push("FRAGMENT SHADER:",r),i.innerText=a.join("\r\n")}else s("canvas")}else s("none")},n.appendChild(v("viewer-shaders-title",[(M=r,O="",_=document.createElement("h3"),_.textContent=M,_.className=O+" section-title",{element:_}).element,p("Sync","viewer-refresh-button",(function(){e.getShaderDocuments().then((function(e){var t=e.map((function(e){return{id:e.filePath,display:e.fileName}}));N.setItems(t),I.setItems(t)}))})).element])),w=u((function(t){return E(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return null==d||d(),t&&(d=e.subscribeToDocumentSave(t.id,(function(e){y=e,x()}))),t?[4,e.getDocumentText(t.id)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return y=n,x(),[2]}}))}))})),T=w[0],N=w[1],n.appendChild(m(T,"viewer-vertex-shader-selector","Vertex Shader")),P=u((function(t){return E(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return null==h||h(),t&&(h=e.subscribeToDocumentSave(t.id,(function(e){g=e,x()}))),t?[4,e.getDocumentText(t.id)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return g=n,x(),[2]}}))}))})),D=P[0],I=P[1],n.appendChild(m(D,"viewer-fragment-shader-selector","Fragment Shader")),n.appendChild(o),[2]}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyYW5zbGF0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvZHJvcGRvd24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tbXVuaWNhdGlvblByb3h5LnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvY29tcG9uZW50cy9jcmVhdGVGQUJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvd3JhcHBlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL2NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NvbXBvbmVudHMvZWRpdFZlY3RvcjMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL2VkaXRDb2xvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL3NoYWRlck9wdGlvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci93ZWJnbF91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld2VyL2NyZWF0ZVdlYkdMQ2FudmFzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3ZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdlci9jb21wb25lbnRzL2NyZWF0ZVNlY3Rpb25UaXRsZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRyYW5zbGF0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwiZW1wdHlJdGVtIiwiY3JlYXRlRHJvcGRvd24iLCJvbkNoYW5nZSIsImNsYXNzTmFtZSIsIm9wdGlvbnMiLCJjb21iaW5lZE9wdGlvbnMiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2VsZWN0ZWRJdGVtIiwiaXRlbUVsZW1lbnRzIiwic2V0U2VsZWN0ZWRJdGVtIiwiaXRlbSIsIm9uY2hhbmdlIiwiZm91bmRFbGVtZW50IiwiZmluZCIsImUiLCJpZCIsInNldEl0ZW1zIiwiaXRlbXMiLCJpbm5lckhUTUwiLCJsZW5ndGgiLCJkaXNwbGF5IiwiZm9yRWFjaCIsIm9wdGlvbiIsInRleHRDb250ZW50Iiwic2VsZWN0ZWQiLCJhcHBlbmRDaGlsZCIsInB1c2giLCJnZXRJdGVtcyIsIm1hcCIsImllIiwic2V0U2VsZWN0ZWRJdGVtQnlJZCIsImdldFNlbGVjdGVkSXRlbSIsImNsZWFyU2VsZWN0aW9uIiwicmVtb3ZlTGFzdCIsInRleHQiLCJjb3VudCIsInN1YnN0cmluZyIsInV1aWR2NCIsInJlcGxhY2UiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJoYXNQcm9wZXJ0eSIsIm9iaiIsInByb3AiLCJhY3F1aXJlVnNDb2RlQXBpIiwiZXZlbnRMaXN0ZW5lcnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJsaXN0ZW5lciIsImRhdGEiLCJnZXRTaGFkZXJEb2N1bWVudHMiLCJtZXNzYWdlSWQiLCJwb3N0TWVzc2FnZSIsInR5cGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm1lc3NhZ2UiLCJwYXlsb2FkIiwiZmlsZXMiLCJyZW1vdmVMaXN0ZW5lciIsImdldERvY3VtZW50VGV4dCIsImZpbGVOYW1lIiwic3Vic2NyaWJlVG9Eb2N1bWVudFNhdmUiLCJmaWxlUGF0aCIsImNhbGxiYWNrIiwidGhpcyIsImFycmF5IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiY3JlYXRlRkFCdXR0b24iLCJvbkNsaWNrIiwiYnV0dG9uIiwib25jbGljayIsIndpdGhMYWJlbCIsIndyYXBwZXIiLCJsYWJlbCIsImNyZWF0ZURpdiIsImNoaWxkcmVuIiwiZGl2IiwiY3JlYXRlTXVsdGlOdW1iZXJJbnB1dCIsImluaXRpYWxWYWx1ZSIsInJvd3MiLCJjb2x1bW5zIiwiaW5wdXRPcHRpb25zIiwiaW5wdXRHcmlkIiwiZ2V0VmFsdWVzIiwicm93IiwiaW5wdXRSb3ciLCJjb2x1bW4iLCJpbnB1dCIsIml0ZW1FbGVtZW50IiwiYXNzaWduIiwib25pbnB1dCIsIk51bWJlciIsInNldFZhbHVlcyIsIm5ld1ZhbHVlcyIsInNldFJlYWRvbmx5IiwicmVhZG9ubHkiLCJyZWFkT25seSIsImNyZWF0ZU1hdHJpeDMiLCJjb2xvcklucHV0UHJvcHMiLCJtaW4iLCJtYXgiLCJzdGVwIiwia2V5U2VsZWN0b3IiLCJNYXAiLCJzZXQiLCJjbGVhciIsImFwcGVuZFdpdGhTaGFkZXJPcHRpb25zIiwiQ29tcG9zaXRlS2V5TWFwIiwiYnVmZmVyVHlwZSIsInVuaWZvcm1UeXBlIiwiY29sb3JEaXYiLCJzZXRDb2xvciIsImNvbG9yIiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwiY29udGFpbmVyIiwiY29udHJvbGxlciIsImNyZWF0ZUNvbG9yNCIsIm5ld3ZhbCIsImNvbnNvbGUiLCJsb2ciLCJtYXQzZWwiLCJtYXQzY29uIiwic2VsIiwiZWRpZmYiLCJjZGlmZiIsIm5ld0ZyYWdtZW50IiwiY29tcGlsZVNoYWRlciIsInJlbmRlcmluZ0NvbnRleHQiLCJzb3VyY2UiLCJzaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJzaGFkZXJTb3VyY2UiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImVycm9yIiwiZ2V0U2hhZGVySW5mb0xvZyIsImRlbGV0ZVNoYWRlciIsImNyZWF0ZVdlYkdMQ2FudmFzIiwiY2FudmFzIiwiY29udGV4dCIsImdldENvbnRleHQiLCJFcnJvciIsImNvbXBpbGVTaGFkZXJzIiwidmVydGV4U2hhZGVyQ29udGVudCIsImZyYWdtZW50U2hhZGVyQ29udGVudCIsInZlcnRleFNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJmcmFnbWVudFNoYWRlciIsIkZSQUdNRU5UX1NIQURFUiIsInZlcnRleEVycm9yIiwidW5kZWZpbmVkIiwiZnJhZ21lbnRFcnJvciIsInByb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJkZWxldGVQcm9ncmFtIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ2c2NvZGVBcGkiLCJ2aWV3ZXIiLCJnZXRFbGVtZW50QnlJZCIsInZpZXdlck9wdGlvbnMiLCJzaGFkZXJPcHRpb25zIiwic2hhZGVyQ29tcGlsYXRpb25FcnJvcnMiLCJ3ZWJHTENhbnZhcyIsIndlYkdMQ29udHJvbGxlciIsInNob3dDb250ZW50IiwiY29udGVudCIsInZpc2liaWxpdHkiLCJvblNoYWRlckNvbnRlbnRDaGFuZ2VkIiwiZnJhZ21lbnQiLCJzZWxlY3RlZEZyYWdtZW50Q29udGVudCIsInZlcnRleCIsInNlbGVjdGVkVmVydGV4Q29udGVudCIsInJlc3VsdCIsIkFycmF5IiwiaXNBcnJheSIsInZlcnRleFNoYWRlckVycm9ycyIsImZyYWdtZW50U2hhZGVyRXJyb3JzIiwiZXJyb3JzIiwiaW5uZXJUZXh0Iiwiam9pbiIsInRoZW4iLCJzZCIsImYiLCJ2ZXJ0ZXhEcm9wZG93bkNvbnRyb2xsZXIiLCJmcmFnbWVudERyb3Bkb3duQ29udHJvbGxlciIsIm5ld1ZlcnRleCIsInNlbGVjdGVkVmVydGV4RmlsZVdhdGNoZXJVbnN1YnNjcmliZSIsIm5ld0NvbnRlbnQiLCJ2ZXJ0ZXhEcm9wZG93bkVsZW1lbnQiLCJzZWxlY3RlZEZyYWdtZW50RmlsZVdhdGNoZXJVbnN1YnNjcmliZSIsImZyYWdtZW50RHJvcGRvd25FbGVtZW50Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBF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SyxFQUFFakksYUFHYmtJLEVBQXlCakwsU0FBUzRDLEdBQ2xDc0ksRUFBMkJsTCxTQUFTNEMsU0FFckN4RCxXQUlELEVBQW9ETCxHQUN4RCxTQUFPb00sR0FBUywwQywrREFDZEMsYUFFSUQsSUFDRkMsRUFBdUM5QixFQUFVdEcsd0JBQy9DbUksRUFBVXBMLElBQ1YsU0FBQ3NMLEdBQ0NoQixFQUF3QmdCLEVBQ3hCcEIsUUFLa0JrQixFQUNwQixHQUFNN0IsRUFBVXhHLGdCQUFnQnFJLEVBQVVwTCxLQUR0QixNLGNBQ3BCLFcsYUFDQSxLLHdCQUZKc0ssRUFBd0IsRUFHeEJKLEksY0FqQkdxQixFQUFxQixLQUFFTCxFQUF3QixLQW9CdER4QixFQUFjaEosWUFDWm1ELEVBQ0UwSCxFQUNBLGdDQUNBLGtCQUlFLEVBQXdEdk0sR0FDNUQsU0FBT29JLEdBQVcsMEMsK0RBQ2hCb0UsYUFFSXBFLElBQ0ZvRSxFQUF5Q2pDLEVBQVV0Ryx3QkFDakRtRSxFQUFZcEgsSUFDWixTQUFDc0wsR0FDQ2xCLEVBQTBCa0IsRUFDMUJwQixRQUtvQjlDLEVBQ3RCLEdBQU1tQyxFQUFVeEcsZ0JBQWdCcUUsRUFBWXBILEtBRHRCLE0sY0FDdEIsVyxhQUNBLEssd0JBRkpvSyxFQUEwQixFQUcxQkYsSSxjQWpCR3VCLEVBQXVCLEtBQUVOLEVBQTBCLEtBb0IxRHpCLEVBQWNoSixZQUNabUQsRUFDRTRILEVBQ0Esa0NBQ0Esb0JBSUovQixFQUFjaEosWUFBWWlKLEciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBjb25zdCB0cmFuc2xhdGlvbnMgPSB7XHJcbiAgICBzaGFkZXJzOiBcIlNIQURFUlNcIlxyXG59IiwiZXhwb3J0IHR5cGUgRHJvcGRvd25JdGVtID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZGlzcGxheTogc3RyaW5nO1xyXG59O1xyXG5cclxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgZW1wdHlJdGVtOiB0cnVlXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVEcm9wZG93biA9IChcclxuICAvL2luaXRpYWxWYWx1ZTogRHJvcGRvd25JdGVtIHwgbnVsbCxcclxuICBvbkNoYW5nZTogKGl0ZW06IERyb3Bkb3duSXRlbSB8IG51bGwpID0+IHZvaWQsXHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nLFxyXG4gIG9wdGlvbnM/OiB7IGVtcHR5SXRlbTogYm9vbGVhbiB9IC8vcGxhY2Vob2xkZXJcclxuKTogW1xyXG4gICAgSFRNTFNlbGVjdEVsZW1lbnQsXHJcbiAgICB7XHJcbiAgICAgIHNldEl0ZW1zOiAoaXRlbXM6IERyb3Bkb3duSXRlbVtdKSA9PiB2b2lkO1xyXG4gICAgICBnZXRJdGVtczogKCkgPT4gRHJvcGRvd25JdGVtW107XHJcbiAgICAgIHNldFNlbGVjdGVkSXRlbUJ5SWQ6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgICBnZXRTZWxlY3RlZEl0ZW06ICgpID0+IERyb3Bkb3duSXRlbSB8IG51bGw7XHJcbiAgICAgIGNsZWFyU2VsZWN0aW9uOiAoKSA9PiB2b2lkO1xyXG4gICAgfVxyXG4gIF0gPT4ge1xyXG4gIGNvbnN0IGNvbWJpbmVkT3B0aW9ucyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICBlbGVtZW50LmNsYXNzTmFtZSA9IGBkcm9wZG93bi1iYXNlICR7Y2xhc3NOYW1lfWA7XHJcblxyXG4gIGxldCBzZWxlY3RlZEl0ZW06IERyb3Bkb3duSXRlbSB8IG51bGwgPSBudWxsO1xyXG4gIGxldCBpdGVtRWxlbWVudHM6IHsgZWxlbWVudDogSFRNTE9wdGlvbkVsZW1lbnQ7IGl0ZW06IERyb3Bkb3duSXRlbSB9W10gPSBbXTtcclxuICBjb25zdCBzZXRTZWxlY3RlZEl0ZW0gPSAoaXRlbTogRHJvcGRvd25JdGVtIHwgbnVsbCkgPT4ge1xyXG4gICAgc2VsZWN0ZWRJdGVtID0gaXRlbTtcclxuICAgIG9uQ2hhbmdlKHNlbGVjdGVkSXRlbSk7XHJcbiAgfTtcclxuXHJcbiAgZWxlbWVudC5vbmNoYW5nZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGZvdW5kRWxlbWVudCA9IGl0ZW1FbGVtZW50cy5maW5kKChlKSA9PiBlLml0ZW0uaWQgPT09IGVsZW1lbnQudmFsdWUpO1xyXG5cclxuICAgIGlmIChmb3VuZEVsZW1lbnQuaXRlbS5pZCkgc2V0U2VsZWN0ZWRJdGVtKGZvdW5kRWxlbWVudC5pdGVtKTtcclxuICAgIGVsc2Ugc2V0U2VsZWN0ZWRJdGVtKG51bGwpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNldEl0ZW1zID0gKGl0ZW1zOiBEcm9wZG93bkl0ZW1bXSkgPT4ge1xyXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgaXRlbUVsZW1lbnRzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgaWYgKCFpdGVtcy5maW5kKChpKSA9PiBpLmlkID09PSBzZWxlY3RlZEl0ZW0/LmlkKSkge1xyXG4gICAgICBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3SXRlbXMgPSBjb21iaW5lZE9wdGlvbnMuZW1wdHlJdGVtID8gW3sgaWQ6IFwiXCIsIGRpc3BsYXk6IFwiXCIgfSwgLi4uaXRlbXNdIDogWy4uLml0ZW1zXTtcclxuICAgIG5ld0l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgb3B0aW9uLnZhbHVlID0gaXRlbS5pZDtcclxuICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gaXRlbS5kaXNwbGF5O1xyXG4gICAgICBvcHRpb24uc2VsZWN0ZWQgPSBpdGVtLmlkID09PSBzZWxlY3RlZEl0ZW0/LmlkO1xyXG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgIGl0ZW1FbGVtZW50cy5wdXNoKHsgZWxlbWVudDogb3B0aW9uLCBpdGVtIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0SXRlbXMgPSAoKSA9PiBpdGVtRWxlbWVudHMubWFwKChpZSkgPT4gaWUuaXRlbSk7XHJcbiAgY29uc3Qgc2V0U2VsZWN0ZWRJdGVtQnlJZCA9IChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XHJcbiAgICBpdGVtRWxlbWVudHMuZm9yRWFjaCgoaWUpID0+IHtcclxuICAgICAgaWYgKGllLml0ZW0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgaWUuZWxlbWVudC5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgc2V0U2VsZWN0ZWRJdGVtKGllLml0ZW0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGllLmVsZW1lbnQuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0U2VsZWN0ZWRJdGVtID0gKCkgPT4gc2VsZWN0ZWRJdGVtO1xyXG4gIGNvbnN0IGNsZWFyU2VsZWN0aW9uID0gKCkgPT4ge1xyXG4gICAgaXRlbUVsZW1lbnRzLmZvckVhY2goKGllKSA9PiAoaWUuZWxlbWVudC5zZWxlY3RlZCA9IGZhbHNlKSk7XHJcbiAgICBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIFtcclxuICAgIGVsZW1lbnQsXHJcbiAgICB7XHJcbiAgICAgIHNldEl0ZW1zLFxyXG4gICAgICBnZXRJdGVtcyxcclxuICAgICAgc2V0U2VsZWN0ZWRJdGVtQnlJZCxcclxuICAgICAgZ2V0U2VsZWN0ZWRJdGVtLFxyXG4gICAgICBjbGVhclNlbGVjdGlvbixcclxuICAgIH0sXHJcbiAgXTtcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IHJlbW92ZSA9IDxUPihhcnJheTogVFtdLCBpdGVtOiBUKSA9PiB7XHJcbiAgY29uc3QgaW5kZXggPSBhcnJheS5pbmRleE9mKGl0ZW0pO1xyXG5cclxuICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcmVtb3ZlTGFzdCA9ICh0ZXh0OiBzdHJpbmcsIGNvdW50OiBudW1iZXIpID0+IHtcclxuICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgdGV4dC5sZW5ndGggLSBjb3VudCk7XHJcbn07XHJcblxyXG4vL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbmV4cG9ydCBjb25zdCB1dWlkdjQgPSAoKSA9PiB7XHJcbiAgcmV0dXJuIFwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgdmFyIHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDAsXHJcbiAgICAgIHYgPSBjID09IFwieFwiID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYXNQcm9wZXJ0eSA9IDxUIGV4dGVuZHMge30sIFAgZXh0ZW5kcyBQcm9wZXJ0eUtleT4oXHJcbiAgb2JqOiBULFxyXG4gIHByb3A6IFBcclxuKTogb2JqIGlzIFQgJiBSZWNvcmQ8UCwgdW5rbm93bj4gPT4ge1xyXG4gIHJldHVybiBvYmouaGFzT3duUHJvcGVydHkocHJvcCk7XHJcbn07XHJcbiIsImltcG9ydCB7IHJlbW92ZSwgdXVpZHY0IH0gZnJvbSAnLi8uLi91dGlscyc7XHJcbmRlY2xhcmUgY29uc3QgYWNxdWlyZVZzQ29kZUFwaTogKCkgPT4ge1xyXG4gIC8vZ2V0U3RhdGU6ICgpID0+IGFueTtcclxuICAvL3NldFN0YXRlOiAoc3RhdGU6IGFueSkgPT4gdm9pZDtcclxuICBwb3N0TWVzc2FnZTogKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlcXVlc3QpID0+IHZvaWQ7XHJcbn07XHJcbmV4cG9ydCBjb25zdCB2c2NvZGVBcGkgPSBhY3F1aXJlVnNDb2RlQXBpKCk7XHJcblxyXG5leHBvcnQgdHlwZSBWc0NvZGVBcGlQcm94eU1lc3NhZ2VSZXF1ZXN0ID1cclxuICB8IHsgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIiwgaWQ6IHN0cmluZywgfVxyXG4gIHwgeyB0eXBlOiBcImdldERvY3VtZW50VGV4dFwiLCBpZDogc3RyaW5nLCBwYXlsb2FkOiB7IGZpbGVOYW1lOiBzdHJpbmcgfSB9XHJcbiAgfCB7IHR5cGU6IFwic3Vic2NyaWJlVG9Eb2N1bWVudFRleHRDaGFuZ2VcIiwgcGF5bG9hZDogeyBmaWxlTmFtZTogc3RyaW5nIH0gfVxyXG4gIHwgeyB0eXBlOiBcInVuc3Vic2NyaWJlVG9Eb2N1bWVudFRleHRDaGFuZ2VcIiwgcGF5bG9hZDogeyBmaWxlTmFtZTogc3RyaW5nIH0gfTtcclxuXHJcbmV4cG9ydCB0eXBlIFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlID0ge1xyXG4gIHR5cGU6IFwiZ2V0U2hhZGVyRG9jdW1lbnRzXCI7XHJcbiAgaWQ6IHN0cmluZyxcclxuICBwYXlsb2FkOiB7IGZpbGVzOiB7IGZpbGVQYXRoOiBzdHJpbmc7IGZpbGVOYW1lOiBzdHJpbmcgfVtdIH07XHJcbn0gfFxyXG57IHR5cGU6IFwiZ2V0RG9jdW1lbnRUZXh0XCIsIGlkOiBzdHJpbmcsIHBheWxvYWQ6IHsgZmlsZU5hbWU6IHN0cmluZywgdGV4dDogc3RyaW5nIH0gfSB8XHJcbnsgdHlwZTogXCJvbkRvY3VtZW50VGV4dENoYW5nZVwiLCBwYXlsb2FkOiB7IGZpbGVQYXRoOiBzdHJpbmcsIHRleHQ6IHN0cmluZyB9IH1cclxuXHJcbmV4cG9ydCB0eXBlIFVuc3Vic2NyaWJlID0gKCkgPT4gdm9pZDtcclxuXHJcbnR5cGUgUHJveHlSZXNwb25zZUxpc3RlbmVyID0gKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZzQ29kZUFwaVByb3h5IHtcclxuICBldmVudExpc3RlbmVyczogUHJveHlSZXNwb25zZUxpc3RlbmVyW10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKGV2ZW50LmRhdGEpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2hhZGVyRG9jdW1lbnRzKCkge1xyXG4gICAgY29uc3QgbWVzc2FnZUlkID0gdXVpZHY0KCk7XHJcblxyXG4gICAgdnNjb2RlQXBpLnBvc3RNZXNzYWdlKHtcclxuICAgICAgdHlwZTogXCJnZXRTaGFkZXJEb2N1bWVudHNcIixcclxuICAgICAgaWQ6IG1lc3NhZ2VJZFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHsgZmlsZVBhdGg6IHN0cmluZzsgZmlsZU5hbWU6IHN0cmluZyB9W10+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJnZXRTaGFkZXJEb2N1bWVudHNcIiAmJiBtZXNzYWdlLmlkID09PSBtZXNzYWdlSWQpIHtcclxuICAgICAgICAgIHJlc29sdmUobWVzc2FnZS5wYXlsb2FkLmZpbGVzKTtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldERvY3VtZW50VGV4dChmaWxlTmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlSWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgICB2c2NvZGVBcGkucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiBcImdldERvY3VtZW50VGV4dFwiLFxyXG4gICAgICBpZDogbWVzc2FnZUlkLFxyXG4gICAgICBwYXlsb2FkOiB7IGZpbGVOYW1lIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJnZXREb2N1bWVudFRleHRcIiAmJiBtZXNzYWdlLmlkID09PSBtZXNzYWdlSWQpIHtcclxuICAgICAgICAgIHJlc29sdmUobWVzc2FnZS5wYXlsb2FkLnRleHQpO1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlVG9Eb2N1bWVudFNhdmUoZmlsZVBhdGg6IHN0cmluZywgY2FsbGJhY2s6IChuZXdDb250ZW50OiBzdHJpbmcpID0+IHZvaWQpOiBVbnN1YnNjcmliZSB7XHJcbiAgICB2c2NvZGVBcGkucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiBcInN1YnNjcmliZVRvRG9jdW1lbnRUZXh0Q2hhbmdlXCIsXHJcbiAgICAgIHBheWxvYWQ6IHsgZmlsZU5hbWU6IGZpbGVQYXRoIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGxpc3RlbmVyID0gKG1lc3NhZ2U6IFZzQ29kZUFwaVByb3h5TWVzc2FnZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwib25Eb2N1bWVudFRleHRDaGFuZ2VcIiAmJiBtZXNzYWdlLnBheWxvYWQuZmlsZVBhdGggPT09IGZpbGVQYXRoKSB7XHJcbiAgICAgICAgY2FsbGJhY2sobWVzc2FnZS5wYXlsb2FkLnRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xyXG4gICAgICB2c2NvZGVBcGkucG9zdE1lc3NhZ2UoeyB0eXBlOiBcInVuc3Vic2NyaWJlVG9Eb2N1bWVudFRleHRDaGFuZ2VcIiwgcGF5bG9hZDogeyBmaWxlTmFtZTogZmlsZVBhdGggfSB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcjogUHJveHlSZXNwb25zZUxpc3RlbmVyKSB7XHJcbiAgICByZW1vdmUodGhpcy5ldmVudExpc3RlbmVycywgbGlzdGVuZXIpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBjcmVhdGVGQUJ1dHRvbiA9IChcclxuICB0ZXh0OiBzdHJpbmcsXHJcbiAgY2xhc3NOYW1lOiBzdHJpbmcsXHJcbiAgb25DbGljazogKCkgPT4gdm9pZFxyXG4pID0+IHtcclxuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJ1dHRvbi5vbmNsaWNrID0gb25DbGljaztcclxuICBidXR0b24uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIGJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgcmV0dXJuIHsgZWxlbWVudDogYnV0dG9uIH07XHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCB3aXRoTGFiZWwgPSAoXHJcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXHJcbiAgY2xhc3NOYW1lOiBzdHJpbmcsXHJcbiAgdGV4dDogc3RyaW5nXHJcbikgPT4ge1xyXG4gIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHdyYXBwZXIuY2xhc3NOYW1lID0gYCR7Y2xhc3NOYW1lfSBvcHRpb25zLXdyYXBwZXJgO1xyXG4gIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xyXG4gIGxhYmVsLmNsYXNzTmFtZSA9IFwib3B0aW9ucy1sYWJlbFwiO1xyXG4gIGxhYmVsLnRleHRDb250ZW50ID0gdGV4dDtcclxuICBlbGVtZW50LmNsYXNzTmFtZSA9IGAke2VsZW1lbnQuY2xhc3NOYW1lfSBvcHRpb25zLWNvbnRlbnRgO1xyXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgcmV0dXJuIHdyYXBwZXI7XHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCBjcmVhdGVEaXYgPSAoY2xhc3NOYW1lOiBzdHJpbmcsIGNoaWxkcmVuPzogSFRNTEVsZW1lbnRbXSkgPT4ge1xyXG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICBjaGlsZHJlbj8uZm9yRWFjaCgoYykgPT4gZGl2LmFwcGVuZENoaWxkKGMpKTtcclxuICByZXR1cm4gZGl2O1xyXG59O1xyXG4iLCJpbXBvcnQgeyBjcmVhdGVEaXYgfSBmcm9tIFwiLi9jb21tb25cIjtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU11bHRpTnVtYmVySW5wdXQgPSA8VCBleHRlbmRzIG51bWJlcltdPihcclxuICBpbml0aWFsVmFsdWU6IFQsXHJcbiAgb25DaGFuZ2U6IChuZXdWYWx1ZTogVCkgPT4gdm9pZCxcclxuICByb3dzOiBudW1iZXIsXHJcbiAgY29sdW1uczogbnVtYmVyLFxyXG4gIGlucHV0T3B0aW9ucz86IFBhcnRpYWw8SFRNTElucHV0RWxlbWVudD5cclxuKTogW1xyXG4gIEhUTUxEaXZFbGVtZW50LFxyXG4gIHtcclxuICAgIHNldFZhbHVlczogKHZhbHVlOiBUKSA9PiB2b2lkO1xyXG4gICAgc2V0UmVhZG9ubHk6IChyZWFkb25seTogYm9vbGVhbikgPT4gdm9pZDtcclxuICAgIGdldFZhbHVlczogKCkgPT4gVDtcclxuICB9XHJcbl0gPT4ge1xyXG4gIGNvbnN0IGlucHV0R3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgaW5wdXRHcmlkLmNsYXNzTmFtZSA9IFwiZWRpdC1pbnB1dC1ncmlkXCI7XHJcblxyXG4gIGNvbnN0IGl0ZW1FbGVtZW50czogeyBlbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50OyB2YWx1ZTogbnVtYmVyIH1bXSA9IFtdO1xyXG4gIGNvbnN0IHNldFZhbHVlcyA9IChuZXdWYWx1ZXM6IFQpID0+XHJcbiAgICBpdGVtRWxlbWVudHMuZm9yRWFjaCgoaWUsIGluZGV4KSA9PiAoaWUudmFsdWUgPSBuZXdWYWx1ZXNbaW5kZXhdKSk7XHJcbiAgY29uc3QgZ2V0VmFsdWVzID0gKCkgPT4gaXRlbUVsZW1lbnRzLm1hcCgoaWUpID0+IGllLnZhbHVlKSBhcyBUO1xyXG4gIGNvbnN0IHNldFJlYWRvbmx5ID0gKHJlYWRvbmx5OiBib29sZWFuKSA9PlxyXG4gICAgaXRlbUVsZW1lbnRzLmZvckVhY2goKGllKSA9PiAoaWUuZWxlbWVudC5yZWFkT25seSA9IHJlYWRvbmx5KSk7XHJcblxyXG4gIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHJvd3M7IHJvdysrKSB7XHJcbiAgICBjb25zdCBpbnB1dFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBpbnB1dFJvdy5jbGFzc05hbWUgPSBcImVkaXQtaW5wdXQtcm93XCI7XHJcblxyXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgY29sdW1uczsgY29sdW1uKyspIHtcclxuICAgICAgY29uc3QgaW5kZXggPSByb3cgKiBjb2x1bW5zICsgY29sdW1uO1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IGluaXRpYWxWYWx1ZVtpbmRleF07XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICBjb25zdCBpdGVtRWxlbWVudCA9IHsgZWxlbWVudDogaW5wdXQsIHZhbHVlIH07XHJcbiAgICAgIE9iamVjdC5hc3NpZ24oaW5wdXQsIGlucHV0T3B0aW9ucyk7XHJcbiAgICAgIGlucHV0LmNsYXNzTmFtZSA9IFwiZWRpdC1pbnB1dFwiO1xyXG4gICAgICBpbnB1dC50eXBlID0gXCJudW1iZXJcIjtcclxuICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZT8udG9TdHJpbmcoKTtcclxuICAgICAgaW5wdXQub25pbnB1dCA9ICgpID0+IHtcclxuICAgICAgICBpdGVtRWxlbWVudHNbaW5kZXhdLnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKTtcclxuICAgICAgICBvbkNoYW5nZT8uKGdldFZhbHVlcygpKTtcclxuICAgICAgfTtcclxuICAgICAgaXRlbUVsZW1lbnRzLnB1c2goaXRlbUVsZW1lbnQpO1xyXG4gICAgICBpbnB1dFJvdy5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5wdXRHcmlkLmFwcGVuZENoaWxkKGlucHV0Um93KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBbXHJcbiAgICBpbnB1dEdyaWQsXHJcbiAgICB7XHJcbiAgICAgIHNldFZhbHVlcyxcclxuICAgICAgZ2V0VmFsdWVzLFxyXG4gICAgICBzZXRSZWFkb25seSxcclxuICAgIH0sXHJcbiAgXTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIE1hdHJpeDMgPSBbXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXIsXHJcbiAgbnVtYmVyLFxyXG4gIG51bWJlcixcclxuICBudW1iZXJcclxuXTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1hdHJpeDMgPSAob25DaGFuZ2U/OiAobmV3VmFsdWU6IE1hdHJpeDMpID0+IHZvaWQpID0+XHJcbiAgY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxNYXRyaXgzPihbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sIG9uQ2hhbmdlLCAzLCAzKTtcclxuXHJcbmV4cG9ydCB0eXBlIFZlY3RvcjMgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVWZWN0b3IzID0gKG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBWZWN0b3IzKSA9PiB2b2lkKSA9PlxyXG4gIGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8VmVjdG9yMz4oWzAsIDAsIDBdLCBvbkNoYW5nZSwgMSwgMyk7XHJcblxyXG5leHBvcnQgdHlwZSBWZWN0b3I0ID0gW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVWZWN0b3I0ID0gKG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBWZWN0b3I0KSA9PiB2b2lkKSA9PlxyXG4gIGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8VmVjdG9yND4oWzAsIDAsIDAsIDBdLCBvbkNoYW5nZSwgMSwgNCk7XHJcbiIsImltcG9ydCB7IGNyZWF0ZURpdiB9IGZyb20gXCIuL2NvbW1vblwiO1xyXG5pbXBvcnQgeyBjcmVhdGVNdWx0aU51bWJlcklucHV0IH0gZnJvbSBcIi4vZWRpdFZlY3RvcjNcIjtcclxuXHJcbmNvbnN0IGNvbG9ySW5wdXRQcm9wcyA9IHtcclxuICBtaW46IFwiMFwiLFxyXG4gIG1heDogXCIxXCIsXHJcbiAgc3RlcDogXCIwLjFcIixcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENvbG9yNCA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlQ29sb3I0ID0gKFxyXG4gIG9uQ2hhbmdlPzogKG5ld1ZhbHVlOiBDb2xvcjQpID0+IHZvaWRcclxuKTogW1xyXG4gIEhUTUxEaXZFbGVtZW50LFxyXG4gIHtcclxuICAgIHNldFZhbHVlczogKHZhbHVlOiBDb2xvcjQpID0+IHZvaWQ7XHJcbiAgICBzZXRSZWFkb25seTogKHJlYWRvbmx5OiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgZ2V0VmFsdWVzOiAoKSA9PiBDb2xvcjQ7XHJcbiAgfVxyXG5dID0+IHtcclxuICBjb25zdCBpbml0aWFsVmFsdWUgPSBbMC41LCAwLjUsIDAuNSwgMV0gYXMgQ29sb3I0O1xyXG4gIGNvbnN0IGNvbG9yRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBjb2xvckRpdi5jbGFzc05hbWUgPSBcImVkaXQtaW5wdXQtY29sb3JcIjtcclxuICBjb25zdCBzZXRDb2xvciA9IChjb2xvcjogQ29sb3I0KSA9PiB7XHJcbiAgICBjb2xvckRpdi5zdHlsZS5iYWNrZ3JvdW5kID0gYHJnYigke2NvbG9yWzBdICogMjU1fSwke2NvbG9yWzFdICogMjU1fSwke1xyXG4gICAgICBjb2xvclsyXSAqIDI1NVxyXG4gICAgfSwke2NvbG9yWzNdfSlgO1xyXG4gIH07XHJcblxyXG4gIHNldENvbG9yKGluaXRpYWxWYWx1ZSk7XHJcblxyXG4gIGNvbnN0IG9uQ2hhbmdlSW50ZXJuYWwgPSAoY29sb3I6IENvbG9yNCkgPT4ge1xyXG4gICAgc2V0Q29sb3IoY29sb3IpO1xyXG4gICAgb25DaGFuZ2U/Lihjb2xvcik7XHJcbiAgfTtcclxuICBjb25zdCBjb250YWluZXIgPSBjcmVhdGVEaXYoXCJyb3ctd2l0aC1nYXBcIik7XHJcbiAgY29uc3QgW2VsZW1lbnQsIGNvbnRyb2xsZXJdID0gY3JlYXRlTXVsdGlOdW1iZXJJbnB1dDxDb2xvcjQ+KFxyXG4gICAgaW5pdGlhbFZhbHVlLFxyXG4gICAgb25DaGFuZ2VJbnRlcm5hbCxcclxuICAgIDEsXHJcbiAgICA0LFxyXG4gICAgY29sb3JJbnB1dFByb3BzXHJcbiAgKTtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbG9yRGl2KTtcclxuICByZXR1cm4gW2NvbnRhaW5lciwgY29udHJvbGxlcl07XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBDb2xvcjMgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVDb2xvcjMgPSAoXHJcbiAgb25DaGFuZ2U/OiAobmV3VmFsdWU6IENvbG9yMykgPT4gdm9pZFxyXG4pOiBbXHJcbiAgSFRNTERpdkVsZW1lbnQsXHJcbiAge1xyXG4gICAgc2V0VmFsdWVzOiAodmFsdWU6IENvbG9yMykgPT4gdm9pZDtcclxuICAgIHNldFJlYWRvbmx5OiAocmVhZG9ubHk6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBnZXRWYWx1ZXM6ICgpID0+IENvbG9yMztcclxuICB9XHJcbl0gPT4ge1xyXG4gIGNvbnN0IGluaXRpYWxWYWx1ZSA9IFswLjUsIDAuNSwgMC41XSBhcyBDb2xvcjM7XHJcbiAgY29uc3QgY29sb3JEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGNvbG9yRGl2LmNsYXNzTmFtZSA9IFwiZWRpdC1pbnB1dC1jb2xvclwiO1xyXG4gIGNvbnN0IHNldENvbG9yID0gKGNvbG9yOiBDb2xvcjMpID0+IHtcclxuICAgIGNvbG9yRGl2LnN0eWxlLmJhY2tncm91bmQgPSBgcmdiKCR7Y29sb3JbMF0gKiAyNTV9LCR7Y29sb3JbMV0gKiAyNTV9LCR7XHJcbiAgICAgIGNvbG9yWzJdICogMjU1XHJcbiAgICB9LDEpYDtcclxuICB9O1xyXG5cclxuICBzZXRDb2xvcihpbml0aWFsVmFsdWUpO1xyXG5cclxuICBjb25zdCBvbkNoYW5nZUludGVybmFsID0gKGNvbG9yOiBDb2xvcjMpID0+IHtcclxuICAgIHNldENvbG9yKGNvbG9yKTtcclxuICAgIG9uQ2hhbmdlPy4oY29sb3IpO1xyXG4gIH07XHJcbiAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlRGl2KFwicm93LXdpdGgtZ2FwXCIpO1xyXG4gIGNvbnN0IFtlbGVtZW50LCBjb250cm9sbGVyXSA9IGNyZWF0ZU11bHRpTnVtYmVySW5wdXQ8Q29sb3IzPihcclxuICAgIGluaXRpYWxWYWx1ZSxcclxuICAgIG9uQ2hhbmdlSW50ZXJuYWwsXHJcbiAgICAxLFxyXG4gICAgNCxcclxuICAgIGNvbG9ySW5wdXRQcm9wc1xyXG4gICk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjb2xvckRpdik7XHJcbiAgcmV0dXJuIFtjb250YWluZXIsIGNvbnRyb2xsZXJdO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBjcmVhdGVEaXYgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbW1vblwiO1xyXG5pbXBvcnQgeyBjcmVhdGVEcm9wZG93biB9IGZyb20gXCIuL2NvbXBvbmVudHMvZHJvcGRvd25cIjtcclxuaW1wb3J0IHsgY3JlYXRlQ29sb3I0IH0gZnJvbSBcIi4vY29tcG9uZW50cy9lZGl0Q29sb3JcIjtcclxuaW1wb3J0IHtcclxuICBjcmVhdGVWZWN0b3IzLFxyXG4gIGNyZWF0ZVZlY3RvcjQsXHJcbiAgY3JlYXRlTWF0cml4MyxcclxufSBmcm9tIFwiLi9jb21wb25lbnRzL2VkaXRWZWN0b3IzXCI7XHJcbmltcG9ydCB7IHdpdGhMYWJlbCB9IGZyb20gXCIuL2NvbXBvbmVudHMvd3JhcHBlcnNcIjtcclxuXHJcbi8vY29uc3QgYXR0cmlidXRlQnVmZmVyc1xyXG5cclxuLy9uYW1lLCB0eXBlID0+IHZhbHVlXHJcblxyXG5leHBvcnQgdHlwZSBBdHRyaWJ1dGVCdWZmZXJUeXBlID0gXCJ2ZWN0b3IyXCIgfCBcInZlY3RvcjNcIiB8IFwidmVjdG9yNFwiO1xyXG5leHBvcnQgdHlwZSBVbmlmb3JtVHlwZSA9IFwidmVjMlwiIHwgXCJ2ZWMzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRlS2V5TWFwPFRLZXksIFRWYWx1ZT4ge1xyXG4gIHByaXZhdGUgbWFwID0gbmV3IE1hcDxzdHJpbmcsIFRWYWx1ZT4oKTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBrZXlTZWxlY3RvcjogKGNvbXBvc2l0ZUtleTogVEtleSkgPT4gc3RyaW5nKSB7fVxyXG5cclxuICBnZXQoa2V5OiBUS2V5KSB7XHJcbiAgICB0aGlzLm1hcC5nZXQodGhpcy5rZXlTZWxlY3RvcihrZXkpKTtcclxuICB9XHJcblxyXG4gIHNldChrZXk6IFRLZXksIHZhbHVlOiBUVmFsdWUpIHtcclxuICAgIHRoaXMubWFwLnNldCh0aGlzLmtleVNlbGVjdG9yKGtleSksIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgdGhpcy5tYXAuY2xlYXIoKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGF0dHJpYnV0ZUJ1ZmZlcnMgPSBuZXcgQ29tcG9zaXRlS2V5TWFwPFxyXG4gIHsgbmFtZTogc3RyaW5nOyBidWZmZXJUeXBlOiBBdHRyaWJ1dGVCdWZmZXJUeXBlIH0sXHJcbiAgc3RyaW5nXHJcbj4oKGtleSkgPT4gYCR7a2V5Lm5hbWV9OyR7a2V5LmJ1ZmZlclR5cGV9YCk7XHJcblxyXG5jb25zdCB1bmlmb3JtcyA9IG5ldyBDb21wb3NpdGVLZXlNYXA8XHJcbiAgeyBuYW1lOiBzdHJpbmc7IHVuaWZvcm1UeXBlOiBVbmlmb3JtVHlwZSB9LFxyXG4gIHN0cmluZ1xyXG4+KChrZXkpID0+IGAke2tleS5uYW1lfTske2tleS51bmlmb3JtVHlwZX1gKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhcHBlbmRXaXRoU2hhZGVyT3B0aW9ucyA9IChlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gIC8vY29tcGlsZVxyXG4gIC8vY3JlYXRlIG1hcFxyXG5cclxuICBlbGVtZW50LmFwcGVuZENoaWxkKHdpdGhMYWJlbChjcmVhdGVDb2xvcjQoKVswXSwgXCJcIiwgXCJ1X2NvbG9yXCIpKTtcclxuICBlbGVtZW50LmFwcGVuZENoaWxkKHdpdGhMYWJlbChjcmVhdGVWZWN0b3I0KClbMF0sIFwiXCIsIFwidV9kaWZmdXNlXCIpKTtcclxuXHJcbiAgY29uc3QgW21hdDNlbCwgbWF0M2Nvbl0gPSBjcmVhdGVNYXRyaXgzKChuZXd2YWwpID0+IGNvbnNvbGUubG9nKG5ld3ZhbCkpO1xyXG4gIGNvbnN0IFtlZGlmZiwgY2RpZmZdID0gY3JlYXRlRHJvcGRvd24oXHJcbiAgICAoc2VsKSA9PiB7XHJcbiAgICAgIGlmICghc2VsKSByZXR1cm47XHJcbiAgICAgIGlmIChzZWwuaWQgPT09IFwiMFwiKSB7XHJcbiAgICAgICAgbWF0M2Nvbi5zZXRSZWFkb25seShmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNlbC5pZCA9PT0gXCIxXCIpIHtcclxuICAgICAgICBtYXQzY29uLnNldFJlYWRvbmx5KHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgXCJcIixcclxuICAgIHsgZW1wdHlJdGVtOiBmYWxzZSB9XHJcbiAgKTtcclxuXHJcbiAgY2RpZmYuc2V0SXRlbXMoW1xyXG4gICAgeyBpZDogXCIwXCIsIGRpc3BsYXk6IFwiQ29sb3IgcGlja2VyXCIgfSxcclxuICAgIHsgaWQ6IFwiMVwiLCBkaXNwbGF5OiBcIkN1c3RvbTJcIiB9LFxyXG4gIF0pO1xyXG4gIGNkaWZmLnNldFNlbGVjdGVkSXRlbUJ5SWQoXCIwXCIpO1xyXG5cclxuICBlbGVtZW50LmFwcGVuZENoaWxkKFxyXG4gICAgd2l0aExhYmVsKFxyXG4gICAgICBjcmVhdGVEaXYoXCJjb2x1bW4td2l0aC1nYXBcIiwgW2VkaWZmLCBtYXQzZWxdKSxcclxuICAgICAgXCJcIixcclxuICAgICAgXCJkb2JyZSBkaWZmdXNlXCJcclxuICAgIClcclxuICApO1xyXG5cclxuICBlbGVtZW50LmFwcGVuZENoaWxkKFxyXG4gICAgd2l0aExhYmVsKFxyXG4gICAgICBjcmVhdGVEaXYoXCJjb2x1bW4td2l0aC1nYXBcIiwgW1xyXG4gICAgICAgIGNyZWF0ZURyb3Bkb3duKChuZXdGcmFnbWVudCkgPT4ge30pWzBdLFxyXG4gICAgICAgIGNyZWF0ZU1hdHJpeDMoKG5ld3ZhbCkgPT4gY29uc29sZS5sb2cobmV3dmFsKSlbMF0sXHJcbiAgICAgIF0pLFxyXG4gICAgICBcIlwiLFxyXG4gICAgICBcInVfZGlmZnVzZTJcIlxyXG4gICAgKVxyXG4gICk7XHJcbiAgZWxlbWVudC5hcHBlbmRDaGlsZChcclxuICAgIHdpdGhMYWJlbChcclxuICAgICAgY3JlYXRlRGl2KFwiY29sdW1uLXdpdGgtZ2FwXCIsIFtcclxuICAgICAgICBjcmVhdGVEcm9wZG93bigobmV3RnJhZ21lbnQpID0+IHt9KVswXSxcclxuICAgICAgICBjcmVhdGVNYXRyaXgzKChuZXd2YWwpID0+IGNvbnNvbGUubG9nKG5ld3ZhbCkpWzBdLFxyXG4gICAgICBdKSxcclxuICAgICAgXCJcIixcclxuICAgICAgXCJ1X2RpZmZ1c2UyXCJcclxuICAgIClcclxuICApO1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3QgY29tcGlsZVNoYWRlciA9IChcclxuICByZW5kZXJpbmdDb250ZXh0OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXHJcbiAgdHlwZTogR0xlbnVtLFxyXG4gIHNvdXJjZTogc3RyaW5nXHJcbik6IFdlYkdMU2hhZGVyIHwgeyBlcnJvcjogc3RyaW5nIH0gPT4ge1xyXG4gIGNvbnN0IHNoYWRlciA9IHJlbmRlcmluZ0NvbnRleHQuY3JlYXRlU2hhZGVyKHR5cGUpO1xyXG4gIHJlbmRlcmluZ0NvbnRleHQuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcclxuICByZW5kZXJpbmdDb250ZXh0LmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gcmVuZGVyaW5nQ29udGV4dC5nZXRTaGFkZXJQYXJhbWV0ZXIoXHJcbiAgICBzaGFkZXIsXHJcbiAgICByZW5kZXJpbmdDb250ZXh0LkNPTVBJTEVfU1RBVFVTXHJcbiAgKTtcclxuXHJcbiAgaWYgKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIHNoYWRlcjtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgZXJyb3IgPSByZW5kZXJpbmdDb250ZXh0LmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcclxuICAgIHJlbmRlcmluZ0NvbnRleHQuZGVsZXRlU2hhZGVyKHNoYWRlcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBlcnJvcixcclxuICAgIH07XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVByb2dyYW0gPSAoXHJcbiAgcmVuZGVyaW5nQ29udGV4dDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LFxyXG4gIHZlcnRleFNoYWRlcjogV2ViR0xTaGFkZXIsXHJcbiAgZnJhZ21lbnRTaGFkZXI6IFdlYkdMU2hhZGVyXHJcbikgPT4ge1xyXG4gIGNvbnN0IHByb2dyYW0gPSByZW5kZXJpbmdDb250ZXh0LmNyZWF0ZVByb2dyYW0oKTtcclxuICByZW5kZXJpbmdDb250ZXh0LmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xyXG4gIHJlbmRlcmluZ0NvbnRleHQuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcclxuICByZW5kZXJpbmdDb250ZXh0LmxpbmtQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSByZW5kZXJpbmdDb250ZXh0LmdldFByb2dyYW1QYXJhbWV0ZXIoXHJcbiAgICBwcm9ncmFtLFxyXG4gICAgcmVuZGVyaW5nQ29udGV4dC5MSU5LX1NUQVRVU1xyXG4gICk7XHJcblxyXG4gIGlmIChyZXN1bHQpIHtcclxuICAgIHJldHVybiBwcm9ncmFtO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImNvcyBuaWUgaGFsb1wiKTtcclxuXHJcbiAgICByZW5kZXJpbmdDb250ZXh0LmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICBgQ3JlYXRpbmcgcHJvZ3JhbSBmYWlsZWQ6ICR7cmVuZGVyaW5nQ29udGV4dC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKX1gXHJcbiAgICApO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBFYXN5R0xBdHRyaWJ1dGVCdWZmZXIge31cclxuXHJcbmV4cG9ydCBjbGFzcyBFYXN5R0xVbmlmb3JtIHt9XHJcblxyXG5leHBvcnQgY2xhc3MgRWFzeUdMUHJvZ3JhbSB7fVxyXG4iLCJpbXBvcnQgeyBoYXNQcm9wZXJ0eSwgcmVtb3ZlTGFzdCB9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBjb21waWxlU2hhZGVyLCBjcmVhdGVQcm9ncmFtIH0gZnJvbSBcIi4vd2ViZ2xfdXRpbHMvdXRpbHNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFVuaWZvcm1JbmZvID0ge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB0eXBlOiBzdHJpbmc7XHJcbiAgdXBkYXRlOiAoKSA9PiB2b2lkO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQXR0cmlidXRlQnVmZmVySW5mbyA9IHt9O1xyXG5leHBvcnQgdHlwZSBDb21waWxlRXJyb3JzID0gW1xyXG4gIHZlcnRleFNoYWRlckVycm9yczogc3RyaW5nLFxyXG4gIGZyYWdtZW50U2hhZGVyRXJyb3JzOiBzdHJpbmdcclxuXTtcclxuZXhwb3J0IHR5cGUgU2hhZGVyQ29udHJvbGxlciA9IHt9O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVdlYkdMQ2FudmFzID0gKFxyXG4gIGNsYXNzTmFtZTogc3RyaW5nXHJcbik6IFtcclxuICBIVE1MQ2FudmFzRWxlbWVudCxcclxuICB7XHJcbiAgICBjb21waWxlU2hhZGVyczogKFxyXG4gICAgICB2ZXJ0ZXhTaGFkZXJDb250ZW50OiBzdHJpbmcsXHJcbiAgICAgIGZyYWdtZW50U2hhZGVyQ29udGVudDogc3RyaW5nXHJcbiAgICApID0+IENvbXBpbGVFcnJvcnMgfCBTaGFkZXJDb250cm9sbGVyO1xyXG4gIH1cclxuXSA9PiB7XHJcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICBjYW52YXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpO1xyXG4gIGlmICghY29udGV4dCkge1xyXG4gICAgLy90b2RvIG1vdmUgdG8gZXJyb3JzXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIHdlYmdsIGNvbnRleHRcIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb21waWxlU2hhZGVycyA9IChcclxuICAgIHZlcnRleFNoYWRlckNvbnRlbnQ6IHN0cmluZyxcclxuICAgIGZyYWdtZW50U2hhZGVyQ29udGVudDogc3RyaW5nXHJcbiAgKSA9PiB7XHJcbiAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gICAgICBjb250ZXh0LFxyXG4gICAgICBjb250ZXh0LlZFUlRFWF9TSEFERVIsXHJcbiAgICAgIHZlcnRleFNoYWRlckNvbnRlbnRcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxyXG4gICAgICBjb250ZXh0LFxyXG4gICAgICBjb250ZXh0LkZSQUdNRU5UX1NIQURFUixcclxuICAgICAgZnJhZ21lbnRTaGFkZXJDb250ZW50XHJcbiAgICApO1xyXG5cclxuICAgIGxldCB2ZXJ0ZXhFcnJvcjogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgaWYgKGhhc1Byb3BlcnR5KHZlcnRleFNoYWRlciwgXCJlcnJvclwiKSkge1xyXG4gICAgICB2ZXJ0ZXhFcnJvciA9IHJlbW92ZUxhc3QodmVydGV4U2hhZGVyLmVycm9yLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZnJhZ21lbnRFcnJvcjogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgaWYgKGhhc1Byb3BlcnR5KGZyYWdtZW50U2hhZGVyLCBcImVycm9yXCIpKSB7XHJcbiAgICAgIGZyYWdtZW50RXJyb3IgPSByZW1vdmVMYXN0KGZyYWdtZW50U2hhZGVyLmVycm9yLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmVydGV4RXJyb3IgfHwgZnJhZ21lbnRFcnJvcikge1xyXG4gICAgICAvL3RvZG8gY2xlYW51cFxyXG4gICAgICByZXR1cm4gW3ZlcnRleEVycm9yLCBmcmFnbWVudEVycm9yXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbShjb250ZXh0LCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKTtcclxuXHJcbiAgICAvL2NyZWF0ZUNvbnRyb2xsZXI5MFxyXG5cclxuICAgIC8vIGNvbnN0IG51bVVuaWZvcm1zID0gY29udGV4dC5nZXRQcm9ncmFtUGFyYW1ldGVyKFxyXG4gICAgLy8gICBwcm9ncmFtLFxyXG4gICAgLy8gICBjb250ZXh0LkFDVElWRV9VTklGT1JNU1xyXG4gICAgLy8gKTtcclxuICAgIC8vIGNvbnN0IHVuaWZvcm1TZXR0ZXJzID0ge307XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcImdldHRpbmcgdW5pZm9ybXNcIiwgbnVtVW5pZm9ybXMpO1xyXG5cclxuICAgIC8vIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1Vbmlmb3JtczsgKytpaSkge1xyXG4gICAgLy8gICBjb25zdCB1bmlmb3JtSW5mbyA9IGNvbnRleHQuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBpaSk7XHJcbiAgICAvLyAgIC8vIGlmIChpc0J1aWx0SW4odW5pZm9ybUluZm8pKSB7XHJcbiAgICAvLyAgIC8vICAgICBjb250aW51ZTtcclxuICAgIC8vICAgLy8gfVxyXG4gICAgLy8gICBsZXQgbmFtZSA9IHVuaWZvcm1JbmZvLm5hbWU7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKFwidW5pZm9ybTpcIiwgdW5pZm9ybUluZm8pO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vcHJvZ3JhbS5cclxuICAgIC8vZ2VuZXJhdGUgcHJvZ3JhbSBpbmZvXHJcblxyXG4gICAgLy9mcmFnbWVudDogeyBlcnJvcnM6IH1cclxuICAgIC8vZnJhZ21lbnQ6IHsgZXJyb3JzOiB9XHJcblxyXG4gICAgLy9kZWxldGUgc2hhZGVyc1xyXG5cclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmU8U2hhZGVyQ29udHJvbGxlcj4oe30pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBbXHJcbiAgICBjYW52YXMsXHJcbiAgICB7XHJcbiAgICAgIGNvbXBpbGVTaGFkZXJzLFxyXG4gICAgfSxcclxuICBdO1xyXG59O1xyXG4iLCJpbXBvcnQgeyB0cmFuc2xhdGlvbnMgfSBmcm9tIFwiLi8uLi90cmFuc2xhdGlvbnNcIjtcclxuaW1wb3J0IHsgY3JlYXRlRHJvcGRvd24gfSBmcm9tIFwiLi9jb21wb25lbnRzL2Ryb3Bkb3duXCI7XHJcbmltcG9ydCB7IFVuc3Vic2NyaWJlLCBWc0NvZGVBcGlQcm94eSB9IGZyb20gXCIuL2NvbW11bmljYXRpb25Qcm94eVwiO1xyXG5pbXBvcnQgeyBjcmVhdGVTZWN0aW9uVGl0bGUgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NyZWF0ZVNlY3Rpb25UaXRsZVwiO1xyXG5pbXBvcnQgeyBjcmVhdGVGQUJ1dHRvbiBhcyBjcmVhdGVCdXR0b24gfSBmcm9tIFwiLi9jb21wb25lbnRzL2NyZWF0ZUZBQnV0dG9uXCI7XHJcbmltcG9ydCB7IHdpdGhMYWJlbCB9IGZyb20gXCIuL2NvbXBvbmVudHMvd3JhcHBlcnNcIjtcclxuaW1wb3J0IHsgYXBwZW5kV2l0aFNoYWRlck9wdGlvbnMgfSBmcm9tIFwiLi9zaGFkZXJPcHRpb25zXCI7XHJcbmltcG9ydCB7IGNyZWF0ZURpdiB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tbW9uXCI7XHJcbmltcG9ydCB7IENvbXBpbGVFcnJvcnMsIGNyZWF0ZVdlYkdMQ2FudmFzIH0gZnJvbSBcIi4vY3JlYXRlV2ViR0xDYW52YXNcIjtcclxuXHJcbmNvbnN0IGNyZWF0ZVZpZXdlciA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCB2c2NvZGVBcGkgPSBuZXcgVnNDb2RlQXBpUHJveHkoKTtcclxuICBjb25zdCB2aWV3ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZXdlclwiKTtcclxuICBjb25zdCB2aWV3ZXJPcHRpb25zID0gY3JlYXRlRGl2KFwidmlld2VyLW9wdGlvbnNcIik7XHJcbiAgY29uc3Qgc2hhZGVyT3B0aW9ucyA9IGNyZWF0ZURpdihcInZpZXdlci1zaGFkZXItb3B0aW9uc1wiKTtcclxuICBjb25zdCBzaGFkZXJDb21waWxhdGlvbkVycm9ycyA9IGNyZWF0ZURpdihcInZpZXdlci1jb250ZW50IHNoYWRlci1lcnJvcnNcIik7XHJcbiAgY29uc3QgW3dlYkdMQ2FudmFzLCB3ZWJHTENvbnRyb2xsZXJdID0gY3JlYXRlV2ViR0xDYW52YXMoXCJ2aWV3ZXItY29udGVudFwiKTtcclxuXHJcbiAgdmlld2VyLmFwcGVuZENoaWxkKHdlYkdMQ2FudmFzKTtcclxuICB2aWV3ZXIuYXBwZW5kQ2hpbGQoc2hhZGVyQ29tcGlsYXRpb25FcnJvcnMpO1xyXG4gIHZpZXdlci5hcHBlbmRDaGlsZCh2aWV3ZXJPcHRpb25zKTtcclxuXHJcbiAgY29uc3Qgc2hvd0NvbnRlbnQgPSAoY29udGVudDogXCJjYW52YXNcIiB8IFwiZXJyb3JzXCIgfCBcIm5vbmVcIikgPT4ge1xyXG4gICAgd2ViR0xDYW52YXMuc3R5bGUudmlzaWJpbGl0eSA9XHJcbiAgICAgIGNvbnRlbnQgPT09IFwiY2FudmFzXCIgPyBcInZpc2libGVcIiA6IFwiY29sbGFwc2VcIjtcclxuICAgIHNoYWRlckNvbXBpbGF0aW9uRXJyb3JzLnN0eWxlLnZpc2liaWxpdHkgPVxyXG4gICAgICBjb250ZW50ID09PSBcImVycm9yc1wiID8gXCJ2aXNpYmxlXCIgOiBcImNvbGxhcHNlXCI7XHJcbiAgfTtcclxuXHJcbiAgbGV0IHNlbGVjdGVkVmVydGV4RmlsZVdhdGNoZXJVbnN1YnNjcmliZTogVW5zdWJzY3JpYmUgfCB1bmRlZmluZWQ7XHJcbiAgbGV0IHNlbGVjdGVkRnJhZ21lbnRGaWxlV2F0Y2hlclVuc3Vic2NyaWJlOiBVbnN1YnNjcmliZSB8IHVuZGVmaW5lZDtcclxuICBsZXQgc2VsZWN0ZWRWZXJ0ZXhDb250ZW50OiBzdHJpbmcgfCBudWxsO1xyXG4gIGxldCBzZWxlY3RlZEZyYWdtZW50Q29udGVudDogc3RyaW5nIHwgbnVsbDtcclxuXHJcbiAgY29uc3Qgb25TaGFkZXJDb250ZW50Q2hhbmdlZCA9ICgpID0+IHtcclxuICAgIHNoYWRlck9wdGlvbnMuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGNvbnNvbGUubG9nKHtcclxuICAgICAgZnJhZ21lbnQ6IHNlbGVjdGVkRnJhZ21lbnRDb250ZW50LFxyXG4gICAgICB2ZXJ0ZXg6IHNlbGVjdGVkVmVydGV4Q29udGVudCxcclxuICAgIH0pO1xyXG5cclxuICAgIGFwcGVuZFdpdGhTaGFkZXJPcHRpb25zKHNoYWRlck9wdGlvbnMpO1xyXG5cclxuICAgIGlmIChzZWxlY3RlZEZyYWdtZW50Q29udGVudCAmJiBzZWxlY3RlZFZlcnRleENvbnRlbnQpIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gd2ViR0xDb250cm9sbGVyLmNvbXBpbGVTaGFkZXJzKFxyXG4gICAgICAgIHNlbGVjdGVkVmVydGV4Q29udGVudCxcclxuICAgICAgICBzZWxlY3RlZEZyYWdtZW50Q29udGVudFxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0KSkge1xyXG4gICAgICAgIHNob3dDb250ZW50KFwiZXJyb3JzXCIpO1xyXG4gICAgICAgIGNvbnN0IFtcclxuICAgICAgICAgIHZlcnRleFNoYWRlckVycm9ycyxcclxuICAgICAgICAgIGZyYWdtZW50U2hhZGVyRXJyb3JzLFxyXG4gICAgICAgIF0gPSByZXN1bHQgYXMgQ29tcGlsZUVycm9ycztcclxuXHJcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodmVydGV4U2hhZGVyRXJyb3JzKSB7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChcIlZFUlRFWCBTSEFERVI6XCIsIHZlcnRleFNoYWRlckVycm9ycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZnJhZ21lbnRTaGFkZXJFcnJvcnMpIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKFwiRlJBR01FTlQgU0hBREVSOlwiLCBmcmFnbWVudFNoYWRlckVycm9ycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzaGFkZXJDb21waWxhdGlvbkVycm9ycy5pbm5lclRleHQgPSBlcnJvcnMuam9pbihcIlxcclxcblwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzaG93Q29udGVudChcImNhbnZhc1wiKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0NvbnRlbnQoXCJub25lXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZpZXdlck9wdGlvbnMuYXBwZW5kQ2hpbGQoXHJcbiAgICBjcmVhdGVEaXYoXCJ2aWV3ZXItc2hhZGVycy10aXRsZVwiLCBbXHJcbiAgICAgIGNyZWF0ZVNlY3Rpb25UaXRsZSh0cmFuc2xhdGlvbnMuc2hhZGVycywgXCJcIikuZWxlbWVudCxcclxuICAgICAgY3JlYXRlQnV0dG9uKFwiU3luY1wiLCBcInZpZXdlci1yZWZyZXNoLWJ1dHRvblwiLCAoKSA9PiB7XHJcbiAgICAgICAgdnNjb2RlQXBpLmdldFNoYWRlckRvY3VtZW50cygpLnRoZW4oKHNkKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBmaWxlcyA9IHNkLm1hcCgoZikgPT4gKHtcclxuICAgICAgICAgICAgaWQ6IGYuZmlsZVBhdGgsXHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGYuZmlsZU5hbWUsXHJcbiAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgdmVydGV4RHJvcGRvd25Db250cm9sbGVyLnNldEl0ZW1zKGZpbGVzKTtcclxuICAgICAgICAgIGZyYWdtZW50RHJvcGRvd25Db250cm9sbGVyLnNldEl0ZW1zKGZpbGVzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSkuZWxlbWVudCxcclxuICAgIF0pXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgW3ZlcnRleERyb3Bkb3duRWxlbWVudCwgdmVydGV4RHJvcGRvd25Db250cm9sbGVyXSA9IGNyZWF0ZURyb3Bkb3duKFxyXG4gICAgYXN5bmMgKG5ld1ZlcnRleCkgPT4ge1xyXG4gICAgICBzZWxlY3RlZFZlcnRleEZpbGVXYXRjaGVyVW5zdWJzY3JpYmU/LigpO1xyXG5cclxuICAgICAgaWYgKG5ld1ZlcnRleCkge1xyXG4gICAgICAgIHNlbGVjdGVkVmVydGV4RmlsZVdhdGNoZXJVbnN1YnNjcmliZSA9IHZzY29kZUFwaS5zdWJzY3JpYmVUb0RvY3VtZW50U2F2ZShcclxuICAgICAgICAgIG5ld1ZlcnRleC5pZCxcclxuICAgICAgICAgIChuZXdDb250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkVmVydGV4Q29udGVudCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgICAgIG9uU2hhZGVyQ29udGVudENoYW5nZWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZWxlY3RlZFZlcnRleENvbnRlbnQgPSBuZXdWZXJ0ZXhcclxuICAgICAgICA/IGF3YWl0IHZzY29kZUFwaS5nZXREb2N1bWVudFRleHQobmV3VmVydGV4LmlkKVxyXG4gICAgICAgIDogXCJcIjtcclxuICAgICAgb25TaGFkZXJDb250ZW50Q2hhbmdlZCgpO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgdmlld2VyT3B0aW9ucy5hcHBlbmRDaGlsZChcclxuICAgIHdpdGhMYWJlbChcclxuICAgICAgdmVydGV4RHJvcGRvd25FbGVtZW50LFxyXG4gICAgICBcInZpZXdlci12ZXJ0ZXgtc2hhZGVyLXNlbGVjdG9yXCIsXHJcbiAgICAgIFwiVmVydGV4IFNoYWRlclwiXHJcbiAgICApXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgW2ZyYWdtZW50RHJvcGRvd25FbGVtZW50LCBmcmFnbWVudERyb3Bkb3duQ29udHJvbGxlcl0gPSBjcmVhdGVEcm9wZG93bihcclxuICAgIGFzeW5jIChuZXdGcmFnbWVudCkgPT4ge1xyXG4gICAgICBzZWxlY3RlZEZyYWdtZW50RmlsZVdhdGNoZXJVbnN1YnNjcmliZT8uKCk7XHJcblxyXG4gICAgICBpZiAobmV3RnJhZ21lbnQpIHtcclxuICAgICAgICBzZWxlY3RlZEZyYWdtZW50RmlsZVdhdGNoZXJVbnN1YnNjcmliZSA9IHZzY29kZUFwaS5zdWJzY3JpYmVUb0RvY3VtZW50U2F2ZShcclxuICAgICAgICAgIG5ld0ZyYWdtZW50LmlkLFxyXG4gICAgICAgICAgKG5ld0NvbnRlbnQpID0+IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGcmFnbWVudENvbnRlbnQgPSBuZXdDb250ZW50O1xyXG4gICAgICAgICAgICBvblNoYWRlckNvbnRlbnRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2VsZWN0ZWRGcmFnbWVudENvbnRlbnQgPSBuZXdGcmFnbWVudFxyXG4gICAgICAgID8gYXdhaXQgdnNjb2RlQXBpLmdldERvY3VtZW50VGV4dChuZXdGcmFnbWVudC5pZClcclxuICAgICAgICA6IFwiXCI7XHJcbiAgICAgIG9uU2hhZGVyQ29udGVudENoYW5nZWQoKTtcclxuICAgIH1cclxuICApO1xyXG4gIHZpZXdlck9wdGlvbnMuYXBwZW5kQ2hpbGQoXHJcbiAgICB3aXRoTGFiZWwoXHJcbiAgICAgIGZyYWdtZW50RHJvcGRvd25FbGVtZW50LFxyXG4gICAgICBcInZpZXdlci1mcmFnbWVudC1zaGFkZXItc2VsZWN0b3JcIixcclxuICAgICAgXCJGcmFnbWVudCBTaGFkZXJcIlxyXG4gICAgKVxyXG4gICk7XHJcblxyXG4gIHZpZXdlck9wdGlvbnMuYXBwZW5kQ2hpbGQoc2hhZGVyT3B0aW9ucyk7XHJcbn07XHJcblxyXG5jcmVhdGVWaWV3ZXIoKTtcclxuIiwiZXhwb3J0IGNvbnN0IGNyZWF0ZVNlY3Rpb25UaXRsZSA9ICh0ZXh0OiBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcclxuICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcclxuICBlbGVtZW50LmNsYXNzTmFtZSA9IGAke2NsYXNzTmFtZX0gc2VjdGlvbi10aXRsZWA7XHJcbiAgcmV0dXJuIHsgZWxlbWVudCB9O1xyXG59O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9